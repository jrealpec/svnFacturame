/*
 jQuery Migrate v3.0.0 | (c) jQuery Foundation and other contributors | jquery.org/license  Context menu plugin
 Radio buttons to regular buttons plugin, based on jQuery UI Button 1.11.2
 This has been done to avoid name collision
 Dialog plugin, based on jQuery UI Dialog 1.11.2
 This has been done to avoid name collision
 Menu plugin, based on jQuery UI Menu 1.11.2
 This has been done to avoid name collision
*/
var $jscomp={scope:{},findInternal:function(b,d,e){b instanceof String&&(b=String(b));for(var k=b.length,n=0;n<k;n++){var f=b[n];if(d.call(e,f,n,b))return{i:n,v:f}}return{i:-1,v:void 0}}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(b,d,e){if(e.get||e.set)throw new TypeError("ES3 does not support getters and setters.");b!=Array.prototype&&b!=Object.prototype&&(b[d]=e.value)};
$jscomp.getGlobal=function(b){return"undefined"!=typeof window&&window===b?b:"undefined"!=typeof global&&null!=global?global:b};$jscomp.global=$jscomp.getGlobal(this);$jscomp.polyfill=function(b,d,e,k){if(d){e=$jscomp.global;b=b.split(".");for(k=0;k<b.length-1;k++){var n=b[k];n in e||(e[n]={});e=e[n]}b=b[b.length-1];k=e[b];d=d(k);d!=k&&null!=d&&$jscomp.defineProperty(e,b,{configurable:!0,writable:!0,value:d})}};
$jscomp.polyfill("Array.prototype.find",function(b){return b?b:function(d,b){return $jscomp.findInternal(this,d,b).v}},"es6-impl","es3");$jscomp.polyfill("Array.prototype.fill",function(b){return b?b:function(d,b,k){var e=this.length||0;0>b&&(b=Math.max(0,e+b));if(null==k||k>e)k=e;k=Number(k);0>k&&(k=Math.max(0,e+k));for(b=Number(b||0);b<k;b++)this[b]=d;return this}},"es6-impl","es3");
$jscomp.polyfill("Number.isFinite",function(b){return b?b:function(d){return"number"!==typeof d?!1:!isNaN(d)&&Infinity!==d&&-Infinity!==d}},"es6-impl","es3");$jscomp.polyfill("Number.isInteger",function(b){return b?b:function(d){return Number.isFinite(d)?d===Math.floor(d):!1}},"es6-impl","es3");$jscomp.SYMBOL_PREFIX="jscomp_symbol_";$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.symbolCounter_=0;
$jscomp.Symbol=function(b){return $jscomp.SYMBOL_PREFIX+(b||"")+$jscomp.symbolCounter_++};$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var b=$jscomp.global.Symbol.iterator;b||(b=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[b]&&$jscomp.defineProperty(Array.prototype,b,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};
$jscomp.arrayIterator=function(b){var d=0;return $jscomp.iteratorPrototype(function(){return d<b.length?{done:!1,value:b[d++]}:{done:!0}})};$jscomp.iteratorPrototype=function(b){$jscomp.initSymbolIterator();b={next:b};b[$jscomp.global.Symbol.iterator]=function(){return this};return b};$jscomp.array=$jscomp.array||{};
$jscomp.iteratorFromArray=function(b,d){$jscomp.initSymbolIterator();b instanceof String&&(b+="");var e=0,k={next:function(){if(e<b.length){var n=e++;return{value:d(n,b[n]),done:!1}}k.next=function(){return{done:!0,value:void 0}};return k.next()}};k[Symbol.iterator]=function(){return k};return k};$jscomp.polyfill("Array.prototype.keys",function(b){return b?b:function(){return $jscomp.iteratorFromArray(this,function(d){return d})}},"es6-impl","es3");
var DocuViewarejQueryPlugins={registered:!1,register:function(b){this.registered||(this.registered=!0,jQuery&&jQuery.fn&&jQuery.fn.jquery&&3<=parseInt(jQuery.fn.jquery)&&("undefined"==typeof jQuery.migrateMute&&(jQuery.migrateMute=!0),function(d,b){function e(a){f[a]||(f[a]=!0,d.migrateWarnings.push(a))}function n(a,g,l,c){Object.defineProperty(a,g,{configurable:!0,enumerable:!0,get:function(){e(c);return l}})}d.migrateVersion="3.0.0";var f={};d.migrateWarnings=[];void 0===d.migrateTrace&&(d.migrateTrace=
!0);d.migrateReset=function(){f={};d.migrateWarnings.length=0};"BackCompat"===document.compatMode&&e("jQuery is not compatible with Quirks Mode");var m=d.fn.init,c=d.isNumeric,h=d.find,q=/\[(\s*[-\w]+\s*)([~|^$*]?=)\s*([-\w#]*?#[-\w#]*)\s*\]/,A=/\[(\s*[-\w]+\s*)([~|^$*]?=)\s*([-\w#]*?#[-\w#]*)\s*\]/g;d.fn.init=function(a){var g=Array.prototype.slice.call(arguments);"string"===typeof a&&"#"===a&&(e("jQuery( '#' ) is not a valid selector"),g[0]=[]);return m.apply(this,g)};d.fn.init.prototype=d.fn;d.find=
function(a){var g=Array.prototype.slice.call(arguments);if("string"===typeof a&&q.test(a))try{document.querySelector(a)}catch(C){a=a.replace(A,function(a,g,l,p){return"["+g+l+'"'+p+'"]'});try{document.querySelector(a),e("Attribute selector with '#' must be quoted: "+g[0]),g[0]=a}catch(H){e("Attribute selector with '#' was not fixed: "+g[0])}}return h.apply(this,g)};for(var z in h)Object.prototype.hasOwnProperty.call(h,z)&&(d.find[z]=h[z]);d.fn.size=function(){e("jQuery.fn.size() is deprecated; use the .length property");
return this.length};d.parseJSON=function(){e("jQuery.parseJSON is deprecated; use JSON.parse");return JSON.parse.apply(null,arguments)};d.isNumeric=function(a){var g=c(a),l=a&&a.toString();a=!d.isArray(a)&&0<=l-parseFloat(l)+1;g!==a&&e("jQuery.isNumeric() should not be called on constructed objects");return a};n(d,"unique",d.uniqueSort,"jQuery.unique is deprecated, use jQuery.uniqueSort");n(d.expr,"filters",d.expr.pseudos,"jQuery.expr.filters is now jQuery.expr.pseudos");n(d.expr,":",d.expr.pseudos,
'jQuery.expr[":"] is now jQuery.expr.pseudos');var M=d.ajax;d.ajax=function(){var a=M.apply(this,arguments);a.promise&&(n(a,"success",a.done,"jQXHR.success is deprecated and removed"),n(a,"error",a.fail,"jQXHR.error is deprecated and removed"),n(a,"complete",a.always,"jQXHR.complete is deprecated and removed"));return a};var P=d.fn.removeAttr,t=d.fn.toggleClass,v=/\S+/g;d.fn.removeAttr=function(a){var g=this;d.each(a.match(v),function(a,l){d.expr.match.bool.test(l)&&(e("jQuery.fn.removeAttr no longer sets boolean properties: "+
l),g.prop(l,!1))});return P.apply(this,arguments)};d.fn.toggleClass=function(a){if(void 0!==a&&"boolean"!==typeof a)return t.apply(this,arguments);e("jQuery.fn.toggleClass( boolean ) is deprecated");return this.each(function(){var g=this.getAttribute&&this.getAttribute("class")||"";g&&d.data(this,"__className__",g);this.setAttribute&&this.setAttribute("class",g||!1===a?"":d.data(this,"__className__")||"")})};var r=!1;d.swap&&d.each(["height","width","reliableMarginRight"],function(a,g){var l=d.cssHooks[g]&&
d.cssHooks[g].get;l&&(d.cssHooks[g].get=function(){var a;r=!0;a=l.apply(this,arguments);r=!1;return a})});d.swap=function(a,g,l,c){var p,d={};r||e("jQuery.swap() is undocumented and deprecated");for(p in g)d[p]=a.style[p],a.style[p]=g[p];l=l.apply(a,c||[]);for(p in g)a.style[p]=d[p];return l};var w=d.data;d.data=function(a,g,l){var c;return g&&g!==d.camelCase(g)&&(c=d.hasData(a)&&w.call(this,a))&&g in c?(e("jQuery.data() always sets/gets camelCased names: "+g),2<arguments.length&&(c[g]=l),c[g]):w.apply(this,
arguments)};var x=d.Tween.prototype.run;d.Tween.prototype.run=function(a){1<d.easing[this.easing].length&&(e('easing function "jQuery.easing.'+this.easing.toString()+'" should use only first argument'),d.easing[this.easing]=d.easing[this.easing].bind(d.easing,a,this.options.duration*a,0,1,this.options.duration));x.apply(this,arguments)};var E=d.fn.load,O=d.event.fix;d.event.props=[];d.event.fixHooks={};d.event.fix=function(a){var g;g=a.type;var l=this.fixHooks[g],c=d.event.props;if(c.length)for(e("jQuery.event.props are deprecated and removed: "+
c.join());c.length;)d.event.addProp(c.pop());if(l&&!l._migrated_&&(l._migrated_=!0,e("jQuery.event.fixHooks are deprecated and removed: "+g),(c=l.props)&&c.length))for(;c.length;)d.event.addProp(c.pop());g=O.call(this,a);return l&&l.filter?l.filter(g,a):g};d.each(["load","unload","error"],function(a,g){d.fn[g]=function(){var a=Array.prototype.slice.call(arguments,0);if("load"===g&&"string"===typeof a[0])return E.apply(this,a);e("jQuery.fn."+g+"() is deprecated");a.splice(0,0,g);if(arguments.length)return this.on.apply(this,
a);this.triggerHandler.apply(this,a);return this}});d(function(){d(document).triggerHandler("ready")});d.event.special.ready={setup:function(){this===document&&e("'ready' event is deprecated")}};d.fn.extend({bind:function(a,g,l){e("jQuery.fn.bind() is deprecated");return this.on(a,null,g,l)},unbind:function(a,g){e("jQuery.fn.unbind() is deprecated");return this.off(a,null,g)},delegate:function(a,g,l,c){e("jQuery.fn.delegate() is deprecated");return this.on(g,a,l,c)},undelegate:function(a,g,l){e("jQuery.fn.undelegate() is deprecated");
return 1===arguments.length?this.off(a,"**"):this.off(g,a||"**",l)}});var a=d.fn.offset;d.fn.offset=function(){var g=this[0],l={top:0,left:0};return g&&g.nodeType?d.contains((g.ownerDocument||document).documentElement,g)?a.apply(this,arguments):(e("jQuery.fn.offset() requires an element connected to a document"),l):(e("jQuery.fn.offset() requires a valid DOM element"),l)};var F=d.param;d.param=function(a,g){var l=d.ajaxSettings&&d.ajaxSettings.traditional;void 0===g&&l&&(e("jQuery.param() no longer uses jQuery.ajaxSettings.traditional"),
g=l);return F.call(this,a,g)};var G=d.fn.andSelf||d.fn.addBack;d.fn.andSelf=function(){e("jQuery.fn.andSelf() replaced by jQuery.fn.addBack()");return G.apply(this,arguments)};var g=d.Deferred,l=[["resolve","done",d.Callbacks("once memory"),d.Callbacks("once memory"),"resolved"],["reject","fail",d.Callbacks("once memory"),d.Callbacks("once memory"),"rejected"],["notify","progress",d.Callbacks("memory"),d.Callbacks("memory")]];d.Deferred=function(a){var c=g(),p=c.promise();c.pipe=p.pipe=function(){var a=
arguments;e("deferred.pipe() is deprecated");return d.Deferred(function(g){d.each(l,function(l,y){var C=d.isFunction(a[l])&&a[l];c[y[1]](function(){var a=C&&C.apply(this,arguments);if(a&&d.isFunction(a.promise))a.promise().done(g.resolve).fail(g.reject).progress(g.notify);else g[y[0]+"With"](this===p?g.promise():this,C?[a]:arguments)})});a=null}).promise()};a&&a.call(c,c);return c}}(jQuery,window)),function(d){"function"==typeof define&&define.amd?define(["jquery"],d):d(jQuery)}(function(d){function b(c,
h){var q,b,f,e=c.nodeName.toLowerCase();return"area"===e?(q=c.parentNode,b=q.name,c.href&&b&&"map"===q.nodeName.toLowerCase()?(f=d("img[usemap='#"+b+"']")[0],!!f&&k(f)):!1):(/input|select|textarea|button|object/.test(e)?!c.disabled:"a"===e?c.href||h:h)&&k(c)}function k(c){return d.expr.filters.visible(c)&&!d(c).parents().addBack().filter(function(){return"hidden"===d.css(this,"visibility")}).length}d.dvUi=d.dvUi||{};d.extend(d.dvUi,{version:"1.11.2",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,
END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}});d.fn.extend({scrollParent:function(c){var h=this.css("position"),q="absolute"===h,b=c?/(auto|scroll|hidden)/:/(auto|scroll)/;c=this.parents().filter(function(){var c=d(this);return q&&"static"===c.css("position")?!1:b.test(c.css("overflow")+c.css("overflow-y")+c.css("overflow-x"))}).eq(0);return"fixed"!==h&&c.length?c:d(this[0].ownerDocument||document)},uniqueId:function(){var c=0;return function(){return this.each(function(){this.id||
(this.id="dvUi-id-"+ ++c)})}}(),removeUniqueId:function(){return this.each(function(){/^dvUi-id-\d+$/.test(this.id)&&d(this).removeAttr("id")})}});d.extend(d.expr[":"],{data:d.expr.createPseudo?d.expr.createPseudo(function(c){return function(h){return!!d.data(h,c)}}):function(c,h,q){return!!d.data(c,q[3])},focusable:function(c){return b(c,!isNaN(d.attr(c,"tabindex")))},tabbable:function(c){var h=d.attr(c,"tabindex"),q=isNaN(h);return(q||0<=h)&&b(c,!q)}});d("<a>").outerWidth(1).jquery||d.each(["Width",
"Height"],function(c,h){function q(c,h,q,f){return d.each(b,function(){h-=parseFloat(d.css(c,"padding"+this))||0;q&&(h-=parseFloat(d.css(c,"border"+this+"Width"))||0);f&&(h-=parseFloat(d.css(c,"margin"+this))||0)}),h}var b="Width"===h?["Left","Right"]:["Top","Bottom"],f=h.toLowerCase(),e={innerWidth:d.fn.innerWidth,innerHeight:d.fn.innerHeight,outerWidth:d.fn.outerWidth,outerHeight:d.fn.outerHeight};d.fn["inner"+h]=function(c){return void 0===c?e["inner"+h].call(this):this.each(function(){d(this).css(f,
q(this,c)+"px")})};d.fn["outer"+h]=function(c,b){return"number"!=typeof c?e["outer"+h].call(this,c):this.each(function(){d(this).css(f,q(this,c,!0,b)+"px")})}});d.fn.addBack||(d.fn.addBack=function(c){return this.add(null==c?this.prevObject:this.prevObject.filter(c))});d("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(d.fn.removeData=function(c){return function(h){return arguments.length?c.call(this,d.camelCase(h)):c.call(this)}}(d.fn.removeData));d.dvUi.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase());
d.fn.extend({focus:function(c){return function(h,q){return"number"==typeof h?this.each(function(){var c=this;setTimeout(function(){d(c).focus();q&&q.call(c)},h)}):c.apply(this,arguments)}}(d.fn.focus),disableSelection:function(){var c="onselectstart"in document.createElement("div")?"selectstart":"mousedown";return function(){return this.bind(c+".dvUi-disableSelection",function(c){c.preventDefault()})}}(),enableSelection:function(){return this.unbind(".dvUi-disableSelection")},zIndex:function(c){if(void 0!==
c)return this.css("zIndex",c);if(this.length){var h,q;for(c=d(this[0]);c.length&&c[0]!==document;){if(h=c.css("position"),("absolute"===h||"relative"===h||"fixed"===h)&&(q=parseInt(c.css("zIndex"),10),!isNaN(q)&&0!==q))return q;c=c.parent()}}return 0}});d.dvUi.plugin={add:function(c,h,q){var b;c=d.dvUi[c].prototype;for(b in q)c.plugins[b]=c.plugins[b]||[],c.plugins[b].push([h,q[b]])},call:function(c,d,q,b){if((d=c.plugins[d])&&(b||c.element[0].parentNode&&11!==c.element[0].parentNode.nodeType))for(b=
0;d.length>b;b++)c.options[d[b][0]]&&d[b][1].apply(c.element,q)}};var n=0,f=Array.prototype.slice;d.cleanData=function(c){return function(h){var q,b,f;for(f=0;null!=(b=h[f]);f++)try{(q=d._data(b,"events"))&&q.remove&&d(b).triggerHandler("remove")}catch(M){}c(h)}}(d.cleanData);d.widget=function(c,h,q){var b,f,e,m,k={},v=c.split(".")[0];return c=c.split(".")[1],b=v+"-"+c,q||(q=h,h=d.Widget),d.expr[":"][b.toLowerCase()]=function(c){return!!d.data(c,b)},d[v]=d[v]||{},f=d[v][c],e=d[v][c]=function(c,d){return this._createWidget?
(arguments.length&&this._createWidget(c,d),void 0):new e(c,d)},d.extend(e,f,{version:q.version,_proto:d.extend({},q),_childConstructors:[]}),m=new h,m.options=d.widget.extend({},m.options),d.each(q,function(c,b){return d.isFunction(b)?(k[c]=function(){var d=function(){return h.prototype[c].apply(this,arguments)},q=function(d){return h.prototype[c].apply(this,d)};return function(){var c,a=this._super,h=this._superApply;return this._super=d,this._superApply=q,c=b.apply(this,arguments),this._super=a,
this._superApply=h,c}}(),void 0):(k[c]=b,void 0)}),e.prototype=d.widget.extend(m,{widgetEventPrefix:f?m.widgetEventPrefix||c:c},k,{constructor:e,namespace:v,widgetName:c,widgetFullName:b}),f?(d.each(f._childConstructors,function(c,h){var b=h.prototype;d.widget(b.namespace+"."+b.widgetName,e,h._proto)}),delete f._childConstructors):h._childConstructors.push(e),d.widget.bridge(c,e),e};d.widget.extend=function(c){for(var h,b,A=f.call(arguments,1),z=0,e=A.length;e>z;z++)for(h in A[z])b=A[z][h],A[z].hasOwnProperty(h)&&
void 0!==b&&(c[h]=d.isPlainObject(b)?d.isPlainObject(c[h])?d.widget.extend({},c[h],b):d.widget.extend({},b):b);return c};d.widget.bridge=function(c,h){var b=h.prototype.widgetFullName||c;d.fn[c]=function(q){var z="string"==typeof q,A=f.call(arguments,1),e=this;return q=!z&&A.length?d.widget.extend.apply(null,[q].concat(A)):q,z?this.each(function(){var h,f=d.data(this,b);return"instance"===q?(e=f,!1):f?d.isFunction(f[q])&&"_"!==q.charAt(0)?(h=f[q].apply(f,A),h!==f&&void 0!==h?(e=h&&h.jquery?e.pushStack(h.get()):
h,!1):void 0):d.error("no such method '"+q+"' for "+c+" widget instance"):d.error("cannot call methods on "+c+" prior to initialization; attempted to call method '"+q+"'")}):this.each(function(){var c=d.data(this,b);c?(c.option(q||{}),c._init&&c._init()):d.data(this,b,new h(q,this))}),e}};d.Widget=function(){};d.Widget._childConstructors=[];d.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(c,h){h=d(h||this.defaultElement||
this)[0];this.element=d(h);this.uuid=n++;this.eventNamespace="."+this.widgetName+this.uuid;this.bindings=d();this.hoverable=d();this.focusable=d();h!==this&&(d.data(h,this.widgetFullName,this),this._on(!0,this.element,{remove:function(c){c.target===h&&this.destroy()}}),this.document=d(h.style?h.ownerDocument:h.document||h),this.window=d(this.document[0].defaultView||this.document[0].parentWindow));this.options=d.widget.extend({},this.options,this._getCreateOptions(),c);this._create();this._trigger("create",
null,this._getCreateEventData());this._init()},_getCreateOptions:d.noop,_getCreateEventData:d.noop,_create:d.noop,_init:d.noop,destroy:function(){this._destroy();this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData(d.camelCase(this.widgetFullName));this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled dvUi-state-disabled");this.bindings.unbind(this.eventNamespace);this.hoverable.removeClass("dvUi-state-hover");
this.focusable.removeClass("dvUi-state-focus")},_destroy:d.noop,widget:function(){return this.element},option:function(c,h){var b,f,z,e=c;if(0===arguments.length)return d.widget.extend({},this.options);if("string"==typeof c)if(e={},b=c.split("."),c=b.shift(),b.length){f=e[c]=d.widget.extend({},this.options[c]);for(z=0;b.length-1>z;z++)f[b[z]]=f[b[z]]||{},f=f[b[z]];if(c=b.pop(),1===arguments.length)return void 0===f[c]?null:f[c];f[c]=h}else{if(1===arguments.length)return void 0===this.options[c]?null:
this.options[c];e[c]=h}return this._setOptions(e),this},_setOptions:function(c){for(var d in c)this._setOption(d,c[d]);return this},_setOption:function(c,d){return this.options[c]=d,"disabled"===c&&(this.widget().toggleClass(this.widgetFullName+"-disabled",!!d),d&&(this.hoverable.removeClass("dvUi-state-hover"),this.focusable.removeClass("dvUi-state-focus"))),this},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_on:function(c,h,
b){var q,f=this;"boolean"!=typeof c&&(b=h,h=c,c=!1);b?(h=q=d(h),this.bindings=this.bindings.add(h)):(b=h,h=this.element,q=this.widget());d.each(b,function(b,z){function e(){return c||!0!==f.options.disabled&&!d(this).hasClass("dvUi-state-disabled")?("string"==typeof z?f[z]:z).apply(f,arguments):void 0}"string"!=typeof z&&(e.guid=z.guid=z.guid||e.guid||d.guid++);var A=b.match(/^([\w:-]*)\s*(.*)$/),m=A[1]+f.eventNamespace;(A=A[2])?q.delegate(A,m,e):h.bind(m,e)})},_off:function(c,h){h=(h||"").split(" ").join(this.eventNamespace+
" ")+this.eventNamespace;c.unbind(h).undelegate(h);this.bindings=d(this.bindings.not(c).get());this.focusable=d(this.focusable.not(c).get());this.hoverable=d(this.hoverable.not(c).get())},_delay:function(c,d){var h=this;return setTimeout(function(){return("string"==typeof c?h[c]:c).apply(h,arguments)},d||0)},_hoverable:function(c){this.hoverable=this.hoverable.add(c);this._on(c,{mouseenter:function(c){d(c.currentTarget).addClass("dvUi-state-hover")},mouseleave:function(c){d(c.currentTarget).removeClass("dvUi-state-hover")}})},
_focusable:function(c){this.focusable=this.focusable.add(c);this._on(c,{focusin:function(c){d(c.currentTarget).addClass("dvUi-state-focus")},focusout:function(c){d(c.currentTarget).removeClass("dvUi-state-focus")}})},_trigger:function(c,h,b){var q,f=this.options[c];if(b=b||{},h=d.Event(h),h.type=(c===this.widgetEventPrefix?c:this.widgetEventPrefix+c).toLowerCase(),h.target=this.element[0],c=h.originalEvent)for(q in c)q in h||(h[q]=c[q]);return this.element.trigger(h,b),!(d.isFunction(f)&&!1===f.apply(this.element[0],
[h].concat(b))||h.isDefaultPrevented())}};d.each({show:"fadeIn",hide:"fadeOut"},function(c,h){d.Widget.prototype["_"+c]=function(b,f,z){"string"==typeof f&&(f={effect:f});var q,e=f?!0===f||"number"==typeof f?h:f.effect||h:c;f=f||{};"number"==typeof f&&(f={duration:f});q=!d.isEmptyObject(f);f.complete=z;f.delay&&b.delay(f.delay);q&&d.effects&&d.effects.effect[e]?b[c](f):e!==c&&b[e]?b[e](f.duration,f.easing,z):b.queue(function(h){d(this)[c]();z&&z.call(b[0]);h()})}});d.widget;var m=!1;d(document).mouseup(function(){m=
!1});d.widget("dvUi.mouse",{version:"1.11.2",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var c=this;this.element.bind("mousedown."+this.widgetName,function(d){return c._mouseDown(d)}).bind("click."+this.widgetName,function(h){return!0===d.data(h.target,c.widgetName+".preventClickEvent")?(d.removeData(h.target,c.widgetName+".preventClickEvent"),h.stopImmediatePropagation(),!1):void 0});this.started=!1},_mouseDestroy:function(){this.element.unbind("."+
this.widgetName);this._mouseMoveDelegate&&this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(c){if(!m){this._mouseMoved=!1;this._mouseStarted&&this._mouseUp(c);this._mouseDownEvent=c;var h=this,b=1===c.which,f="string"==typeof this.options.cancel&&c.target.nodeName?d(c.target).closest(this.options.cancel).length:!1;return b&&!f&&this._mouseCapture(c)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||
(this._mouseDelayTimer=setTimeout(function(){h.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(c)&&this._mouseDelayMet(c)&&(this._mouseStarted=!1!==this._mouseStart(c),!this._mouseStarted)?(c.preventDefault(),!0):(!0===d.data(c.target,this.widgetName+".preventClickEvent")&&d.removeData(c.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(c){return h._mouseMove(c)},this._mouseUpDelegate=function(c){return h._mouseUp(c)},this.document.bind("mousemove."+this.widgetName,
this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),c.preventDefault(),m=!0,!0)):!0}},_mouseMove:function(c){return this._mouseMoved&&(d.dvUi.ie&&(!document.documentMode||9>document.documentMode)&&!c.button||!c.which)?this._mouseUp(c):((c.which||c.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(c),c.preventDefault()):(this._mouseDistanceMet(c)&&this._mouseDelayMet(c)&&(this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,c),this._mouseStarted?
this._mouseDrag(c):this._mouseUp(c)),!this._mouseStarted))},_mouseUp:function(c){return this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,c.target===this._mouseDownEvent.target&&d.data(c.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(c)),m=!1,!1},_mouseDistanceMet:function(c){return Math.max(Math.abs(this._mouseDownEvent.pageX-c.pageX),Math.abs(this._mouseDownEvent.pageY-
c.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}});(function(){function c(c,a,d){return[parseFloat(c[0])*(x.test(c[0])?a/100:1),parseFloat(c[1])*(x.test(c[1])?d/100:1)]}function h(c){var a=c[0];return 9===a.nodeType?{width:c.width(),height:c.height(),offset:{top:0,left:0}}:d.isWindow(a)?{width:c.width(),height:c.height(),offset:{top:c.scrollTop(),left:c.scrollLeft()}}:
a.preventDefault?{width:0,height:0,offset:{top:a.pageY,left:a.pageX}}:{width:c.outerWidth(),height:c.outerHeight(),offset:c.offset()}}d.dvUi=d.dvUi||{};var b,f,z=Math.max,e=Math.abs,m=Math.round,k=/left|center|right/,v=/top|center|bottom/,r=/[\+\-]\d+(\.[\d]+)?%?/,n=/^\w+/,x=/%$/,E=d.fn.position;d.position={scrollbarWidth:function(){if(void 0!==b)return b;var c,a,h=d("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),
q=h.children()[0];return d("body").append(h),c=q.offsetWidth,h.css("overflow","scroll"),a=q.offsetWidth,c===a&&(a=h[0].clientWidth),h.remove(),b=c-a},getScrollInfo:function(c){var a=c.isWindow||c.isDocument?"":c.element.css("overflow-x"),h=c.isWindow||c.isDocument?"":c.element.css("overflow-y"),a="scroll"===a||"auto"===a&&c.width<c.element[0].scrollWidth;return{width:"scroll"===h||"auto"===h&&c.height<c.element[0].scrollHeight?d.position.scrollbarWidth():0,height:a?d.position.scrollbarWidth():0}},
getWithinInfo:function(c){c=d(c||window);var a=d.isWindow(c[0]),h=!!c[0]&&9===c[0].nodeType;return{element:c,isWindow:a,isDocument:h,offset:c.offset()||{left:0,top:0},scrollLeft:c.scrollLeft(),scrollTop:c.scrollTop(),width:a||h?c.width():c.outerWidth(),height:a||h?c.height():c.outerHeight()}}};d.fn.position=function(b){if(!b||!b.of)return E.apply(this,arguments);b=d.extend({},b);var a,q,A,g,l,p,y=d(b.of),C=d.position.getWithinInfo(b.within),H=d.position.getScrollInfo(C),L=(b.collision||"flip").split(" "),
U={};return p=h(y),y[0].preventDefault&&(b.at="left top"),q=p.width,A=p.height,g=p.offset,l=d.extend({},g),d.each(["my","at"],function(){var a,g,l=(b[this]||"").split(" ");1===l.length&&(l=k.test(l[0])?l.concat(["center"]):v.test(l[0])?["center"].concat(l):["center","center"]);l[0]=k.test(l[0])?l[0]:"center";l[1]=v.test(l[1])?l[1]:"center";a=r.exec(l[0]);g=r.exec(l[1]);U[this]=[a?a[0]:0,g?g[0]:0];b[this]=[n.exec(l[0])[0],n.exec(l[1])[0]]}),1===L.length&&(L[1]=L[0]),"right"===b.at[0]?l.left+=q:"center"===
b.at[0]&&(l.left+=q/2),"bottom"===b.at[1]?l.top+=A:"center"===b.at[1]&&(l.top+=A/2),a=c(U.at,q,A),l.left+=a[0],l.top+=a[1],this.each(function(){var p,h,R=d(this),M=R.outerWidth(),k=R.outerHeight(),v=parseInt(d.css(this,"marginLeft"),10)||0,P=parseInt(d.css(this,"marginTop"),10)||0,t=M+v+(parseInt(d.css(this,"marginRight"),10)||0)+H.width,n=k+P+(parseInt(d.css(this,"marginBottom"),10)||0)+H.height,r=d.extend({},l),w=c(U.my,R.outerWidth(),R.outerHeight());"right"===b.my[0]?r.left-=M:"center"===b.my[0]&&
(r.left-=M/2);"bottom"===b.my[1]?r.top-=k:"center"===b.my[1]&&(r.top-=k/2);r.left+=w[0];r.top+=w[1];f||(r.left=m(r.left),r.top=m(r.top));p={marginLeft:v,marginTop:P};d.each(["left","top"],function(g,l){d.dvUi.position[L[g]]&&d.dvUi.position[L[g]][l](r,{targetWidth:q,targetHeight:A,elemWidth:M,elemHeight:k,collisionPosition:p,collisionWidth:t,collisionHeight:n,offset:[a[0]+w[0],a[1]+w[1]],my:b.my,at:b.at,within:C,elem:R})});b.using&&(h=function(a){var l=g.left-r.left,c=l+q-M,p=g.top-r.top,d=p+A-k,
C={target:{element:y,left:g.left,top:g.top,width:q,height:A},element:{element:R,left:r.left,top:r.top,width:M,height:k},horizontal:0>c?"left":0<l?"right":"center",vertical:0>d?"top":0<p?"bottom":"middle"};M>q&&q>e(l+c)&&(C.horizontal="center");k>A&&A>e(p+d)&&(C.vertical="middle");C.important=z(e(l),e(c))>z(e(p),e(d))?"horizontal":"vertical";b.using.call(this,a,C)});R.offset(d.extend(r,{using:h}))})};d.dvUi.position={fit:{left:function(c,a){var d,h=a.within,g=h.isWindow?h.scrollLeft:h.offset.left,
h=h.width,l=c.left-a.collisionPosition.marginLeft,p=g-l,y=l+a.collisionWidth-h-g;a.collisionWidth>h?0<p&&0>=y?(d=c.left+p+a.collisionWidth-h-g,c.left+=p-d):c.left=0<y&&0>=p?g:p>y?g+h-a.collisionWidth:g:0<p?c.left+=p:0<y?c.left-=y:c.left=z(c.left-l,c.left)},top:function(c,a){var d,h=a.within,h=h.isWindow?h.scrollTop:h.offset.top,g=a.within.height,l=c.top-a.collisionPosition.marginTop,p=h-l,y=l+a.collisionHeight-g-h;a.collisionHeight>g?0<p&&0>=y?(d=c.top+p+a.collisionHeight-g-h,c.top+=p-d):c.top=0<
y&&0>=p?h:p>y?h+g-a.collisionHeight:h:0<p?c.top+=p:0<y?c.top-=y:c.top=z(c.top-l,c.top)}},flip:{left:function(c,a){var d,h,g=a.within,l=g.offset.left+g.scrollLeft,p=g.width,g=g.isWindow?g.scrollLeft:g.offset.left,y=c.left-a.collisionPosition.marginLeft,C=y-g,y=y+a.collisionWidth-p-g,b="left"===a.my[0]?-a.elemWidth:"right"===a.my[0]?a.elemWidth:0,q="left"===a.at[0]?a.targetWidth:"right"===a.at[0]?-a.targetWidth:0,f=-2*a.offset[0];0>C?(d=c.left+b+q+f+a.collisionWidth-p-l,(0>d||e(C)>d)&&(c.left+=b+q+
f)):0<y&&(h=c.left-a.collisionPosition.marginLeft+b+q+f-g,(0<h||y>e(h))&&(c.left+=b+q+f))},top:function(c,a){var d,h,g=a.within,l=g.offset.top+g.scrollTop,p=g.height,g=g.isWindow?g.scrollTop:g.offset.top,y=c.top-a.collisionPosition.marginTop,C=y-g,y=y+a.collisionHeight-p-g,b="top"===a.my[1]?-a.elemHeight:"bottom"===a.my[1]?a.elemHeight:0,q="top"===a.at[1]?a.targetHeight:"bottom"===a.at[1]?-a.targetHeight:0,f=-2*a.offset[1];0>C?(h=c.top+b+q+f+a.collisionHeight-p-l,c.top+b+q+f>C&&(0>h||e(C)>h)&&(c.top+=
b+q+f)):0<y&&(d=c.top-a.collisionPosition.marginTop+b+q+f-g,c.top+b+q+f>y&&(0<d||y>e(d))&&(c.top+=b+q+f))}},flipfit:{left:function(){d.dvUi.position.flip.left.apply(this,arguments);d.dvUi.position.fit.left.apply(this,arguments)},top:function(){d.dvUi.position.flip.top.apply(this,arguments);d.dvUi.position.fit.top.apply(this,arguments)}}};(function(){var c,a,h,b,g=document.getElementsByTagName("body")[0];h=document.createElement("div");c=document.createElement(g?"div":"body");a={visibility:"hidden",
width:0,height:0,border:0,margin:0,background:"none"};g&&d.extend(a,{position:"absolute",left:"-1000px",top:"-1000px"});for(b in a)c.style[b]=a[b];c.appendChild(h);a=g||document.documentElement;a.insertBefore(c,a.firstChild);h.style.cssText="position: absolute; left: 10.7432222px;";h=d(h).offset().left;f=10<h&&11>h;c.innerHTML="";a.removeChild(c)})()})();d.dvUi.position;d.widget("dvUi.draggable",d.dvUi.mouse,{version:"1.11.2",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,
connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"===this.options.helper&&this._setPositionRelative();this.options.addClasses&&this.element.addClass("dvUi-draggable");this.options.disabled&&this.element.addClass("dvUi-draggable-disabled");
this._setHandleClassName();this._mouseInit()},_setOption:function(c,d){this._super(c,d);"handle"===c&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){return(this.helper||this.element).is(".dvUi-draggable-dragging")?(this.destroyOnClear=!0,void 0):(this.element.removeClass("dvUi-draggable dvUi-draggable-dragging dvUi-draggable-disabled"),this._removeHandleClassName(),this._mouseDestroy(),void 0)},_mouseCapture:function(c){var h=this.options;return this._blurActiveElement(c),
this.helper||h.disabled||0<d(c.target).closest(".dvUi-resizable-handle").length?!1:(this.handle=this._getHandle(c),this.handle?(this._blockFrames(!0===h.iframeFix?"iframe":h.iframeFix),!0):!1)},_blockFrames:function(c){this.iframeBlocks=this.document.find(c).map(function(){var c=d(this);return d("<div>").css("position","absolute").appendTo(c.parent()).outerWidth(c.outerWidth()).outerHeight(c.outerHeight()).offset(c.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),
delete this.iframeBlocks)},_blurActiveElement:function(c){var h=this.document[0];if(this.handleElement.is(c.target))try{h.activeElement&&"body"!==h.activeElement.nodeName.toLowerCase()&&d(h.activeElement).blur()}catch(q){}},_mouseStart:function(c){var h=this.options;return this.helper=this._createHelper(c),this.helper.addClass("dvUi-draggable-dragging"),this._cacheHelperProportions(),d.dvUi.ddmanager&&(d.dvUi.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),
this.scrollParent=this.helper.scrollParent(!0),this.offsetParent=this.helper.offsetParent(),this.hasFixedAncestor=0<this.helper.parents().filter(function(){return"fixed"===d(this).css("position")}).length,this.positionAbs=this.element.offset(),this._refreshOffsets(c),this.originalPosition=this.position=this._generatePosition(c,!1),this.originalPageX=c.pageX,this.originalPageY=c.pageY,h.cursorAt&&this._adjustOffsetFromHelper(h.cursorAt),this._setContainment(),!1===this._trigger("start",c)?(this._clear(),
!1):(this._cacheHelperProportions(),d.dvUi.ddmanager&&!h.dropBehaviour&&d.dvUi.ddmanager.prepareOffsets(this,c),this._normalizeRightBottom(),this._mouseDrag(c,!0),d.dvUi.ddmanager&&d.dvUi.ddmanager.dragStart(this,c),!0)},_refreshOffsets:function(c){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:!1,parent:this._getParentOffset(),relative:this._getRelativeOffset()};this.offset.click={left:c.pageX-this.offset.left,top:c.pageY-this.offset.top}},
_mouseDrag:function(c,h){if(this.hasFixedAncestor&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(c,!0),this.positionAbs=this._convertPositionTo("absolute"),!h){var b=this._uiHash();if(!1===this._trigger("drag",c,b))return this._mouseUp({}),!1;this.position=b.position}return this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",d.dvUi.ddmanager&&d.dvUi.ddmanager.drag(this,c),!1},_mouseStop:function(c){var h=this,b=!1;return d.dvUi.ddmanager&&
!this.options.dropBehaviour&&(b=d.dvUi.ddmanager.drop(this,c)),this.dropped&&(b=this.dropped,this.dropped=!1),"invalid"===this.options.revert&&!b||"valid"===this.options.revert&&b||!0===this.options.revert||d.isFunction(this.options.revert)&&this.options.revert.call(this.element,b)?d(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){!1!==h._trigger("stop",c)&&h._clear()}):!1!==this._trigger("stop",c)&&this._clear(),!1},_mouseUp:function(c){return this._unblockFrames(),
d.dvUi.ddmanager&&d.dvUi.ddmanager.dragStop(this,c),this.handleElement.is(c.target)&&this.element.focus(),d.dvUi.mouse.prototype._mouseUp.call(this,c)},cancel:function(){return this.helper.is(".dvUi-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(c){return this.options.handle?!!d(c.target).closest(this.element.find(this.options.handle)).length:!0},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element;
this.handleElement.addClass("dvUi-draggable-handle")},_removeHandleClassName:function(){this.handleElement.removeClass("dvUi-draggable-handle")},_createHelper:function(c){var h=this.options,b=d.isFunction(h.helper);c=b?d(h.helper.apply(this.element[0],[c])):"clone"===h.helper?this.element.clone().removeAttr("id"):this.element;return c.parents("body").length||c.appendTo("parent"===h.appendTo?this.element[0].parentNode:h.appendTo),b&&c[0]===this.element[0]&&this._setPositionRelative(),c[0]===this.element[0]||
/(fixed|absolute)/.test(c.css("position"))||c.css("position","absolute"),c},_setPositionRelative:function(){/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative")},_adjustOffsetFromHelper:function(c){"string"==typeof c&&(c=c.split(" "));d.isArray(c)&&(c={left:+c[0],top:+c[1]||0});"left"in c&&(this.offset.click.left=c.left+this.margins.left);"right"in c&&(this.offset.click.left=this.helperProportions.width-c.right+this.margins.left);"top"in c&&(this.offset.click.top=
c.top+this.margins.top);"bottom"in c&&(this.offset.click.top=this.helperProportions.height-c.bottom+this.margins.top)},_isRootNode:function(c){return/(html|body)/i.test(c.tagName)||c===this.document[0]},_getParentOffset:function(){var c=this.offsetParent.offset(),h=this.document[0];return"absolute"===this.cssPosition&&this.scrollParent[0]!==h&&d.contains(this.scrollParent[0],this.offsetParent[0])&&(c.left+=this.scrollParent.scrollLeft(),c.top+=this.scrollParent.scrollTop()),this._isRootNode(this.offsetParent[0])&&
(c={top:0,left:0}),{top:c.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:c.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return{top:0,left:0};var c=this.element.position(),d=this._isRootNode(this.scrollParent[0]);return{top:c.top-(parseInt(this.helper.css("top"),10)||0)+(d?0:this.scrollParent.scrollTop()),left:c.left-(parseInt(this.helper.css("left"),10)||0)+(d?0:this.scrollParent.scrollLeft())}},
_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var c,h,b,f=this.options,z=this.document[0];return this.relativeContainer=null,f.containment?"window"===
f.containment?(this.containment=[d(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,d(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,d(window).scrollLeft()+d(window).width()-this.helperProportions.width-this.margins.left,d(window).scrollTop()+(d(window).height()||z.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top],void 0):"document"===f.containment?(this.containment=[0,0,d(z).width()-this.helperProportions.width-this.margins.left,
(d(z).height()||z.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top],void 0):f.containment.constructor===Array?(this.containment=f.containment,void 0):("parent"===f.containment&&(f.containment=this.helper[0].parentNode),h=d(f.containment),b=h[0],b&&(c=/(scroll|auto)/.test(h.css("overflow")),this.containment=[(parseInt(h.css("borderLeftWidth"),10)||0)+(parseInt(h.css("paddingLeft"),10)||0),(parseInt(h.css("borderTopWidth"),10)||0)+(parseInt(h.css("paddingTop"),10)||0),(c?
Math.max(b.scrollWidth,b.offsetWidth):b.offsetWidth)-(parseInt(h.css("borderRightWidth"),10)||0)-(parseInt(h.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(c?Math.max(b.scrollHeight,b.offsetHeight):b.offsetHeight)-(parseInt(h.css("borderBottomWidth"),10)||0)-(parseInt(h.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relativeContainer=h),void 0):(this.containment=null,void 0)},_convertPositionTo:function(c,
d){d||(d=this.position);var h="absolute"===c?1:-1,b=this._isRootNode(this.scrollParent[0]);return{top:d.top+this.offset.relative.top*h+this.offset.parent.top*h-("fixed"===this.cssPosition?-this.offset.scroll.top:b?0:this.offset.scroll.top)*h,left:d.left+this.offset.relative.left*h+this.offset.parent.left*h-("fixed"===this.cssPosition?-this.offset.scroll.left:b?0:this.offset.scroll.left)*h}},_generatePosition:function(c,d){var h,b,f,e,m=this.options,k=this._isRootNode(this.scrollParent[0]),v=c.pageX,
r=c.pageY;return k&&this.offset.scroll||(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}),d&&(this.containment&&(this.relativeContainer?(b=this.relativeContainer.offset(),h=[this.containment[0]+b.left,this.containment[1]+b.top,this.containment[2]+b.left,this.containment[3]+b.top]):h=this.containment,c.pageX-this.offset.click.left<h[0]&&(v=h[0]+this.offset.click.left),c.pageY-this.offset.click.top<h[1]&&(r=h[1]+this.offset.click.top),c.pageX-this.offset.click.left>
h[2]&&(v=h[2]+this.offset.click.left),c.pageY-this.offset.click.top>h[3]&&(r=h[3]+this.offset.click.top)),m.grid&&(f=m.grid[1]?this.originalPageY+Math.round((r-this.originalPageY)/m.grid[1])*m.grid[1]:this.originalPageY,r=h?f-this.offset.click.top>=h[1]||f-this.offset.click.top>h[3]?f:f-this.offset.click.top>=h[1]?f-m.grid[1]:f+m.grid[1]:f,e=m.grid[0]?this.originalPageX+Math.round((v-this.originalPageX)/m.grid[0])*m.grid[0]:this.originalPageX,v=h?e-this.offset.click.left>=h[0]||e-this.offset.click.left>
h[2]?e:e-this.offset.click.left>=h[0]?e-m.grid[0]:e+m.grid[0]:e),"y"===m.axis&&(v=this.originalPageX),"x"===m.axis&&(r=this.originalPageY)),{top:r-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.offset.scroll.top:k?0:this.offset.scroll.top),left:v-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.offset.scroll.left:k?0:this.offset.scroll.left)}},_clear:function(){this.helper.removeClass("dvUi-draggable-dragging");
this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove();this.helper=null;this.cancelHelperRemoval=!1;this.destroyOnClear&&this.destroy()},_normalizeRightBottom:function(){"y"!==this.options.axis&&"auto"!==this.helper.css("right")&&(this.helper.width(this.helper.width()),this.helper.css("right","auto"));"x"!==this.options.axis&&"auto"!==this.helper.css("bottom")&&(this.helper.height(this.helper.height()),this.helper.css("bottom","auto"))},_trigger:function(c,h,b){return b=
b||this._uiHash(),d.dvUi.plugin.call(this,c,[h,b,this],!0),/^(drag|start|stop)/.test(c)&&(this.positionAbs=this._convertPositionTo("absolute"),b.offset=this.positionAbs),d.Widget.prototype._trigger.call(this,c,h,b)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}});d.dvUi.plugin.add("draggable","connectToSortable",{start:function(c,h,b){var q=d.extend({},h,{item:b.element});b.sortables=[];d(b.options.connectToSortable).each(function(){var h=
d(this).sortable("instance");h&&!h.options.disabled&&(b.sortables.push(h),h.refreshPositions(),h._trigger("activate",c,q))})},stop:function(c,h,b){var q=d.extend({},h,{item:b.element});b.cancelHelperRemoval=!1;d.each(b.sortables,function(){this.isOver?(this.isOver=0,b.cancelHelperRemoval=!0,this.cancelHelperRemoval=!1,this._storedCSS={position:this.placeholder.css("position"),top:this.placeholder.css("top"),left:this.placeholder.css("left")},this._mouseStop(c),this.options.helper=this.options._helper):
(this.cancelHelperRemoval=!0,this._trigger("deactivate",c,q))})},drag:function(c,h,b){d.each(b.sortables,function(){var q=!1,f=this;f.positionAbs=b.positionAbs;f.helperProportions=b.helperProportions;f.offset.click=b.offset.click;f._intersectsWith(f.containerCache)&&(q=!0,d.each(b.sortables,function(){return this.positionAbs=b.positionAbs,this.helperProportions=b.helperProportions,this.offset.click=b.offset.click,this!==f&&this._intersectsWith(this.containerCache)&&d.contains(f.element[0],this.element[0])&&
(q=!1),q}));q?(f.isOver||(f.isOver=1,f.currentItem=h.helper.appendTo(f.element).data("dvUi-sortable-item",!0),f.options._helper=f.options.helper,f.options.helper=function(){return h.helper[0]},c.target=f.currentItem[0],f._mouseCapture(c,!0),f._mouseStart(c,!0,!0),f.offset.click.top=b.offset.click.top,f.offset.click.left=b.offset.click.left,f.offset.parent.left-=b.offset.parent.left-f.offset.parent.left,f.offset.parent.top-=b.offset.parent.top-f.offset.parent.top,b._trigger("toSortable",c),b.dropped=
f.element,d.each(b.sortables,function(){this.refreshPositions()}),b.currentItem=b.element,f.fromOutside=b),f.currentItem&&(f._mouseDrag(c),h.position=f.position)):f.isOver&&(f.isOver=0,f.cancelHelperRemoval=!0,f.options._revert=f.options.revert,f.options.revert=!1,f._trigger("out",c,f._uiHash(f)),f._mouseStop(c,!0),f.options.revert=f.options._revert,f.options.helper=f.options._helper,f.placeholder&&f.placeholder.remove(),b._refreshOffsets(c),h.position=b._generatePosition(c,!0),b._trigger("fromSortable",
c),b.dropped=!1,d.each(b.sortables,function(){this.refreshPositions()}))})}});d.dvUi.plugin.add("draggable","cursor",{start:function(c,h,b){c=d("body");b=b.options;c.css("cursor")&&(b._cursor=c.css("cursor"));c.css("cursor",b.cursor)},stop:function(c,h,b){c=b.options;c._cursor&&d("body").css("cursor",c._cursor)}});d.dvUi.plugin.add("draggable","opacity",{start:function(c,h,b){c=d(h.helper);b=b.options;c.css("opacity")&&(b._opacity=c.css("opacity"));c.css("opacity",b.opacity)},stop:function(c,h,b){c=
b.options;c._opacity&&d(h.helper).css("opacity",c._opacity)}});d.dvUi.plugin.add("draggable","scroll",{start:function(c,d,b){b.scrollParentNotHidden||(b.scrollParentNotHidden=b.helper.scrollParent(!1));b.scrollParentNotHidden[0]!==b.document[0]&&"HTML"!==b.scrollParentNotHidden[0].tagName&&(b.overflowOffset=b.scrollParentNotHidden.offset())},drag:function(c,h,b){h=b.options;var f=!1,q=b.scrollParentNotHidden[0],e=b.document[0];q!==e&&"HTML"!==q.tagName?(h.axis&&"x"===h.axis||(b.overflowOffset.top+
q.offsetHeight-c.pageY<h.scrollSensitivity?q.scrollTop=f=q.scrollTop+h.scrollSpeed:c.pageY-b.overflowOffset.top<h.scrollSensitivity&&(q.scrollTop=f=q.scrollTop-h.scrollSpeed)),h.axis&&"y"===h.axis||(b.overflowOffset.left+q.offsetWidth-c.pageX<h.scrollSensitivity?q.scrollLeft=f=q.scrollLeft+h.scrollSpeed:c.pageX-b.overflowOffset.left<h.scrollSensitivity&&(q.scrollLeft=f=q.scrollLeft-h.scrollSpeed))):(h.axis&&"x"===h.axis||(c.pageY-d(e).scrollTop()<h.scrollSensitivity?f=d(e).scrollTop(d(e).scrollTop()-
h.scrollSpeed):d(window).height()-(c.pageY-d(e).scrollTop())<h.scrollSensitivity&&(f=d(e).scrollTop(d(e).scrollTop()+h.scrollSpeed))),h.axis&&"y"===h.axis||(c.pageX-d(e).scrollLeft()<h.scrollSensitivity?f=d(e).scrollLeft(d(e).scrollLeft()-h.scrollSpeed):d(window).width()-(c.pageX-d(e).scrollLeft())<h.scrollSensitivity&&(f=d(e).scrollLeft(d(e).scrollLeft()+h.scrollSpeed))));!1!==f&&d.dvUi.ddmanager&&!h.dropBehaviour&&d.dvUi.ddmanager.prepareOffsets(b,c)}});d.dvUi.plugin.add("draggable","snap",{start:function(c,
h,b){c=b.options;b.snapElements=[];d(c.snap.constructor!==String?c.snap.items||":data(dvUi-draggable)":c.snap).each(function(){var c=d(this),h=c.offset();this!==b.element[0]&&b.snapElements.push({item:this,width:c.outerWidth(),height:c.outerHeight(),top:h.top,left:h.left})})},drag:function(c,h,b){var f,q,e,m,k,v,r,n,x,E,O=b.options,a=O.snapTolerance,F=h.offset.left,G=F+b.helperProportions.width,g=h.offset.top,l=g+b.helperProportions.height;for(x=b.snapElements.length-1;0<=x;x--)k=b.snapElements[x].left-
b.margins.left,v=k+b.snapElements[x].width,r=b.snapElements[x].top-b.margins.top,n=r+b.snapElements[x].height,k-a>G||F>v+a||r-a>l||g>n+a||!d.contains(b.snapElements[x].item.ownerDocument,b.snapElements[x].item)?(b.snapElements[x].snapping&&b.options.snap.release&&b.options.snap.release.call(b.element,c,d.extend(b._uiHash(),{snapItem:b.snapElements[x].item})),b.snapElements[x].snapping=!1):("inner"!==O.snapMode&&(f=a>=Math.abs(r-l),q=a>=Math.abs(n-g),e=a>=Math.abs(k-G),m=a>=Math.abs(v-F),f&&(h.position.top=
b._convertPositionTo("relative",{top:r-b.helperProportions.height,left:0}).top),q&&(h.position.top=b._convertPositionTo("relative",{top:n,left:0}).top),e&&(h.position.left=b._convertPositionTo("relative",{top:0,left:k-b.helperProportions.width}).left),m&&(h.position.left=b._convertPositionTo("relative",{top:0,left:v}).left)),E=f||q||e||m,"outer"!==O.snapMode&&(f=a>=Math.abs(r-g),q=a>=Math.abs(n-l),e=a>=Math.abs(k-F),m=a>=Math.abs(v-G),f&&(h.position.top=b._convertPositionTo("relative",{top:r,left:0}).top),
q&&(h.position.top=b._convertPositionTo("relative",{top:n-b.helperProportions.height,left:0}).top),e&&(h.position.left=b._convertPositionTo("relative",{top:0,left:k}).left),m&&(h.position.left=b._convertPositionTo("relative",{top:0,left:v-b.helperProportions.width}).left)),!b.snapElements[x].snapping&&(f||q||e||m||E)&&b.options.snap.snap&&b.options.snap.snap.call(b.element,c,d.extend(b._uiHash(),{snapItem:b.snapElements[x].item})),b.snapElements[x].snapping=f||q||e||m||E)}});d.dvUi.plugin.add("draggable",
"stack",{start:function(c,b,f){var h;c=d.makeArray(d(f.options.stack)).sort(function(c,b){return(parseInt(d(c).css("zIndex"),10)||0)-(parseInt(d(b).css("zIndex"),10)||0)});c.length&&(h=parseInt(d(c[0]).css("zIndex"),10)||0,d(c).each(function(c){d(this).css("zIndex",h+c)}),this.css("zIndex",h+c.length))}});d.dvUi.plugin.add("draggable","zIndex",{start:function(c,b,f){c=d(b.helper);f=f.options;c.css("zIndex")&&(f._zIndex=c.css("zIndex"));c.css("zIndex",f.zIndex)},stop:function(c,b,f){c=f.options;c._zIndex&&
d(b.helper).css("zIndex",c._zIndex)}});d.dvUi.draggable;d.widget("dvUi.droppable",{version:"1.11.2",widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var c,b=this.options,f=b.accept;this.isover=!1;this.isout=!0;this.accept=d.isFunction(f)?f:function(c){return c.is(f)};this.proportions=function(){return arguments.length?(c=arguments[0],
void 0):c?c:c={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight}};this._addToManager(b.scope);b.addClasses&&this.element.addClass("dvUi-droppable")},_addToManager:function(c){d.dvUi.ddmanager.droppables[c]=d.dvUi.ddmanager.droppables[c]||[];d.dvUi.ddmanager.droppables[c].push(this)},_splice:function(c){for(var d=0;c.length>d;d++)c[d]===this&&c.splice(d,1)},_destroy:function(){this._splice(d.dvUi.ddmanager.droppables[this.options.scope]);this.element.removeClass("dvUi-droppable dvUi-droppable-disabled")},
_setOption:function(c,b){"accept"===c?this.accept=d.isFunction(b)?b:function(c){return c.is(b)}:"scope"===c&&(this._splice(d.dvUi.ddmanager.droppables[this.options.scope]),this._addToManager(b));this._super(c,b)},_activate:function(c){var b=d.dvUi.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass);b&&this._trigger("activate",c,this.ui(b))},_deactivate:function(c){var b=d.dvUi.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass);
b&&this._trigger("deactivate",c,this.ui(b))},_over:function(c){var b=d.dvUi.ddmanager.current;b&&(b.currentItem||b.element)[0]!==this.element[0]&&this.accept.call(this.element[0],b.currentItem||b.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",c,this.ui(b)))},_out:function(c){var b=d.dvUi.ddmanager.current;b&&(b.currentItem||b.element)[0]!==this.element[0]&&this.accept.call(this.element[0],b.currentItem||b.element)&&(this.options.hoverClass&&
this.element.removeClass(this.options.hoverClass),this._trigger("out",c,this.ui(b)))},_drop:function(c,b){var h=b||d.dvUi.ddmanager.current,f=!1;return h&&(h.currentItem||h.element)[0]!==this.element[0]?(this.element.find(":data(dvUi-droppable)").not(".dvUi-draggable-dragging").each(function(){var b=d(this).droppable("instance");return b.options.greedy&&!b.options.disabled&&b.options.scope===h.options.scope&&b.accept.call(b.element[0],h.currentItem||h.element)&&d.dvUi.intersect(h,d.extend(b,{offset:b.element.offset()}),
b.options.tolerance,c)?(f=!0,!1):void 0}),f?!1:this.accept.call(this.element[0],h.currentItem||h.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",c,this.ui(h)),this.element):!1):!1},ui:function(c){return{draggable:c.currentItem||c.element,helper:c.helper,position:c.position,offset:c.positionAbs}}});d.dvUi.intersect=function(){return function(c,d,b,f){if(!d.offset)return!1;
var h=(c.positionAbs||c.position.absolute).left+c.margins.left,q=(c.positionAbs||c.position.absolute).top+c.margins.top,e=h+c.helperProportions.width,m=q+c.helperProportions.height,A=d.offset.left,k=d.offset.top,n=A+d.proportions().width,x=k+d.proportions().height;switch(b){case "fit":return h>=A&&n>=e&&q>=k&&x>=m;case "intersect":return h+c.helperProportions.width/2>A&&n>e-c.helperProportions.width/2&&q+c.helperProportions.height/2>k&&x>m-c.helperProportions.height/2;case "pointer":c=f.pageY;b=d.proportions().height;
if(k=c>=k&&k+b>c)f=f.pageX,d=d.proportions().width,k=f>=A&&A+d>f;return k;case "touch":return(q>=k&&x>=q||m>=k&&x>=m||k>q&&m>x)&&(h>=A&&n>=h||e>=A&&n>=e||A>h&&e>n);default:return!1}}}();d.dvUi.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(c,b){var h,f,e=d.dvUi.ddmanager.droppables[c.options.scope]||[],m=b?b.type:null,k=(c.currentItem||c.element).find(":data(dvUi-droppable)").addBack();h=0;a:for(;e.length>h;h++)if(!(e[h].options.disabled||c&&!e[h].accept.call(e[h].element[0],
c.currentItem||c.element))){for(f=0;k.length>f;f++)if(k[f]===e[h].element[0]){e[h].proportions().height=0;continue a}e[h].visible="none"!==e[h].element.css("display");e[h].visible&&("mousedown"===m&&e[h]._activate.call(e[h],b),e[h].offset=e[h].element.offset(),e[h].proportions({width:e[h].element[0].offsetWidth,height:e[h].element[0].offsetHeight}))}},drop:function(c,b){var h=!1;return d.each((d.dvUi.ddmanager.droppables[c.options.scope]||[]).slice(),function(){this.options&&(!this.options.disabled&&
this.visible&&d.dvUi.intersect(c,this,this.options.tolerance,b)&&(h=this._drop.call(this,b)||h),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],c.currentItem||c.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,b)))}),h},dragStart:function(c,b){c.element.parentsUntil("body").bind("scroll.droppable",function(){c.options.refreshPositions||d.dvUi.ddmanager.prepareOffsets(c,b)})},drag:function(c,b){c.options.refreshPositions&&d.dvUi.ddmanager.prepareOffsets(c,b);
d.each(d.dvUi.ddmanager.droppables[c.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var h,f,e,m=d.dvUi.intersect(c,this,this.options.tolerance,b);(m=!m&&this.isover?"isout":m&&!this.isover?"isover":null)&&(this.options.greedy&&(f=this.options.scope,e=this.element.parents(":data(dvUi-droppable)").filter(function(){return d(this).droppable("instance").options.scope===f}),e.length&&(h=d(e[0]).droppable("instance"),h.greedyChild="isover"===m)),h&&"isover"===
m&&(h.isover=!1,h.isout=!0,h._out.call(h,b)),this[m]=!0,this["isout"===m?"isover":"isout"]=!1,this["isover"===m?"_over":"_out"].call(this,b),h&&"isout"===m&&(h.isout=!1,h.isover=!0,h._over.call(h,b)))}})},dragStop:function(c,b){c.element.parentsUntil("body").unbind("scroll.droppable");c.options.refreshPositions||d.dvUi.ddmanager.prepareOffsets(c,b)}};d.dvUi.droppable;d.widget("dvUi.resizable",d.dvUi.mouse,{version:"1.11.2",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",
animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_num:function(c){return parseInt(c,10)||0},_isNumber:function(c){return!isNaN(parseInt(c,10))},_hasScroll:function(c,b){if("hidden"===d(c).css("overflow"))return!1;var h=b&&"left"===b?"scrollLeft":"scrollTop",f=!1;return 0<c[h]?!0:(c[h]=1,f=0<c[h],c[h]=0,f)},_create:function(){var c,b,f,e,m,k=this,
n=this.options;if(this.element.addClass("dvUi-resizable"),d.extend(this,{_aspectRatio:!!n.aspectRatio,aspectRatio:n.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:n.helper||n.ghost||n.animate?n.helper||"dvUi-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(d("<div class='dvUi-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),
height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("dvUi-resizable",this.element.resizable("instance")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,
marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=n.handles||(d(".dvUi-resizable-handle",this.element).length?{n:".dvUi-resizable-n",e:".dvUi-resizable-e",s:".dvUi-resizable-s",w:".dvUi-resizable-w",se:".dvUi-resizable-se",
sw:".dvUi-resizable-sw",ne:".dvUi-resizable-ne",nw:".dvUi-resizable-nw"}:"e,s,se"),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),c=this.handles.split(","),this.handles={},b=0;c.length>b;b++)f=d.trim(c[b]),m="dvUi-resizable-"+f,e=d("<div class='dvUi-resizable-handle "+m+"'></div>"),e.css({zIndex:n.zIndex}),"se"===f&&e.addClass("dvUi-icon dvUi-icon-gripsmall-diagonal-se"),this.handles[f]=".dvUi-resizable-"+f,this.element.append(e);this._renderAxis=
function(c){var b,h,f,q;c=c||this.element;for(b in this.handles)this.handles[b].constructor===String&&(this.handles[b]=this.element.children(this.handles[b]).first().show()),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)&&(h=d(this.handles[b],this.element),q=/sw|ne|nw|se|n|s/.test(b)?h.outerHeight():h.outerWidth(),f=["padding",/ne|nw|n/.test(b)?"Top":/se|sw|s/.test(b)?"Bottom":/^e$/.test(b)?"Right":"Left"].join(""),c.css(f,q),this._proportionallyResize()),
d(this.handles[b]).length};this._renderAxis(this.element);this._handles=d(".dvUi-resizable-handle",this.element).disableSelection();this._handles.mouseover(function(){k.resizing||(this.className&&(e=this.className.match(/dvUi-resizable-(se|sw|ne|nw|n|e|s|w)/i)),k.axis=e&&e[1]?e[1]:"se")});n.autoHide&&(this._handles.hide(),d(this.element).addClass("dvUi-resizable-autohide").mouseenter(function(){n.disabled||(d(this).removeClass("dvUi-resizable-autohide"),k._handles.show())}).mouseleave(function(){n.disabled||
k.resizing||(d(this).addClass("dvUi-resizable-autohide"),k._handles.hide())}));this._mouseInit()},_destroy:function(){this._mouseDestroy();var c,b=function(c){d(c).removeClass("dvUi-resizable dvUi-resizable-disabled dvUi-resizable-resizing").removeData("resizable").removeData("dvUi-resizable").unbind(".resizable").find(".dvUi-resizable-handle").remove()};return this.elementIsWrapper&&(b(this.element),c=this.element,this.originalElement.css({position:c.css("position"),width:c.outerWidth(),height:c.outerHeight(),
top:c.css("top"),left:c.css("left")}).insertAfter(c),c.remove()),this.originalElement.css("resize",this.originalResizeStyle),b(this.originalElement),this},_mouseCapture:function(c){var b,f,e=!1;for(b in this.handles)f=d(this.handles[b])[0],(f===c.target||d.contains(f,c.target))&&(e=!0);return!this.options.disabled&&e},_mouseStart:function(c){var b,f,e,m=this.options,k=this.element;return this.resizing=!0,this._renderProxy(),b=this._num(this.helper.css("left")),f=this._num(this.helper.css("top")),
m.containment&&(b+=d(m.containment).scrollLeft()||0,f+=d(m.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:b,top:f},this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:k.width(),height:k.height()},this.originalSize=this._helper?{width:k.outerWidth(),height:k.outerHeight()}:{width:k.width(),height:k.height()},this.sizeDiff={width:k.outerWidth()-k.width(),height:k.outerHeight()-k.height()},this.originalPosition={left:b,top:f},this.originalMousePosition=
{left:c.pageX,top:c.pageY},this.aspectRatio="number"==typeof m.aspectRatio?m.aspectRatio:this.originalSize.width/this.originalSize.height||1,e=d(".dvUi-resizable-"+this.axis).css("cursor"),d("body").css("cursor","auto"===e?this.axis+"-resize":e),k.addClass("dvUi-resizable-resizing"),this._propagate("start",c),!0},_mouseDrag:function(c){var b,f,e=this.originalMousePosition,m=c.pageX-e.left||0,e=c.pageY-e.top||0,k=this._change[this.axis];return this._updatePrevProperties(),k?(b=k.apply(this,[c,m,e]),
this._updateVirtualBoundaries(c.shiftKey),(this._aspectRatio||c.shiftKey)&&(b=this._updateRatio(b,c)),b=this._respectSize(b,c),this._updateCache(b),this._propagate("resize",c),f=this._applyChanges(),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),d.isEmptyObject(f)||(this._updatePrevProperties(),this._trigger("resize",c,this.ui()),this._applyChanges()),!1):!1},_mouseStop:function(c){this.resizing=!1;var b,f,e,m,k,n,t,v=this.options;return this._helper&&(b=this._proportionallyResizeElements,
f=b.length&&/textarea/i.test(b[0].nodeName),e=f&&this._hasScroll(b[0],"left")?0:this.sizeDiff.height,m=f?0:this.sizeDiff.width,k={width:this.helper.width()-m,height:this.helper.height()-e},n=parseInt(this.element.css("left"),10)+(this.position.left-this.originalPosition.left)||null,t=parseInt(this.element.css("top"),10)+(this.position.top-this.originalPosition.top)||null,v.animate||this.element.css(d.extend(k,{top:t,left:n})),this.helper.height(this.size.height),this.helper.width(this.size.width),
this._helper&&!v.animate&&this._proportionallyResize()),d("body").css("cursor","auto"),this.element.removeClass("dvUi-resizable-resizing"),this._propagate("stop",c),this._helper&&this.helper.remove(),!1},_updatePrevProperties:function(){this.prevPosition={top:this.position.top,left:this.position.left};this.prevSize={width:this.size.width,height:this.size.height}},_applyChanges:function(){var c={};return this.position.top!==this.prevPosition.top&&(c.top=this.position.top+"px"),this.position.left!==
this.prevPosition.left&&(c.left=this.position.left+"px"),this.size.width!==this.prevSize.width&&(c.width=this.size.width+"px"),this.size.height!==this.prevSize.height&&(c.height=this.size.height+"px"),this.helper.css(c),c},_updateVirtualBoundaries:function(c){var d,b,f,e,m;m=this.options;m={minWidth:this._isNumber(m.minWidth)?m.minWidth:0,maxWidth:this._isNumber(m.maxWidth)?m.maxWidth:1/0,minHeight:this._isNumber(m.minHeight)?m.minHeight:0,maxHeight:this._isNumber(m.maxHeight)?m.maxHeight:1/0};(this._aspectRatio||
c)&&(d=m.minHeight*this.aspectRatio,f=m.minWidth/this.aspectRatio,b=m.maxHeight*this.aspectRatio,e=m.maxWidth/this.aspectRatio,d>m.minWidth&&(m.minWidth=d),f>m.minHeight&&(m.minHeight=f),m.maxWidth>b&&(m.maxWidth=b),m.maxHeight>e&&(m.maxHeight=e));this._vBoundaries=m},_updateCache:function(c){this.offset=this.helper.offset();this._isNumber(c.left)&&(this.position.left=c.left);this._isNumber(c.top)&&(this.position.top=c.top);this._isNumber(c.height)&&(this.size.height=c.height);this._isNumber(c.width)&&
(this.size.width=c.width)},_updateRatio:function(c){var d=this.position,b=this.size,f=this.axis;return this._isNumber(c.height)?c.width=c.height*this.aspectRatio:this._isNumber(c.width)&&(c.height=c.width/this.aspectRatio),"sw"===f&&(c.left=d.left+(b.width-c.width),c.top=null),"nw"===f&&(c.top=d.top+(b.height-c.height),c.left=d.left+(b.width-c.width)),c},_respectSize:function(c){var d=this._vBoundaries,b=this.axis,f=this._isNumber(c.width)&&d.maxWidth&&d.maxWidth<c.width,e=this._isNumber(c.height)&&
d.maxHeight&&d.maxHeight<c.height,m=this._isNumber(c.width)&&d.minWidth&&d.minWidth>c.width,k=this._isNumber(c.height)&&d.minHeight&&d.minHeight>c.height,n=this.originalPosition.left+this.originalSize.width,v=this.position.top+this.size.height,r=/sw|nw|w/.test(b),b=/nw|ne|n/.test(b);return m&&(c.width=d.minWidth),k&&(c.height=d.minHeight),f&&(c.width=d.maxWidth),e&&(c.height=d.maxHeight),m&&r&&(c.left=n-d.minWidth),f&&r&&(c.left=n-d.maxWidth),k&&b&&(c.top=v-d.minHeight),e&&b&&(c.top=v-d.maxHeight),
c.width||c.height||c.left||!c.top?c.width||c.height||c.top||!c.left||(c.left=null):c.top=null,c},_getPaddingPlusBorderDimensions:function(c){var d=0,b=[],f=[c.css("borderTopWidth"),c.css("borderRightWidth"),c.css("borderBottomWidth"),c.css("borderLeftWidth")];for(c=[c.css("paddingTop"),c.css("paddingRight"),c.css("paddingBottom"),c.css("paddingLeft")];4>d;d++)b[d]=parseInt(f[d],10)||0,b[d]+=parseInt(c[d],10)||0;return{height:b[0]+b[2],width:b[1]+b[3]}},_proportionallyResize:function(){if(this._proportionallyResizeElements.length)for(var c,
d=0,b=this.helper||this.element;this._proportionallyResizeElements.length>d;d++)c=this._proportionallyResizeElements[d],this.outerDimensions||(this.outerDimensions=this._getPaddingPlusBorderDimensions(c)),c.css({height:b.height()-this.outerDimensions.height||0,width:b.width()-this.outerDimensions.width||0})},_renderProxy:function(){var c=this.options;this.elementOffset=this.element.offset();this._helper?(this.helper=this.helper||d("<div style='overflow:hidden;'></div>"),this.helper.addClass(this._helper).css({width:this.element.outerWidth()-
1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++c.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(c,d){return{width:this.originalSize.width+d}},w:function(c,d){return{left:this.originalPosition.left+d,width:this.originalSize.width-d}},n:function(c,d,b){return{top:this.originalPosition.top+b,height:this.originalSize.height-b}},s:function(c,d,b){return{height:this.originalSize.height+
b}},se:function(c,b,f){return d.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[c,b,f]))},sw:function(c,b,f){return d.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[c,b,f]))},ne:function(c,b,f){return d.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[c,b,f]))},nw:function(c,b,f){return d.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[c,b,f]))}},_propagate:function(c,b){d.dvUi.plugin.call(this,c,[b,this.ui()]);
"resize"!==c&&this._trigger(c,b,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}});d.dvUi.plugin.add("resizable","animate",{stop:function(c){var b=d(this).resizable("instance"),f=b.options,e=b._proportionallyResizeElements,m=e.length&&/textarea/i.test(e[0].nodeName),k=m&&b._hasScroll(e[0],"left")?0:b.sizeDiff.height,m=
{width:b.size.width-(m?0:b.sizeDiff.width),height:b.size.height-k},k=parseInt(b.element.css("left"),10)+(b.position.left-b.originalPosition.left)||null,n=parseInt(b.element.css("top"),10)+(b.position.top-b.originalPosition.top)||null;b.element.animate(d.extend(m,n&&k?{top:n,left:k}:{}),{duration:f.animateDuration,easing:f.animateEasing,step:function(){var h={width:parseInt(b.element.css("width"),10),height:parseInt(b.element.css("height"),10),top:parseInt(b.element.css("top"),10),left:parseInt(b.element.css("left"),
10)};e&&e.length&&d(e[0]).css({width:h.width,height:h.height});b._updateCache(h);b._propagate("resize",c)}})}});d.dvUi.plugin.add("resizable","containment",{start:function(){var c,b,f,e,m,k,n,t=d(this).resizable("instance"),v=t.element,r=t.options.containment;(v=r instanceof d?r.get(0):/parent/.test(r)?v.parent().get(0):r)&&(t.containerElement=d(v),/document/.test(r)||r===document?(t.containerOffset={left:0,top:0},t.containerPosition={left:0,top:0},t.parentData={element:d(document),left:0,top:0,width:d(document).width(),
height:d(document).height()||document.body.parentNode.scrollHeight}):(c=d(v),b=[],d(["Top","Right","Left","Bottom"]).each(function(d,h){b[d]=t._num(c.css("padding"+h))}),t.containerOffset=c.offset(),t.containerPosition=c.position(),t.containerSize={height:c.innerHeight()-b[3],width:c.innerWidth()-b[1]},f=t.containerOffset,e=t.containerSize.height,m=t.containerSize.width,k=t._hasScroll(v,"left")?v.scrollWidth:m,n=t._hasScroll(v)?v.scrollHeight:e,t.parentData={element:v,left:f.left,top:f.top,width:k,
height:n}))},resize:function(c){var b,f,e,m=d(this).resizable("instance");b=m.options;f=m.containerOffset;e=m.position;c=m._aspectRatio||c.shiftKey;var k={top:0,left:0},n=m.containerElement,t=!0;n[0]!==document&&/static/.test(n.css("position"))&&(k=f);e.left<(m._helper?f.left:0)&&(m.size.width+=m._helper?m.position.left-f.left:m.position.left-k.left,c&&(m.size.height=m.size.width/m.aspectRatio,t=!1),m.position.left=b.helper?f.left:0);e.top<(m._helper?f.top:0)&&(m.size.height+=m._helper?m.position.top-
f.top:m.position.top,c&&(m.size.width=m.size.height*m.aspectRatio,t=!1),m.position.top=m._helper?f.top:0);b=m.containerElement.get(0)===m.element.parent().get(0);e=/relative|absolute/.test(m.containerElement.css("position"));b&&e?(m.offset.left=m.parentData.left+m.position.left,m.offset.top=m.parentData.top+m.position.top):(m.offset.left=m.element.offset().left,m.offset.top=m.element.offset().top);b=Math.abs(m.sizeDiff.width+(m._helper?m.offset.left-k.left:m.offset.left-f.left));f=Math.abs(m.sizeDiff.height+
(m._helper?m.offset.top-k.top:m.offset.top-f.top));b+m.size.width>=m.parentData.width&&(m.size.width=m.parentData.width-b,c&&(m.size.height=m.size.width/m.aspectRatio,t=!1));f+m.size.height>=m.parentData.height&&(m.size.height=m.parentData.height-f,c&&(m.size.width=m.size.height*m.aspectRatio,t=!1));t||(m.position.left=m.prevPosition.left,m.position.top=m.prevPosition.top,m.size.width=m.prevSize.width,m.size.height=m.prevSize.height)},stop:function(){var c=d(this).resizable("instance"),b=c.options,
f=c.containerOffset,e=c.containerPosition,m=c.containerElement,k=d(c.helper),n=k.offset(),t=k.outerWidth()-c.sizeDiff.width,k=k.outerHeight()-c.sizeDiff.height;c._helper&&!b.animate&&/relative/.test(m.css("position"))&&d(this).css({left:n.left-e.left-f.left,width:t,height:k});c._helper&&!b.animate&&/static/.test(m.css("position"))&&d(this).css({left:n.left-e.left-f.left,width:t,height:k})}});d.dvUi.plugin.add("resizable","alsoResize",{start:function(){var c=d(this).resizable("instance").options,b=
function(c){d(c).each(function(){var c=d(this);c.data("dvUi-resizable-alsoresize",{width:parseInt(c.width(),10),height:parseInt(c.height(),10),left:parseInt(c.css("left"),10),top:parseInt(c.css("top"),10)})})};"object"!=typeof c.alsoResize||c.alsoResize.parentNode?b(c.alsoResize):c.alsoResize.length?(c.alsoResize=c.alsoResize[0],b(c.alsoResize)):d.each(c.alsoResize,function(c){b(c)})},resize:function(c,b){var h=d(this).resizable("instance"),f=h.options,e=h.originalSize,m=h.originalPosition,k={height:h.size.height-
e.height||0,width:h.size.width-e.width||0,top:h.position.top-m.top||0,left:h.position.left-m.left||0},n=function(c,h){d(c).each(function(){var c=d(this),f=d(this).data("dvUi-resizable-alsoresize"),e={},m=h&&h.length?h:c.parents(b.originalElement[0]).length?["width","height"]:["width","height","top","left"];d.each(m,function(a,c){var d=(f[c]||0)+(k[c]||0);d&&0<=d&&(e[c]=d||null)});c.css(e)})};"object"!=typeof f.alsoResize||f.alsoResize.nodeType?n(f.alsoResize):d.each(f.alsoResize,function(c,d){n(c,
d)})},stop:function(){d(this).removeData("resizable-alsoresize")}});d.dvUi.plugin.add("resizable","ghost",{start:function(){var c=d(this).resizable("instance"),b=c.options,f=c.size;c.ghost=c.originalElement.clone();c.ghost.css({opacity:.25,display:"block",position:"relative",height:f.height,width:f.width,margin:0,left:0,top:0}).addClass("dvUi-resizable-ghost").addClass("string"==typeof b.ghost?b.ghost:"");c.ghost.appendTo(c.helper)},resize:function(){var c=d(this).resizable("instance");c.ghost&&c.ghost.css({position:"relative",
height:c.size.height,width:c.size.width})},stop:function(){var c=d(this).resizable("instance");c.ghost&&c.helper&&c.helper.get(0).removeChild(c.ghost.get(0))}});d.dvUi.plugin.add("resizable","grid",{resize:function(){var c,b=d(this).resizable("instance"),f=b.options,e=b.size,m=b.originalSize,k=b.originalPosition,n=b.axis,t="number"==typeof f.grid?[f.grid,f.grid]:f.grid,v=t[0]||1,r=t[1]||1,w=Math.round((e.width-m.width)/v)*v,e=Math.round((e.height-m.height)/r)*r,x=m.width+w,E=m.height+e,O=f.maxWidth&&
x>f.maxWidth,a=f.maxHeight&&E>f.maxHeight,F=f.minWidth&&f.minWidth>x,G=f.minHeight&&f.minHeight>E;f.grid=t;F&&(x+=v);G&&(E+=r);O&&(x-=v);a&&(E-=r);/^(se|s|e)$/.test(n)?(b.size.width=x,b.size.height=E):/^(ne)$/.test(n)?(b.size.width=x,b.size.height=E,b.position.top=k.top-e):/^(sw)$/.test(n)?(b.size.width=x,b.size.height=E,b.position.left=k.left-w):((0>=E-r||0>=x-v)&&(c=b._getPaddingPlusBorderDimensions(this)),0<E-r?(b.size.height=E,b.position.top=k.top-e):(E=r-c.height,b.size.height=E,b.position.top=
k.top+m.height-E),0<x-v?(b.size.width=x,b.position.left=k.left-w):(x=r-c.height,b.size.width=x,b.position.left=k.left+m.width-x))}});d.dvUi.resizable;d.widget("dvUi.selectable",d.dvUi.mouse,{version:"1.11.2",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var c,b=this;this.element.addClass("dvUi-selectable");this.dragged=!1;this.refresh=function(){c=d(b.options.filter,
b.element[0]);c.addClass("dvUi-selectee");c.each(function(){var c=d(this),b=c.offset();d.data(this,"selectable-item",{element:this,$element:c,left:b.left,top:b.top,right:b.left+c.outerWidth(),bottom:b.top+c.outerHeight(),startselected:!1,selected:c.hasClass("dvUi-selected"),selecting:c.hasClass("dvUi-selecting"),unselecting:c.hasClass("dvUi-unselecting")})})};this.refresh();this.selectees=c.addClass("dvUi-selectee");this._mouseInit();this.helper=d("<div class='dvUi-selectable-helper'></div>")},_destroy:function(){this.selectees.removeClass("dvUi-selectee").removeData("selectable-item");
this.element.removeClass("dvUi-selectable dvUi-selectable-disabled");this._mouseDestroy()},_mouseStart:function(c){var b=this,f=this.options;this.opos=[c.pageX,c.pageY];this.options.disabled||(this.selectees=d(f.filter,this.element[0]),this._trigger("start",c),d(f.appendTo).append(this.helper),this.helper.css({left:c.pageX,top:c.pageY,width:0,height:0}),f.autoRefresh&&this.refresh(),this.selectees.filter(".dvUi-selected").each(function(){var f=d.data(this,"selectable-item");f.startselected=!0;c.metaKey||
c.ctrlKey||(f.$element.removeClass("dvUi-selected"),f.selected=!1,f.$element.addClass("dvUi-unselecting"),f.unselecting=!0,b._trigger("unselecting",c,{unselecting:f.element}))}),d(c.target).parents().addBack().each(function(){var f,h=d.data(this,"selectable-item");return h?(f=!c.metaKey&&!c.ctrlKey||!h.$element.hasClass("dvUi-selected"),h.$element.removeClass(f?"dvUi-unselecting":"dvUi-selected").addClass(f?"dvUi-selecting":"dvUi-unselecting"),h.unselecting=!f,h.selecting=f,h.selected=f,f?b._trigger("selecting",
c,{selecting:h.element}):b._trigger("unselecting",c,{unselecting:h.element}),!1):void 0}))},_mouseDrag:function(c){if(this.dragged=!0,!this.options.disabled){var b,f=this,e=this.options,m=this.opos[0],k=this.opos[1],n=c.pageX,t=c.pageY;return m>n&&(b=n,n=m,m=b),k>t&&(b=t,t=k,k=b),this.helper.css({left:m,top:k,width:n-m,height:t-k}),this.selectees.each(function(){var b=d.data(this,"selectable-item"),h=!1;b&&b.element!==f.element[0]&&("touch"===e.tolerance?h=!(b.left>n||m>b.right||b.top>t||k>b.bottom):
"fit"===e.tolerance&&(h=b.left>m&&n>b.right&&b.top>k&&t>b.bottom),h?(b.selected&&(b.$element.removeClass("dvUi-selected"),b.selected=!1),b.unselecting&&(b.$element.removeClass("dvUi-unselecting"),b.unselecting=!1),b.selecting||(b.$element.addClass("dvUi-selecting"),b.selecting=!0,f._trigger("selecting",c,{selecting:b.element}))):(b.selecting&&((c.metaKey||c.ctrlKey)&&b.startselected?(b.$element.removeClass("dvUi-selecting"),b.selecting=!1,b.$element.addClass("dvUi-selected"),b.selected=!0):(b.$element.removeClass("dvUi-selecting"),
b.selecting=!1,b.startselected&&(b.$element.addClass("dvUi-unselecting"),b.unselecting=!0),f._trigger("unselecting",c,{unselecting:b.element}))),b.selected&&(c.metaKey||c.ctrlKey||b.startselected||(b.$element.removeClass("dvUi-selected"),b.selected=!1,b.$element.addClass("dvUi-unselecting"),b.unselecting=!0,f._trigger("unselecting",c,{unselecting:b.element})))))}),!1}},_mouseStop:function(c){var b=this;return this.dragged=!1,d(".dvUi-unselecting",this.element[0]).each(function(){var f=d.data(this,
"selectable-item");f.$element.removeClass("dvUi-unselecting");f.unselecting=!1;f.startselected=!1;b._trigger("unselected",c,{unselected:f.element})}),d(".dvUi-selecting",this.element[0]).each(function(){var f=d.data(this,"selectable-item");f.$element.removeClass("dvUi-selecting").addClass("dvUi-selected");f.selecting=!1;f.selected=!0;f.startselected=!0;b._trigger("selected",c,{selected:f.element})}),this._trigger("stop",c),this.helper.remove(),!1}});d.widget("dvUi.sortable",d.dvUi.mouse,{version:"1.11.2",
widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1E3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},
_isOverAxis:function(c,b,d){return c>=b&&b+d>c},_isFloating:function(c){return/left|right/.test(c.css("float"))||/inline|table-cell/.test(c.css("display"))},_create:function(){var c=this.options;this.containerCache={};this.element.addClass("dvUi-sortable");this.refresh();this.floating=this.items.length?"x"===c.axis||this._isFloating(this.items[0].item):!1;this.offset=this.element.offset();this._mouseInit();this._setHandleClassName();this.ready=!0},_setOption:function(c,b){this._super(c,b);"handle"===
c&&this._setHandleClassName()},_setHandleClassName:function(){this.element.find(".dvUi-sortable-handle").removeClass("dvUi-sortable-handle");d.each(this.items,function(){(this.instance.options.handle?this.item.find(this.instance.options.handle):this.item).addClass("dvUi-sortable-handle")})},_destroy:function(){this.element.removeClass("dvUi-sortable dvUi-sortable-disabled").find(".dvUi-sortable-handle").removeClass("dvUi-sortable-handle");this._mouseDestroy();for(var c=this.items.length-1;0<=c;c--)this.items[c].item.removeData(this.widgetName+
"-item");return this},_mouseCapture:function(c,b){var f=null,h=!1,e=this;return this.reverting?!1:this.options.disabled||"static"===this.options.type?!1:(this._refreshItems(c),d(c.target).parents().each(function(){return d.data(this,e.widgetName+"-item")===e?(f=d(this),!1):void 0}),d.data(c.target,e.widgetName+"-item")===e&&(f=d(c.target)),f?!this.options.handle||b||(d(this.options.handle,f).find("*").addBack().each(function(){this===c.target&&(h=!0)}),h)?(this.currentItem=f,this._removeCurrentsFromItems(),
!0):!1:!1)},_mouseStart:function(c,b,f){var h;b=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(c),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},d.extend(this.offset,{click:{left:c.pageX-this.offset.left,top:c.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),
this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(c),this.originalPageX=c.pageX,this.originalPageY=c.pageY,b.cursorAt&&this._adjustOffsetFromHelper(b.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),b.containment&&this._setContainment(),b.cursor&&"auto"!==b.cursor&&(h=this.document.find("body"),
this.storedCursor=h.css("cursor"),h.css("cursor",b.cursor),this.storedStylesheet=d("<style>*{ cursor: "+b.cursor+" !important; }</style>").appendTo(h)),b.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",b.opacity)),b.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",b.zIndex)),this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),
this._trigger("start",c,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!f)for(f=this.containers.length-1;0<=f;f--)this.containers[f]._trigger("activate",c,this._uiHash(this));return d.dvUi.ddmanager&&(d.dvUi.ddmanager.current=this),d.dvUi.ddmanager&&!b.dropBehaviour&&d.dvUi.ddmanager.prepareOffsets(this,c),this.dragging=!0,this.helper.addClass("dvUi-sortable-helper"),this._mouseDrag(c),!0},_mouseDrag:function(c){var b,f,e,m;b=this.options;var k=!1;this.position=this._generatePosition(c);
this.positionAbs=this._convertPositionTo("absolute");this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs);this.options.scroll&&(this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-c.pageY<b.scrollSensitivity?this.scrollParent[0].scrollTop=k=this.scrollParent[0].scrollTop+b.scrollSpeed:c.pageY-this.overflowOffset.top<b.scrollSensitivity&&(this.scrollParent[0].scrollTop=k=this.scrollParent[0].scrollTop-b.scrollSpeed),
this.overflowOffset.left+this.scrollParent[0].offsetWidth-c.pageX<b.scrollSensitivity?this.scrollParent[0].scrollLeft=k=this.scrollParent[0].scrollLeft+b.scrollSpeed:c.pageX-this.overflowOffset.left<b.scrollSensitivity&&(this.scrollParent[0].scrollLeft=k=this.scrollParent[0].scrollLeft-b.scrollSpeed)):(c.pageY-d(document).scrollTop()<b.scrollSensitivity?k=d(document).scrollTop(d(document).scrollTop()-b.scrollSpeed):d(window).height()-(c.pageY-d(document).scrollTop())<b.scrollSensitivity&&(k=d(document).scrollTop(d(document).scrollTop()+
b.scrollSpeed)),c.pageX-d(document).scrollLeft()<b.scrollSensitivity?k=d(document).scrollLeft(d(document).scrollLeft()-b.scrollSpeed):d(window).width()-(c.pageX-d(document).scrollLeft())<b.scrollSensitivity&&(k=d(document).scrollLeft(d(document).scrollLeft()+b.scrollSpeed))),!1!==k&&d.dvUi.ddmanager&&!b.dropBehaviour&&d.dvUi.ddmanager.prepareOffsets(this,c));this.positionAbs=this._convertPositionTo("absolute");this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+
"px");this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px");for(b=this.items.length-1;0<=b;b--)if(f=this.items[b],e=f.item[0],m=this._intersectsWithPointer(f),m&&f.instance===this.currentContainer&&e!==this.currentItem[0]&&this.placeholder[1===m?"next":"prev"]()[0]!==e&&!d.contains(this.placeholder[0],e)&&("semi-dynamic"===this.options.type?!d.contains(this.element[0],e):!0)){if(this.direction=1===m?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(f))break;
this._rearrange(c,f);this._trigger("change",c,this._uiHash());break}return this._contactContainers(c),d.dvUi.ddmanager&&d.dvUi.ddmanager.drag(this,c),this._trigger("sort",c,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(c,b){if(c){if(d.dvUi.ddmanager&&!this.options.dropBehaviour&&d.dvUi.ddmanager.drop(this,c),this.options.revert){var f=this,h=this.placeholder.offset(),e=this.options.axis,m={};e&&"x"!==e||(m.left=h.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===
document.body?0:this.offsetParent[0].scrollLeft));e&&"y"!==e||(m.top=h.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollTop));this.reverting=!0;d(this.helper).animate(m,parseInt(this.options.revert,10)||500,function(){f._clear(c)})}else this._clear(c,b);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null});"original"===this.options.helper?this.currentItem.css(this._storedCSS).removeClass("dvUi-sortable-helper"):this.currentItem.show();
for(var c=this.containers.length-1;0<=c;c--)this.containers[c]._trigger("deactivate",null,this._uiHash(this)),this.containers[c].containerCache.over&&(this.containers[c]._trigger("out",null,this._uiHash(this)),this.containers[c].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),d.extend(this,{helper:null,dragging:!1,
reverting:!1,_noFinalSort:null}),this.domPosition.prev?d(this.domPosition.prev).after(this.currentItem):d(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(c){var b=this._getItemsAsjQuery(c&&c.connected),f=[];return c=c||{},d(b).each(function(){var b=(d(c.item||this).attr(c.attribute||"id")||"").match(c.expression||/(.+)[\-=_](.+)/);b&&f.push((c.key||b[1]+"[]")+"="+(c.key&&c.expression?b[1]:b[2]))}),!f.length&&c.key&&f.push(c.key+"="),f.join("&")},toArray:function(c){var b=
this._getItemsAsjQuery(c&&c.connected),f=[];return c=c||{},b.each(function(){f.push(d(c.item||this).attr(c.attribute||"id")||"")}),f},_intersectsWith:function(c){var b=this.positionAbs.left,d=b+this.helperProportions.width,f=this.positionAbs.top,e=f+this.helperProportions.height,m=c.left,k=m+c.width,n=c.top,v=n+c.height,r=this.offset.click.top,w=this.offset.click.left,r="x"===this.options.axis||f+r>n&&v>f+r,w="y"===this.options.axis||b+w>m&&k>b+w;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||
"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>c[this.floating?"width":"height"]?r&&w:b+this.helperProportions.width/2>m&&k>d-this.helperProportions.width/2&&f+this.helperProportions.height/2>n&&v>e-this.helperProportions.height/2},_intersectsWithPointer:function(c){var b="x"===this.options.axis||this._isOverAxis(this.positionAbs.top+this.offset.click.top,c.top,c.height);c="y"===this.options.axis||this._isOverAxis(this.positionAbs.left+this.offset.click.left,
c.left,c.width);b=b&&c;c=this._getDragVerticalDirection();var d=this._getDragHorizontalDirection();return b?this.floating?d&&"right"===d||"down"===c?2:1:c&&("down"===c?2:1):!1},_intersectsWithSides:function(c){var b=this._isOverAxis(this.positionAbs.top+this.offset.click.top,c.top+c.height/2,c.height);c=this._isOverAxis(this.positionAbs.left+this.offset.click.left,c.left+c.width/2,c.width);var d=this._getDragVerticalDirection(),f=this._getDragHorizontalDirection();return this.floating&&f?"right"===
f&&c||"left"===f&&!c:d&&("down"===d&&b||"up"===d&&!b)},_getDragVerticalDirection:function(){var c=this.positionAbs.top-this.lastPositionAbs.top;return 0!==c&&(0<c?"down":"up")},_getDragHorizontalDirection:function(){var c=this.positionAbs.left-this.lastPositionAbs.left;return 0!==c&&(0<c?"right":"left")},refresh:function(c){return this._refreshItems(c),this._setHandleClassName(),this.refreshPositions(),this},_connectWith:function(){var c=this.options;return c.connectWith.constructor===String?[c.connectWith]:
c.connectWith},_getItemsAsjQuery:function(c){function b(){k.push(this)}var f,e,m,k=[],n=[],t=this._connectWith();if(t&&c)for(c=t.length-1;0<=c;c--)for(e=d(t[c]),f=e.length-1;0<=f;f--)(m=d.data(e[f],this.widgetFullName))&&m!==this&&!m.options.disabled&&n.push([d.isFunction(m.options.items)?m.options.items.call(m.element):d(m.options.items,m.element).not(".dvUi-sortable-helper").not(".dvUi-sortable-placeholder"),m]);n.push([d.isFunction(this.options.items)?this.options.items.call(this.element,null,
{options:this.options,item:this.currentItem}):d(this.options.items,this.element).not(".dvUi-sortable-helper").not(".dvUi-sortable-placeholder"),this]);for(c=n.length-1;0<=c;c--)n[c][0].each(b);return d(k)},_removeCurrentsFromItems:function(){var c=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=d.grep(this.items,function(b){for(var d=0;c.length>d;d++)if(c[d]===b.item[0])return!1;return!0})},_refreshItems:function(c){this.items=[];this.containers=[this];var b,f,e,m,k,n=this.items,
t=[[d.isFunction(this.options.items)?this.options.items.call(this.element[0],c,{item:this.currentItem}):d(this.options.items,this.element),this]];if((k=this._connectWith())&&this.ready)for(b=k.length-1;0<=b;b--)for(e=d(k[b]),f=e.length-1;0<=f;f--)(m=d.data(e[f],this.widgetFullName))&&m!==this&&!m.options.disabled&&(t.push([d.isFunction(m.options.items)?m.options.items.call(m.element[0],c,{item:this.currentItem}):d(m.options.items,m.element),m]),this.containers.push(m));for(b=t.length-1;0<=b;b--)for(c=
t[b][1],e=t[b][0],f=0,k=e.length;k>f;f++)m=d(e[f]),m.data(this.widgetName+"-item",c),n.push({item:m,instance:c,width:0,height:0,left:0,top:0})},refreshPositions:function(c){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());var b,f,e,m;for(b=this.items.length-1;0<=b;b--)f=this.items[b],f.instance!==this.currentContainer&&this.currentContainer&&f.item[0]!==this.currentItem[0]||(e=this.options.toleranceElement?d(this.options.toleranceElement,f.item):f.item,c||(f.width=e.outerWidth(),
f.height=e.outerHeight()),m=e.offset(),f.left=m.left,f.top=m.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(b=this.containers.length-1;0<=b;b--)m=this.containers[b].element.offset(),this.containers[b].containerCache.left=m.left,this.containers[b].containerCache.top=m.top,this.containers[b].containerCache.width=this.containers[b].element.outerWidth(),this.containers[b].containerCache.height=this.containers[b].element.outerHeight();
return this},_createPlaceholder:function(c){c=c||this;var b,f=c.options;f.placeholder&&f.placeholder.constructor!==String||(b=f.placeholder,f.placeholder={element:function(){var f=c.currentItem[0].nodeName.toLowerCase(),h=d("<"+f+">",c.document[0]).addClass(b||c.currentItem[0].className+" dvUi-sortable-placeholder").removeClass("dvUi-sortable-helper");return"tr"===f?c.currentItem.children().each(function(){d("<td>&#160;</td>",c.document[0]).attr("colspan",d(this).attr("colspan")||1).appendTo(h)}):
"img"===f&&h.attr("src",c.currentItem.attr("src")),b||h.css("visibility","hidden"),h},update:function(d,h){(!b||f.forcePlaceholderSize)&&(h.height()||h.height(c.currentItem.innerHeight()-parseInt(c.currentItem.css("paddingTop")||0,10)-parseInt(c.currentItem.css("paddingBottom")||0,10)),h.width()||h.width(c.currentItem.innerWidth()-parseInt(c.currentItem.css("paddingLeft")||0,10)-parseInt(c.currentItem.css("paddingRight")||0,10)))}});c.placeholder=d(f.placeholder.element.call(c.element,c.currentItem));
c.currentItem.after(c.placeholder);f.placeholder.update(c,c.placeholder)},_contactContainers:function(c){var b,f,e,m,k,n,t,v,r=m=null;for(b=this.containers.length-1;0<=b;b--)d.contains(this.currentItem[0],this.containers[b].element[0])||(this._intersectsWith(this.containers[b].containerCache)?m&&d.contains(this.containers[b].element[0],m.element[0])||(m=this.containers[b],r=b):this.containers[b].containerCache.over&&(this.containers[b]._trigger("out",c,this._uiHash(this)),this.containers[b].containerCache.over=
0));if(m)if(1===this.containers.length)this.containers[r].containerCache.over||(this.containers[r]._trigger("over",c,this._uiHash(this)),this.containers[r].containerCache.over=1);else{b=1E4;e=null;m=(f=m.floating||this._isFloating(this.currentItem))?"left":"top";k=f?"width":"height";v=f?"clientX":"clientY";for(f=this.items.length-1;0<=f;f--)d.contains(this.containers[r].element[0],this.items[f].item[0])&&this.items[f].item[0]!==this.currentItem[0]&&(n=this.items[f].item.offset()[m],t=!1,c[v]-n>this.items[f][k]/
2&&(t=!0),b>Math.abs(c[v]-n)&&(b=Math.abs(c[v]-n),e=this.items[f],this.direction=t?"up":"down"));if(e||this.options.dropOnEmpty){if(this.currentContainer===this.containers[r])return this.currentContainer.containerCache.over||(this.containers[r]._trigger("over",c,this._uiHash()),this.currentContainer.containerCache.over=1),void 0;e?this._rearrange(c,e,null,!0):this._rearrange(c,null,this.containers[r].element,!0);this._trigger("change",c,this._uiHash());this.containers[r]._trigger("change",c,this._uiHash(this));
this.currentContainer=this.containers[r];this.options.placeholder.update(this.currentContainer,this.placeholder);this.containers[r]._trigger("over",c,this._uiHash(this));this.containers[r].containerCache.over=1}}},_createHelper:function(c){var b=this.options;c=d.isFunction(b.helper)?d(b.helper.apply(this.element[0],[c,this.currentItem])):"clone"===b.helper?this.currentItem.clone():this.currentItem;return c.parents("body").length||d("parent"!==b.appendTo?b.appendTo:this.currentItem[0].parentNode)[0].appendChild(c[0]),
c[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(!c[0].style.width||b.forceHelperSize)&&c.width(this.currentItem.width()),(!c[0].style.height||b.forceHelperSize)&&c.height(this.currentItem.height()),c},_adjustOffsetFromHelper:function(c){"string"==typeof c&&(c=c.split(" "));d.isArray(c)&&(c={left:+c[0],top:+c[1]||
0});"left"in c&&(this.offset.click.left=c.left+this.margins.left);"right"in c&&(this.offset.click.left=this.helperProportions.width-c.right+this.margins.left);"top"in c&&(this.offset.click.top=c.top+this.margins.top);"bottom"in c&&(this.offset.click.top=this.helperProportions.height-c.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var c=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&d.contains(this.scrollParent[0],
this.offsetParent[0])&&(c.left+=this.scrollParent.scrollLeft(),c.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&d.dvUi.ie)&&(c={top:0,left:0}),{top:c.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:c.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var c=this.currentItem.position();return{top:c.top-
(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:c.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var c,b,f,e=this.options;
"parent"===e.containment&&(e.containment=this.helper[0].parentNode);"document"!==e.containment&&"window"!==e.containment||(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,d("document"===e.containment?document:window).width()-this.helperProportions.width-this.margins.left,(d("document"===e.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]);/^(document|window|parent)$/.test(e.containment)||
(c=d(e.containment)[0],b=d(e.containment).offset(),f="hidden"!==d(c).css("overflow"),this.containment=[b.left+(parseInt(d(c).css("borderLeftWidth"),10)||0)+(parseInt(d(c).css("paddingLeft"),10)||0)-this.margins.left,b.top+(parseInt(d(c).css("borderTopWidth"),10)||0)+(parseInt(d(c).css("paddingTop"),10)||0)-this.margins.top,b.left+(f?Math.max(c.scrollWidth,c.offsetWidth):c.offsetWidth)-(parseInt(d(c).css("borderLeftWidth"),10)||0)-(parseInt(d(c).css("paddingRight"),10)||0)-this.helperProportions.width-
this.margins.left,b.top+(f?Math.max(c.scrollHeight,c.offsetHeight):c.offsetHeight)-(parseInt(d(c).css("borderTopWidth"),10)||0)-(parseInt(d(c).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(c,b){b||(b=this.position);var f="absolute"===c?1:-1,h="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&d.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,e=/(html|body)/i.test(h[0].tagName);return{top:b.top+
this.offset.relative.top*f+this.offset.parent.top*f-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():e?0:h.scrollTop())*f,left:b.left+this.offset.relative.left*f+this.offset.parent.left*f-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():e?0:h.scrollLeft())*f}},_generatePosition:function(c){var b,f,e=this.options,m=c.pageX,k=c.pageY,n="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&d.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,
t=/(html|body)/i.test(n[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==document&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(c.pageX-this.offset.click.left<this.containment[0]&&(m=this.containment[0]+this.offset.click.left),c.pageY-this.offset.click.top<this.containment[1]&&(k=this.containment[1]+this.offset.click.top),c.pageX-this.offset.click.left>this.containment[2]&&(m=this.containment[2]+
this.offset.click.left),c.pageY-this.offset.click.top>this.containment[3]&&(k=this.containment[3]+this.offset.click.top)),e.grid&&(b=this.originalPageY+Math.round((k-this.originalPageY)/e.grid[1])*e.grid[1],k=this.containment?b-this.offset.click.top>=this.containment[1]&&b-this.offset.click.top<=this.containment[3]?b:b-this.offset.click.top>=this.containment[1]?b-e.grid[1]:b+e.grid[1]:b,f=this.originalPageX+Math.round((m-this.originalPageX)/e.grid[0])*e.grid[0],m=this.containment?f-this.offset.click.left>=
this.containment[0]&&f-this.offset.click.left<=this.containment[2]?f:f-this.offset.click.left>=this.containment[0]?f-e.grid[0]:f+e.grid[0]:f)),{top:k-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():t?0:n.scrollTop()),left:m-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():t?0:n.scrollLeft())}},_rearrange:function(c,b,d,f){d?d[0].appendChild(this.placeholder[0]):
b.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?b.item[0]:b.item[0].nextSibling);var h=this.counter=this.counter?++this.counter:1;this._delay(function(){h===this.counter&&this.refreshPositions(!f)})},_clear:function(c,b){function d(c,b,d){return function(f){d._trigger(c,f,b._uiHash(b))}}this.reverting=!1;var f,h=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(f in this._storedCSS)"auto"!==
this._storedCSS[f]&&"static"!==this._storedCSS[f]||(this._storedCSS[f]="");this.currentItem.css(this._storedCSS).removeClass("dvUi-sortable-helper")}else this.currentItem.show();this.fromOutside&&!b&&h.push(function(c){this._trigger("receive",c,this._uiHash(this.fromOutside))});!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".dvUi-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||b||h.push(function(c){this._trigger("update",c,this._uiHash())});this!==
this.currentContainer&&(b||(h.push(function(c){this._trigger("remove",c,this._uiHash())}),h.push(function(c){return function(b){c._trigger("receive",b,this._uiHash(this))}}.call(this,this.currentContainer)),h.push(function(c){return function(b){c._trigger("update",b,this._uiHash(this))}}.call(this,this.currentContainer))));for(f=this.containers.length-1;0<=f;f--)b||h.push(d("deactivate",this,this.containers[f])),this.containers[f].containerCache.over&&(h.push(d("out",this,this.containers[f])),this.containers[f].containerCache.over=
0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,b||this._trigger("beforeStop",c,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.cancelHelperRemoval||(this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=
null),!b){for(f=0;h.length>f;f++)h[f].call(this,c);this._trigger("stop",c,this._uiHash())}return this.fromOutside=!1,!this.cancelHelperRemoval},_trigger:function(){!1===d.Widget.prototype._trigger.apply(this,arguments)&&this.cancel()},_uiHash:function(c){var b=c||this;return{helper:b.helper,placeholder:b.placeholder||d([]),position:b.position,originalPosition:b.originalPosition,offset:b.positionAbs,item:b.currentItem,sender:c?c.element:null}}})}),jQuery&&function(b){var d={init:function(e){"string"===
typeof e&&(e={idMenu:e});e=b.extend(!0,{},b.fn.dvContextMenu.defaults,e);e.idMenu?null===document.getElementById(e.idMenu)&&b.error("The menu specified does not exist"):b.error("No menu specified");d.destroy.call(this);this.data("dv-context-menu",e);var k="dv-context-menu-"+e.idMenu;b("html").on("contextmenu."+k+" click."+k,function(){b("#"+e.idMenu).hide()});this.on("contextmenu."+k,function(d){d.preventDefault();d.stopPropagation();if(null==e.beforeShow||"function"!==typeof e.beforeShow||e.beforeShow())d=
{x:d.clientX,y:d.clientY},null!=e.translateMouse&&"function"===typeof e.translateMouse&&e.translateMouse(d),b("#"+e.idMenu).css({left:d.x+"px",top:d.y+"px"}),b("#"+e.idMenu).show()});return this},destroy:function(){this.each(function(){var d=b(this),e=d.data("dv-context-menu");void 0!==e&&(b("#"+e.idMenu).hide(),d.removeData("dv-context-menu").off(".dv-context-menu-"+e.idMenu))});b("html").off(".dv-context-menu");return this}};b.fn.dvContextMenu=function(e){if(d[e])return d[e].apply(this,Array.prototype.slice.call(arguments,
1));if("object"!==typeof e&&"string"!==typeof e&&e)b.error("Method "+e+" does not exist on jQuery.dvContextMenu");else return d.init.apply(this,arguments)};b.fn.dvContextMenu.defaults={idMenu:null,translateMouse:null,beforeShow:null}}(jQuery),jQuery&&function(b){function d(l,c){var d=b('<div class="minicolors" />'),p=b.minicolors.defaults,f,h;if(!l.data("minicolors-initialized")){c=b.extend(!0,{},p,c);d.addClass("minicolors-theme-"+c.theme).toggleClass("minicolors-with-opacity",c.opacity).toggleClass("minicolors-no-data-uris",
!0!==c.dataUris);void 0!==c.position&&b.each(c.position.split(" "),function(){d.addClass("minicolors-position-"+this)});p="rgb"===c.format?c.opacity?"25":"20":c.keywords?"11":"7";l.addClass("minicolors-input").data("minicolors-initialized",!1).data("minicolors-settings",c).prop("size",p).wrap(d).after('<div class="minicolors-panel minicolors-slider-'+c.control+'"><div class="minicolors-slider minicolors-sprite"><div class="minicolors-picker"></div></div><div class="minicolors-opacity-slider minicolors-sprite"><div class="minicolors-picker"></div></div><div class="minicolors-grid minicolors-sprite"><div class="minicolors-grid-inner"></div><div class="minicolors-picker"><div></div></div></div></div>');
c.inline||(l.after('<span class="minicolors-swatch minicolors-sprite minicolors-input-swatch"><span class="minicolors-swatch-color"></span></span>'),l.next(".minicolors-input-swatch").on("click",function(a){a.preventDefault();l.focus()}));p=l.parent().find(".minicolors-panel");p.on("selectstart",function(){return!1}).end();if(c.swatches&&0!==c.swatches.length)for(p.addClass("minicolors-with-swatches"),p=b('<ul class="minicolors-swatches"></ul>').appendTo(p),h=0;h<c.swatches.length;++h)f=c.swatches[h],
f=x(f)?v(f,!0):g(t(f,!0)),b('<li class="minicolors-swatch minicolors-sprite"><span class="minicolors-swatch-color"></span></li>').appendTo(p).data("swatch-color",c.swatches[h]).find(".minicolors-swatch-color").css({backgroundColor:a(f),opacity:f.a}),c.swatches[h]=f;c.inline&&l.parent().addClass("minicolors-inline");q(l,!1);l.data("minicolors-initialized",!0)}}function k(a){var g=a.parent();a.removeData("minicolors-initialized").removeData("minicolors-settings").removeProp("size").removeClass("minicolors-input");
g.before(a).remove()}function n(a){var g=a.parent(),l=g.find(".minicolors-panel"),b=a.data("minicolors-settings");!a.data("minicolors-initialized")||a.prop("disabled")||g.hasClass("minicolors-inline")||g.hasClass("minicolors-focus")||(f(),g.addClass("minicolors-focus"),l.stop(!0,!0).fadeIn(b.showSpeed,function(){b.show&&b.show.call(a.get(0))}))}function f(){b(".minicolors-focus").each(function(){var a=b(this),g=a.find(".minicolors-input"),c=a.find(".minicolors-panel"),d=g.data("minicolors-settings");
c.fadeOut(d.hideSpeed,function(){d.hide&&d.hide.call(g.get(0));a.removeClass("minicolors-focus")})})}function m(a,g,b){var l=a.parents(".minicolors").find(".minicolors-input"),d=l.data("minicolors-settings"),p=a.find("[class$=-picker]"),f=a.offset().left,y=a.offset().top,h=Math.round(g.pageX-f),e=Math.round(g.pageY-y);b=b?d.animationSpeed:0;g.originalEvent.changedTouches&&(h=g.originalEvent.changedTouches[0].pageX-f,e=g.originalEvent.changedTouches[0].pageY-y);0>h&&(h=0);0>e&&(e=0);h>a.width()&&(h=
a.width());e>a.height()&&(e=a.height());a.parent().is(".minicolors-slider-wheel")&&p.parent().is(".minicolors-grid")&&(f=75-h,y=75-e,g=Math.sqrt(f*f+y*y),f=Math.atan2(y,f),0>f&&(f+=2*Math.PI),75<g&&(g=75,h=75-75*Math.cos(f),e=75-75*Math.sin(f)),h=Math.round(h),e=Math.round(e));a.is(".minicolors-grid")?p.stop(!0).animate({top:e+"px",left:h+"px"},b,d.animationEasing,function(){c(l,a)}):p.stop(!0).animate({top:e+"px"},b,d.animationEasing,function(){c(l,a)})}function c(a,g){function b(a,g){var l,b;if(!a.length||
!g)return null;l=a.offset().left;b=a.offset().top;return{x:l-g.offset().left+a.outerWidth()/2,y:b-g.offset().top+a.outerHeight()/2}}var l,c,d,p,f,e;p=a.val();c=a.attr("data-opacity");f=a.parent();var m=a.data("minicolors-settings");l=f.find(".minicolors-input-swatch");e=f.find(".minicolors-grid");var k=f.find(".minicolors-slider"),q=f.find(".minicolors-opacity-slider");d=e.find("[class$=-picker]");var n=k.find("[class$=-picker]"),r=q.find("[class$=-picker]");d=b(d,e);n=b(n,k);r=b(r,q);if(g.is(".minicolors-grid, .minicolors-slider, .minicolors-opacity-slider")){switch(m.control){case "wheel":p=
e.width()/2-d.x;f=e.height()/2-d.y;e=Math.sqrt(p*p+f*f);p=Math.atan2(f,p);0>p&&(p+=2*Math.PI);75<e&&(e=75,d.x=69-75*Math.cos(p),d.y=69-75*Math.sin(p));c=w(e/.75,0,100);l=w(180*p/Math.PI,0,360);d=w(100-Math.floor(n.y*(100/k.height())),0,100);p=F({h:l,s:c,b:d});k.css("backgroundColor",F({h:l,s:c,b:100}));break;case "saturation":l=w(parseInt(d.x*(360/e.width()),10),0,360);c=w(100-Math.floor(n.y*(100/k.height())),0,100);d=w(100-Math.floor(d.y*(100/e.height())),0,100);p=F({h:l,s:c,b:d});k.css("backgroundColor",
F({h:l,s:100,b:d}));f.find(".minicolors-grid-inner").css("opacity",c/100);break;case "brightness":l=w(parseInt(d.x*(360/e.width()),10),0,360);c=w(100-Math.floor(d.y*(100/e.height())),0,100);d=w(100-Math.floor(n.y*(100/k.height())),0,100);p=F({h:l,s:c,b:d});k.css("backgroundColor",F({h:l,s:c,b:100}));f.find(".minicolors-grid-inner").css("opacity",1-d/100);break;default:l=w(360-parseInt(n.y*(360/k.height()),10),0,360),c=w(Math.floor(d.x*(100/e.width())),0,100),d=w(100-Math.floor(d.y*(100/e.height())),
0,100),p=F({h:l,s:c,b:d}),e.css("backgroundColor",F({h:l,s:100,b:100}))}c=m.opacity?parseFloat(1-r.y/q.height()).toFixed(2):1;h(a,p,c)}else l.find("span").css({backgroundColor:p,opacity:c}),A(a,p,c)}function h(a,b,c){var l=a.parent(),d=a.data("minicolors-settings"),l=l.find(".minicolors-input-swatch");d.opacity&&a.attr("data-opacity",c);if("rgb"===d.format){b=x(b)?v(b,!0):g(t(b,!0));c=""===a.attr("data-opacity")?1:w(parseFloat(a.attr("data-opacity")).toFixed(2),0,1);if(isNaN(c)||!d.opacity)c=1;b=
1>=a.minicolors("rgbObject").a&&b&&d.opacity?"rgba("+b.r+", "+b.g+", "+b.b+", "+parseFloat(c)+")":"rgb("+b.r+", "+b.g+", "+b.b+")"}else x(b)&&(b=O(b)),b=P(b,d.letterCase);a.val(b);l.find("span").css({backgroundColor:b,opacity:c});A(a,b,c)}function q(a,g){var l,c,d,p,f,e,h,m;h=a.parent();f=a.data("minicolors-settings");m=h.find(".minicolors-input-swatch");var k=h.find(".minicolors-grid"),q=h.find(".minicolors-slider");e=h.find(".minicolors-opacity-slider");var n=k.find("[class$=-picker]"),T=q.find("[class$=-picker]"),
z=e.find("[class$=-picker]");x(a.val())?(l=O(a.val()),(c=w(parseFloat(E(a.val())).toFixed(2),0,1))&&a.attr("data-opacity",c)):l=P(t(a.val(),!0),f.letterCase);l||(l=P(r(f.defaultValue,!0),f.letterCase));c=G(l);p=f.keywords?b.map(f.keywords.split(","),function(a){return b.trim(a.toLowerCase())}):[];p=""!==a.val()&&-1<b.inArray(a.val().toLowerCase(),p)?P(a.val()):x(a.val())?v(a.val()):l;g||a.val(p);f.opacity&&(d=""===a.attr("data-opacity")?1:w(parseFloat(a.attr("data-opacity")).toFixed(2),0,1),isNaN(d)&&
(d=1),a.attr("data-opacity",d),m.find("span").css("opacity",d),e=w(e.height()-e.height()*d,0,e.height()),z.css("top",e+"px"));"transparent"===a.val().toLowerCase()&&m.find("span").css("opacity",0);m.find("span").css("backgroundColor",l);switch(f.control){case "wheel":h=w(Math.ceil(.75*c.s),0,k.height()/2);m=c.h*Math.PI/180;f=w(75-Math.cos(m)*h,0,k.width());e=w(75-Math.sin(m)*h,0,k.height());n.css({top:e+"px",left:f+"px"});e=150-c.b/(100/k.height());""===l&&(e=0);T.css("top",e+"px");q.css("backgroundColor",
F({h:c.h,s:c.s,b:100}));break;case "saturation":f=w(5*c.h/12,0,150);e=w(k.height()-Math.ceil(c.b/(100/k.height())),0,k.height());n.css({top:e+"px",left:f+"px"});e=w(q.height()-c.s*(q.height()/100),0,q.height());T.css("top",e+"px");q.css("backgroundColor",F({h:c.h,s:100,b:c.b}));h.find(".minicolors-grid-inner").css("opacity",c.s/100);break;case "brightness":f=w(5*c.h/12,0,150);e=w(k.height()-Math.ceil(c.s/(100/k.height())),0,k.height());n.css({top:e+"px",left:f+"px"});e=w(q.height()-c.b*(q.height()/
100),0,q.height());T.css("top",e+"px");q.css("backgroundColor",F({h:c.h,s:c.s,b:100}));h.find(".minicolors-grid-inner").css("opacity",1-c.b/100);break;default:f=w(Math.ceil(c.s/(100/k.width())),0,k.width()),e=w(k.height()-Math.ceil(c.b/(100/k.height())),0,k.height()),n.css({top:e+"px",left:f+"px"}),e=w(q.height()-c.h/(360/q.height()),0,q.height()),T.css("top",e+"px"),k.css("backgroundColor",F({h:c.h,s:100,b:100}))}a.data("minicolors-initialized")&&A(a,p,d)}function A(a,b,c){var l=a.data("minicolors-settings"),
d=a.data("minicolors-lastChange"),p;if(!d||d.value!==b||d.opacity!==c){a.data("minicolors-lastChange",{value:b,opacity:c});if(l.swatches&&0!==l.swatches.length){d=x(b)?v(b,!0):g(b);for(p=0;p<l.swatches.length&&(d.r!==l.swatches[p].r||d.g!==l.swatches[p].g||d.b!==l.swatches[p].b||d.a!==l.swatches[p].a);++p);a.parent().find(".minicolors-swatches .minicolors-swatch").removeClass("selected");-1!==p&&a.parent().find(".minicolors-swatches .minicolors-swatch").eq(p).addClass("selected")}l.change&&(l.changeDelay?
(clearTimeout(a.data("minicolors-changeTimeout")),a.data("minicolors-changeTimeout",setTimeout(function(){l.change.call(a.get(0),b,c)},l.changeDelay))):l.change.call(a.get(0),b,c));a.trigger("change").trigger("input")}}function z(a){var c=t(b(a).val(),!0),c=g(c);a=b(a).attr("data-opacity");if(!c)return null;void 0!==a&&b.extend(c,{a:parseFloat(a)});return c}function M(a,c){var l=t(b(a).val(),!0),l=g(l),d=b(a).attr("data-opacity");if(!l)return null;void 0===d&&(d=1);return c?"rgba("+l.r+", "+l.g+", "+
l.b+", "+parseFloat(d)+")":"rgb("+l.r+", "+l.g+", "+l.b+")"}function P(a,g){return"uppercase"===g?a.toUpperCase():a.toLowerCase()}function t(a,g){a=a.replace(/^#/g,"");if(!a.match(/^[A-F0-9]{3,6}/ig)||3!==a.length&&6!==a.length)return"";3===a.length&&g&&(a=a[0]+a[0]+a[1]+a[1]+a[2]+a[2]);return"#"+a}function v(a,g){var b=a.replace(/[^\d,.]/g,"").split(",");b[0]=w(parseInt(b[0],10),0,255);b[1]=w(parseInt(b[1],10),0,255);b[2]=w(parseInt(b[2],10),0,255);b[3]&&(b[3]=w(parseFloat(b[3],10),0,1));return g?
{r:b[0],g:b[1],b:b[2],a:b[3]?b[3]:null}:"undefined"!==typeof b[3]&&1>=b[3]?"rgba("+b[0]+", "+b[1]+", "+b[2]+", "+b[3]+")":"rgb("+b[0]+", "+b[1]+", "+b[2]+")"}function r(a,g){return x(a)?v(a):t(a,g)}function w(a,g,b){a<g&&(a=g);a>b&&(a=b);return a}function x(a){return(a=a.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i))&&4===a.length?!0:!1}function E(a){return(a=a.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+(\.\d{1,2})?|\.\d{1,2})[\s+]?/i))&&
6===a.length?a[4]:"1"}function O(a){return(a=a.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i))&&4===a.length?"#"+("0"+parseInt(a[1],10).toString(16)).slice(-2)+("0"+parseInt(a[2],10).toString(16)).slice(-2)+("0"+parseInt(a[3],10).toString(16)).slice(-2):""}function a(a){var g=[a.r.toString(16),a.g.toString(16),a.b.toString(16)];b.each(g,function(a,b){1===b.length&&(g[a]="0"+b)});return"#"+g.join("")}function F(g){var b=a,c,l,d;c=Math.round(g.h);var f=Math.round(255*
g.s/100);g=Math.round(255*g.b/100);if(0===f)c=l=d=g;else{var f=(255-f)*g/255,e=c%60*(g-f)/60;360===c&&(c=0);60>c?(c=g,d=f,l=f+e):120>c?(l=g,d=f,c=g-e):180>c?(l=g,c=f,d=f+e):240>c?(d=g,c=f,l=g-e):300>c?(d=g,l=f,c=f+e):360>c?(c=g,l=f,d=g-e):d=l=c=0}return b({r:Math.round(c),g:Math.round(l),b:Math.round(d)})}function G(a){a=g(a);var b={h:0,s:0,b:0},c=Math.max(a.r,a.g,a.b),l=c-Math.min(a.r,a.g,a.b);b.b=c;b.s=0!==c?255*l/c:0;b.h=0!==b.s?a.r===c?(a.g-a.b)/l:a.g===c?2+(a.b-a.r)/l:4+(a.r-a.g)/l:-1;b.h*=60;
0>b.h&&(b.h+=360);b.s*=100/255;b.b*=100/255;0===b.s&&(b.h=360);return b}function g(a){a=parseInt(-1<a.indexOf("#")?a.substring(1):a,16);return{r:a>>16,g:(a&65280)>>8,b:a&255}}b.minicolors={defaults:{animationSpeed:50,animationEasing:"swing",change:null,changeDelay:0,control:"hue",dataUris:!0,defaultValue:"",format:"hex",hide:null,hideSpeed:100,inline:!1,keywords:"",letterCase:"lowercase",opacity:!1,position:"bottom left",show:null,showSpeed:100,theme:"default",swatches:[]}};b.extend(b.fn,{minicolors:function(a,
g){switch(a){case "destroy":return b(this).each(function(){k(b(this))}),b(this);case "hide":return f(),b(this);case "opacity":if(void 0===g)return b(this).attr("data-opacity");b(this).each(function(){q(b(this).attr("data-opacity",g))});return b(this);case "rgbObject":return z(b(this),"rgbaObject"===a);case "rgbString":case "rgbaString":return M(b(this),"rgbaString"===a);case "settings":if(void 0===g)return b(this).data("minicolors-settings");b(this).each(function(){var a=b(this).data("minicolors-settings")||
{};k(b(this));b(this).minicolors(b.extend(!0,a,g))});return b(this);case "show":return n(b(this).eq(0)),b(this);case "value":if(void 0===g)return b(this).val();b(this).each(function(){"object"===typeof g?(g.opacity&&b(this).attr("data-opacity",w(g.opacity,0,1)),g.color&&b(this).val(g.color)):b(this).val(g);q(b(this))});return b(this);default:return"create"!==a&&(g=a),b(this).each(function(){d(b(this),g)}),b(this)}}});b(document).on("mousedown.minicolors touchstart.minicolors",function(a){b(a.target).parents().add(a.target).hasClass("minicolors")||
f()}).on("mousedown.minicolors touchstart.minicolors",".minicolors-grid, .minicolors-slider, .minicolors-opacity-slider",function(a){var g=b(this);a.preventDefault();b(a.delegateTarget).data("minicolors-target",g);m(g,a,!0)}).on("mousemove.minicolors touchmove.minicolors",function(a){var g=b(a.delegateTarget).data("minicolors-target");g&&m(g,a)}).on("mouseup.minicolors touchend.minicolors",function(){b(this).removeData("minicolors-target")}).on("click.minicolors",".minicolors-swatches li",function(a){a.preventDefault();
var g=b(this);a=g.parents(".minicolors").find(".minicolors-input");g=g.data("swatch-color");h(a,g,E(g));q(a)}).on("mousedown.minicolors touchstart.minicolors",".minicolors-input-swatch",function(a){var g=b(this).parent().find(".minicolors-input");a.preventDefault();n(g)}).on("focus.minicolors",".minicolors-input",function(){var a=b(this);a.data("minicolors-initialized")&&n(a)}).on("blur.minicolors",".minicolors-input",function(){var c=b(this),d=c.data("minicolors-settings"),f,C;c.data("minicolors-initialized")&&
(f=d.keywords?b.map(d.keywords.split(","),function(a){return b.trim(a.toLowerCase())}):[],""!==c.val()&&-1<b.inArray(c.val().toLowerCase(),f)?C=c.val():(f=x(c.val())?v(c.val(),!0):(f=t(c.val(),!0))?g(f):null,C=null===f?d.defaultValue:"rgb"===d.format?d.opacity?v("rgba("+f.r+","+f.g+","+f.b+","+c.attr("data-opacity")+")"):v("rgb("+f.r+","+f.g+","+f.b+")"):a(f)),f=d.opacity?c.attr("data-opacity"):1,"transparent"===C.toLowerCase()&&(f=0),c.closest(".minicolors").find(".minicolors-input-swatch > span").css("opacity",
f),c.val(C),""===c.val()&&c.val(r(d.defaultValue,!0)),c.val(P(c.val(),d.letterCase)))}).on("keydown.minicolors",".minicolors-input",function(a){var g=b(this);if(g.data("minicolors-initialized"))switch(a.keyCode){case 9:f();break;case 13:case 27:f(),g.blur()}}).on("keyup.minicolors",".minicolors-input",function(){var a=b(this);a.data("minicolors-initialized")&&q(a,!0)}).on("paste.minicolors",".minicolors-input",function(){var a=b(this);a.data("minicolors-initialized")&&setTimeout(function(){q(a,!0)},
1)})}(jQuery),jQuery&&function(b){var d,k=function(){var d=b(this);setTimeout(function(){d.find(":dvUi-dvButton").dvButton("refresh")},1)},n=function(d){var f=d.name,c=d.form,e=b([]);f&&(f=f.replace(/'/g,"\\'"),e=c?b(c).find("[name='"+f+"'][type=radio]"):b("[name='"+f+"'][type=radio]",d.ownerDocument).filter(function(){return!this.form}));return e};b.widget("dvUi.dvButton",{version:"1.11.2",defaultElement:"<button>",options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null},setActive:null},
_create:function(){this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+this.eventNamespace,k);"boolean"!==typeof this.options.disabled?this.options.disabled=!!this.element.prop("disabled"):this.element.prop("disabled",this.options.disabled);this._determineButtonType();this.hasTitle=!!this.buttonElement.attr("title");var f=this,e=this.options,c="checkbox"===this.type||"radio"===this.type,h=c?"":"dvUi-state-active";null===e.label&&(e.label="input"===this.type?this.buttonElement.val():
this.buttonElement.html());this._hoverable(this.buttonElement);this.buttonElement.addClass("dvUi-button dvUi-widget dvUi-state-default dvUi-corner-all").attr("role","button").bind("mouseenter"+this.eventNamespace,function(){e.disabled||this===d&&b(this).addClass("dvUi-state-active")}).bind("mouseleave"+this.eventNamespace,function(){e.disabled||b(this).removeClass(h)}).bind("click"+this.eventNamespace,function(b){e.disabled&&(b.preventDefault(),b.stopImmediatePropagation())});this._on({focus:function(){this.buttonElement.addClass("dvUi-state-focus")},
blur:function(){this.buttonElement.removeClass("dvUi-state-focus")}});c&&this.element.bind("change"+this.eventNamespace,function(){f.refresh()});"checkbox"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){if(e.disabled)return!1}):"radio"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){if(e.disabled)return!1;b(this).addClass("dvUi-state-active");f.buttonElement.attr("aria-pressed","true");var c=f.element[0];n(c).not(c).map(function(){return b(this).dvButton("widget")[0]}).removeClass("dvUi-state-active").attr("aria-pressed",
"false")}):(this.buttonElement.bind("mousedown"+this.eventNamespace,function(){if(e.disabled)return!1;b(this).addClass("dvUi-state-active");d=this;f.document.one("mouseup",function(){d=null})}).bind("mouseup"+this.eventNamespace,function(){if(e.disabled)return!1;b(this).removeClass("dvUi-state-active")}).bind("keydown"+this.eventNamespace,function(c){if(e.disabled)return!1;c.keyCode!==b.dvUi.keyCode.SPACE&&c.keyCode!==b.dvUi.keyCode.ENTER||b(this).addClass("dvUi-state-active")}).bind("keyup"+this.eventNamespace+
" blur"+this.eventNamespace,function(){b(this).removeClass("dvUi-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(c){c.keyCode===b.dvUi.keyCode.SPACE&&b(this).click()}));this._setOption("disabled",e.disabled);this._resetButton()},_determineButtonType:function(){var b,d;this.element.is("[type=checkbox]")?this.type="checkbox":this.element.is("[type=radio]")?this.type="radio":this.element.is("input")?this.type="input":this.type="button";"checkbox"===this.type||"radio"===
this.type?(b=this.element.parents().last(),d="label[for='"+this.element.attr("id")+"']",this.buttonElement=b.find(d),this.buttonElement.length||(b=b.length?b.siblings():this.element.siblings(),this.buttonElement=b.filter(d),this.buttonElement.length||(this.buttonElement=b.find(d))),this.element.addClass("dvUi-helper-hidden-accessible"),(b=this.element.is(":checked"))&&this.buttonElement.addClass("dvUi-state-active"),this.buttonElement.prop("aria-pressed",b)):this.buttonElement=this.element},widget:function(){return this.buttonElement},
_destroy:function(){this.element.removeClass("dvUi-helper-hidden-accessible");this.buttonElement.removeClass("dvUi-button dvUi-widget dvUi-state-default dvUi-corner-all dvUi-state-active dvUi-button-icons-only dvUi-button-icon-only dvUi-button-text-icons dvUi-button-text-icon-primary dvUi-button-text-icon-secondary dvUi-button-text-only").removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".dvUi-button-text").html());this.hasTitle||this.buttonElement.removeAttr("title")},_setOption:function(b,
d){this._super(b,d);"disabled"===b?(this.widget().toggleClass("dvUi-state-disabled",!!d),this.element.prop("disabled",!!d),d&&("checkbox"===this.type||"radio"===this.type?this.buttonElement.removeClass("dvUi-state-focus"):this.buttonElement.removeClass("dvUi-state-focus dvUi-state-active"))):this._resetButton()},refresh:function(){var d=this.element.is("input, button")?this.element.is(":disabled"):this.element.hasClass("dvUi-button-disabled"),e=this;d!==this.options.disabled&&this._setOption("disabled",
d);"radio"===this.type?n(this.element[0]).each(function(){b(this).is(":checked")?(b(this).dvButton("widget").addClass("dvUi-state-active").attr("aria-pressed","true"),e._trigger("setActive")):b(this).dvButton("widget").removeClass("dvUi-state-active").attr("aria-pressed","false")}):"checkbox"===this.type&&(this.element.is(":checked")?(this.buttonElement.addClass("dvUi-state-active").attr("aria-pressed","true"),e._trigger("setActive")):this.buttonElement.removeClass("dvUi-state-active").attr("aria-pressed",
"false"))},_resetButton:function(){if("input"===this.type)this.options.label&&this.element.val(this.options.label);else{var d=this.buttonElement.removeClass("dvUi-button-icons-only dvUi-button-icon-only dvUi-button-text-icons dvUi-button-text-icon-primary dvUi-button-text-icon-secondary dvUi-button-text-only"),e=b("<span></span>",this.document[0]).addClass("dvUi-button-text").html(this.options.label).appendTo(d.empty()).text(),c=this.options.icons,h=c.primary&&c.secondary,k=[];c.primary||c.secondary?
(this.options.text&&k.push("dvUi-button-text-icon"+(h?"s":c.primary?"-primary":"-secondary")),c.primary&&d.prepend("<span class='dvUi-button-icon-primary dvUi-icon "+c.primary+"'></span>"),c.secondary&&d.append("<span class='dvUi-button-icon-secondary dvUi-icon "+c.secondary+"'></span>"),this.options.text||(k.push(h?"dvUi-button-icons-only":"dvUi-button-icon-only"),this.hasTitle||d.attr("title",b.trim(e)))):k.push("dvUi-button-text-only");d.addClass(k.join(" "))}}});b.widget("dvUi.dvButtonset",{version:"1.11.2",
options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(dvUi-dvButton)",setActive:null},_create:function(){this.element.addClass("dvUi-buttonset");this.refresh()},_init:function(){this.refresh()},_setOption:function(b,d){"disabled"===b&&this.buttons.dvButton("option",b,d);this._super(b,d)},refresh:function(){var d="rtl"===this.element.css("direction"),e=this.element.find(this.options.items),c=e.filter(":dvUi-dvButton");e.not(":dvUi-dvButton").dvButton({setActive:this.options.setActive});
c.dvButton("refresh");this.buttons=e.map(function(){return b(this).dvButton("widget")[0]}).removeClass("dvUi-corner-all dvUi-corner-left dvUi-corner-right").filter(":first").addClass(d?"dvUi-corner-right":"dvUi-corner-left").end().filter(":last").addClass(d?"dvUi-corner-left":"dvUi-corner-right").end().end()},_destroy:function(){this.element.removeClass("dvUi-buttonset");this.buttons.map(function(){return b(this).dvButton("widget")[0]}).removeClass("dvUi-corner-left dvUi-corner-right").end().dvButton("destroy")}});
b.widget("dvUi.dvDialog",{version:"1.11.2",options:{appendTo:"body",autoOpen:!0,buttons:[],closeOnEscape:!0,dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(d){var f=b(this).css(d).offset().top;0>f&&b(this).css("top",d.top-f)}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,
resize:null,resizeStart:null,resizeStop:null},sizeRelatedOptions:{buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},resizableRelatedOptions:{maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height};this.originalPosition={parent:this.element.parent(),
index:this.element.parent().children().index(this.element)};this.originalTitle=this.element.attr("title");this.options.title=this.options.title||this.originalTitle;this._createWrapper();this.element.show().removeAttr("title").addClass("dvUi-dialog-content dvUi-widget-content").appendTo(this.uiDialog);this._createTitlebar();this._createButtonPane();this.options.draggable&&b.fn.draggable&&this._makeDraggable();this.options.resizable&&b.fn.resizable&&this._makeResizable();this._isOpen=!1;this._trackFocus()},
_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var d=this.options.appendTo;return d&&(d.jquery||d.nodeType)?b(d):this.document.find(d||"body").eq(0)},_destroy:function(){var b,d=this.originalPosition;this._destroyOverlay();this.element.removeUniqueId().removeClass("dvUi-dialog-content dvUi-widget-content").css(this.originalCss).detach();this.uiDialog.stop(!0,!0).remove();this.originalTitle&&this.element.attr("title",this.originalTitle);b=d.parent.children().eq(d.index);
b.length&&b[0]!==this.element[0]?b.before(this.element):d.parent.append(this.element)},widget:function(){return this.uiDialog},disable:b.noop,enable:b.noop,close:function(d){var f,c=this;if(this._isOpen&&!1!==this._trigger("beforeClose",d)){this._isOpen=!1;this._focusedElement=null;this._destroyOverlay();this._untrackInstance();if(!this.opener.filter(":focusable").focus().length)try{(f=this.document[0].activeElement)&&"body"!==f.nodeName.toLowerCase()&&b(f).blur()}catch(h){}this._hide(this.uiDialog,
this.options.hide,function(){c._trigger("close",d)})}},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(d,e){var c=!1,f=this.uiDialog.siblings(".dvUi-front:visible").map(function(){return+b(this).css("z-index")}).get(),f=Math.max.apply(null,f);f>=+this.uiDialog.css("z-index")&&(this.uiDialog.css("z-index",f+1),c=!0);c&&!e&&this._trigger("focus",d);return c},open:function(){var d=this;this._isOpen?this._moveToTop()&&this._focusTabbable():(this._isOpen=
!0,this.opener=b(this.document[0].activeElement),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this.overlay&&this.overlay.css("z-index",this.uiDialog.css("z-index")-1),this._show(this.uiDialog,this.options.show,function(){d._focusTabbable();d._trigger("focus")}),this._makeFocusTarget(),this._trigger("open"))},refresh:function(b){b&&(this._setOption("maxHeight",b),this._size());this._position()},_focusTabbable:function(){var b=this._focusedElement;b||(b=this.element.find("[autofocus]"));
b.length||(b=this.element.find(":tabbable"));b.length||(b=this.uiDialogButtonPane.find(":tabbable"));b.length||(b=this.uiDialogTitlebarClose.filter(":tabbable"));b.length||(b=this.uiDialog);b.eq(0).focus()},_keepFocus:function(d){function f(){var c=this.document[0].activeElement;this.uiDialog[0]===c||b.contains(this.uiDialog[0],c)||this._focusTabbable()}d.preventDefault();f.call(this);this._delay(f)},_createWrapper:function(){this.uiDialog=b("<div>").addClass("dvUi-dialog dvUi-widget dvUi-widget-content dvUi-corner-all dvUi-front "+
this.options.dialogClass).hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo());this._on(this.uiDialog,{keydown:function(d){if(this.options.closeOnEscape&&!d.isDefaultPrevented()&&d.keyCode&&d.keyCode===b.dvUi.keyCode.ESCAPE)d.preventDefault(),this.close(d);else if(d.keyCode===b.dvUi.keyCode.TAB&&!d.isDefaultPrevented()){var f=this.uiDialog.find(":tabbable"),c=f.filter(":first"),e=f.filter(":last");d.target!==e[0]&&d.target!==this.uiDialog[0]||d.shiftKey?d.target!==c[0]&&d.target!==
this.uiDialog[0]||!d.shiftKey||(this._delay(function(){e.focus()}),d.preventDefault()):(this._delay(function(){c.focus()}),d.preventDefault())}},mousedown:function(b){this._moveToTop(b)&&this._focusTabbable()}});this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){var d;this.uiDialogTitlebar=b("<div>").addClass("dvUi-dialog-titlebar dvUi-widget-header dvUi-corner-all dvUi-helper-clearfix").prependTo(this.uiDialog);
this._on(this.uiDialogTitlebar,{mousedown:function(d){b(d.target).closest(".dvUi-dialog-titlebar-close")||this.uiDialog.focus()}});this.uiDialogTitlebarClose=b('<div class="dvUi-button"><svg width="100%" height="100%" viewbox="0 0 512 512"><path d="M490.767,471.211L275.512,255.989L490.658,40.79c5.4-5.402,5.4-14.153,0-19.555c-5.402-5.401-14.152-5.401-19.556,0l-215.148,215.2L40.79,21.302c-5.402-5.402-14.153-5.402-19.555,0c-5.401,5.402-5.401,14.153,0,19.555l215.167,215.135L21.234,471.211c-5.401,5.401-5.401,14.152,0,19.556c5.402,5.4,14.153,5.4,19.555,0l215.169-215.221l215.252,215.221c5.402,5.4,14.152,5.4,19.556,0C496.167,485.363,496.167,476.612,490.767,471.211z"/></svg></div>').addClass("dvUi-dialog-titlebar-close").appendTo(this.uiDialogTitlebar);
this._on(this.uiDialogTitlebarClose,{click:function(b){b.preventDefault();this.close(b)}});d=b("<span>").uniqueId().addClass("dvUi-dialog-title").prependTo(this.uiDialogTitlebar);this._title(d);this.uiDialog.attr({"aria-labelledby":d.attr("id")})},_title:function(b){this.options.title||b.html("&#160;");b.text(this.options.title)},_createButtonPane:function(){this.uiDialogButtonPane=b("<div>").addClass("dvUi-dialog-buttonpane dvUi-widget-content dvUi-helper-clearfix");this.uiDialogButtonSpacer=b("<div>").addClass("dvUi-dialog-spacer");
this.uiButtonSet=b("<div>").addClass("dvUi-dialog-buttonset").appendTo(this.uiDialogButtonPane);this._createButtons()},_createButtons:function(){var d=this,e=this.options.buttons;this.uiDialogButtonPane.remove();this.uiDialogButtonSpacer.remove();this.uiButtonSet.empty();b.isEmptyObject(e)||b.isArray(e)&&!e.length?this.uiDialog.removeClass("dvUi-dialog-buttons"):(b.each(e,function(c,f){var e,h;f=b.isFunction(f)?{click:f,text:c}:f;f=b.extend({type:"button"},f);e=f.click;f.click=function(){e.apply(d.element[0],
arguments)};h={icons:f.icons,text:f.showText};delete f.icons;delete f.showText;b("<button></button>",f).dvButton(h).appendTo(d.uiButtonSet)}),this.uiDialog.addClass("dvUi-dialog-buttons"),this.uiDialogButtonPane.appendTo(this.uiDialog),this.uiDialogButtonSpacer.insertBefore(this.uiDialogButtonPane))},_makeDraggable:function(){function d(b){return{position:b.position,offset:b.offset}}var e=this,c=this.options;this.uiDialog.draggable({cancel:".dvUi-dialog-content, .dvUi-dialog-titlebar-close",handle:".dvUi-dialog-titlebar",
containment:"document",start:function(c,f){b(this).addClass("dvUi-dialog-dragging");e._blockFrames();e._trigger("dragStart",c,d(f))},drag:function(b,c){e._trigger("drag",b,d(c))},stop:function(f,m){var h=m.offset.left-e.document.scrollLeft(),k=m.offset.top-e.document.scrollTop();c.position={my:"left top",at:"left"+(0<=h?"+":"")+h+" top"+(0<=k?"+":"")+k,of:e.window};b(this).removeClass("dvUi-dialog-dragging");e._unblockFrames();e._trigger("dragStop",f,d(m))}})},_makeResizable:function(){function d(b){return{originalPosition:b.originalPosition,
originalSize:b.originalSize,position:b.position,size:b.size}}var e=this,c=this.options,h=c.resizable,k=this.uiDialog.css("position"),h="string"===typeof h?h:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".dvUi-dialog-content",containment:"document",alsoResize:this.element,maxWidth:c.maxWidth,maxHeight:c.maxHeight,minWidth:c.minWidth,minHeight:this._minHeight(),handles:h,start:function(c,f){b(this).addClass("dvUi-dialog-resizing");e._blockFrames();e._trigger("resizeStart",c,d(f))},resize:function(b,
c){e._trigger("resize",b,d(c))},stop:function(f,h){var m=e.uiDialog.offset(),k=m.left-e.document.scrollLeft(),m=m.top-e.document.scrollTop();c.height=e.uiDialog.height();c.width=e.uiDialog.width();c.position={my:"left top",at:"left"+(0<=k?"+":"")+k+" top"+(0<=m?"+":"")+m,of:e.window};b(this).removeClass("dvUi-dialog-resizing");e._unblockFrames();e._trigger("resizeStop",f,d(h))}}).css("position",k)},_trackFocus:function(){this._on(this.widget(),{focusin:function(d){this._makeFocusTarget();this._focusedElement=
b(d.target)}})},_makeFocusTarget:function(){this._untrackInstance();this._trackingInstances().unshift(this)},_untrackInstance:function(){var d=this._trackingInstances(),e=b.inArray(this,d);-1!==e&&d.splice(e,1)},_trackingInstances:function(){var b=this.document.data("dvUi-dvDialog-instances");b||(b=[],this.document.data("dvUi-dvDialog-instances",b));return b},_minHeight:function(){var b=this.options;return"auto"===b.height?b.minHeight:Math.min(b.minHeight,b.height)},_position:function(){var b=this.uiDialog.is(":visible");
b||this.uiDialog.show();this.uiDialog.position(this.options.position);b||this.uiDialog.hide()},_setOptions:function(d){var f=this,c=!1,e={};b.each(d,function(b,d){f._setOption(b,d);b in f.sizeRelatedOptions&&(c=!0);b in f.resizableRelatedOptions&&(e[b]=d)});c&&(this._size(),this._position());this.uiDialog.is(":data(dvUi-resizable)")&&this.uiDialog.resizable("option",e)},_setOption:function(b,d){var c,f=this.uiDialog;"dialogClass"===b&&f.removeClass(this.options.dialogClass).addClass(d);"disabled"!==
b&&(this._super(b,d),"appendTo"===b&&this.uiDialog.appendTo(this._appendTo()),"buttons"===b&&this._createButtons(),"draggable"===b&&((c=f.is(":data(dvUi-draggable)"))&&!d&&f.draggable("destroy"),!c&&d&&this._makeDraggable()),"position"===b&&this._position(),"resizable"===b&&((c=f.is(":data(dvUi-resizable)"))&&!d&&f.resizable("destroy"),c&&"string"===typeof d&&f.resizable("option","handles",d),c||!1===d||this._makeResizable()),"title"===b&&this._title(this.uiDialogTitlebar.find(".dvUi-dialog-title")))},
_size:function(){var b,d,c,e=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0});e.minWidth>e.width&&(e.width=e.minWidth);b=this.uiDialog.css({height:"auto",width:e.width}).outerHeight();d=Math.max(0,e.minHeight-b);c="number"===typeof e.maxHeight?Math.max(0,e.maxHeight-b):"none";"auto"===e.height?this.element.css({minHeight:d,maxHeight:c,height:"auto"}):this.element.height(Math.max(0,e.height-b));this.uiDialog.is(":data(dvUi-resizable)")&&this.uiDialog.resizable("option",
"minHeight",this._minHeight())},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map(function(){var d=b(this);return b("<div>").css({position:"absolute",width:d.outerWidth(),height:d.outerHeight()}).appendTo(d.parent()).offset(d.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_allowInteraction:function(d){return b(d.target).closest(".dvUi-dialog").length?!0:!!b(d.target).closest(".dvUi-datepicker").length},_createOverlay:function(){if(this.options.modal){var d=
!0;this._delay(function(){d=!1});this.document.data("dvUi-dvDialog-overlays")||this._on(this.document,{focusin:function(b){d||this._allowInteraction(b)||(b.preventDefault(),this._trackingInstances()[0]._focusTabbable())}});this.overlay=b("<div>").addClass("dvUi-widget-overlay dvUi-front").appendTo(this._appendTo());this._on(this.overlay,{mousedown:"_keepFocus"});this.document.data("dvUi-dvDialog-overlays",(this.document.data("dvUi-dvDialog-overlays")||0)+1)}},_destroyOverlay:function(){if(this.options.modal&&
this.overlay){var b=this.document.data("dvUi-dvDialog-overlays")-1;b?this.document.data("dvUi-dvDialog-overlays",b):this.document.unbind("focusin").removeData("dvUi-dvDialog-overlays");this.overlay.remove();this.overlay=null}}});b.widget("dvUi.dvMenu",{version:"1.11.2",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"dvUi-icon-carat-1-e"},items:"> *",menus:"ul",position:{my:"left-1 top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element;
this.mouseHandled=!1;this.element.uniqueId().addClass("dvUi-menu dvUi-widget dvUi-widget-content").toggleClass("dvUi-menu-icons",!!this.element.find(".dvUi-icon").length).attr({role:this.options.role,tabIndex:0});this.options.disabled&&this.element.addClass("dvUi-state-disabled").attr("aria-disabled","true");this._on({"mousedown .dvUi-menu-item":function(b){b.preventDefault()},"click .dvUi-menu-item":function(d){var f=b(d.target);!this.mouseHandled&&f.not(".dvUi-state-disabled").length&&(this.select(d),
d.isPropagationStopped()||(this.mouseHandled=!0),f.has(".dvUi-menu").length?this.expand(d):!this.element.is(":focus")&&b(this.document[0].activeElement).closest(".dvUi-menu").length&&(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".dvUi-menu").length&&clearTimeout(this.timer)))},"mouseenter .dvUi-menu-item":function(d){if(!this.previousFilter){var f=b(d.currentTarget);f.siblings(".dvUi-state-active").removeClass("dvUi-state-active");this.focus(d,f)}},mouseleave:"collapseAll",
"mouseleave .dvUi-menu":"collapseAll",focus:function(b,d){var c=this.active||this.element.find(this.options.items).eq(0);d||this.focus(b,c)},blur:function(d){this._delay(function(){b.contains(this.element[0],this.document[0].activeElement)||this.collapseAll(d)})},keydown:"_keydown"});this.refresh();this._on(this.document,{click:function(b){this._closeOnDocumentClick(b)&&this.collapseAll(b);this.mouseHandled=!1}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".dvUi-menu").addBack().removeClass("dvUi-menu dvUi-widget dvUi-widget-content dvUi-menu-icons dvUi-front").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show();
this.element.find(".dvUi-menu-item").removeClass("dvUi-menu-item").removeAttr("role").removeAttr("aria-disabled").removeUniqueId().removeClass("dvUi-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var d=b(this);d.data("dvUi-dvMenu-submenu-carat")&&d.remove()});this.element.find(".dvUi-menu-divider").removeClass("dvUi-menu-divider dvUi-widget-content")},_keydown:function(d){var f,c,e,k=!0;switch(d.keyCode){case b.dvUi.keyCode.PAGE_UP:this.previousPage(d);
break;case b.dvUi.keyCode.PAGE_DOWN:this.nextPage(d);break;case b.dvUi.keyCode.HOME:this._move("first","first",d);break;case b.dvUi.keyCode.END:this._move("last","last",d);break;case b.dvUi.keyCode.UP:this.previous(d);break;case b.dvUi.keyCode.DOWN:this.next(d);break;case b.dvUi.keyCode.LEFT:this.collapse(d);break;case b.dvUi.keyCode.RIGHT:this.active&&!this.active.is(".dvUi-state-disabled")&&this.expand(d);break;case b.dvUi.keyCode.ENTER:case b.dvUi.keyCode.SPACE:this._activate(d);break;case b.dvUi.keyCode.ESCAPE:this.collapse(d);
break;default:k=!1,f=this.previousFilter||"",c=String.fromCharCode(d.keyCode),e=!1,clearTimeout(this.filterTimer),c===f?e=!0:c=f+c,f=this._filterMenuItems(c),f=e&&-1!==f.index(this.active.next())?this.active.nextAll(".dvUi-menu-item"):f,f.length||(c=String.fromCharCode(d.keyCode),f=this._filterMenuItems(c)),f.length?(this.focus(d,f),this.previousFilter=c,this.filterTimer=this._delay(function(){delete this.previousFilter},1E3)):delete this.previousFilter}k&&d.preventDefault()},_activate:function(b){this.active.is(".dvUi-state-disabled")||
(this.active.is("[aria-haspopup='true']")?this.expand(b):this.select(b))},refresh:function(){var d,e=this,c=this.options.icons.submenu;d=this.element.find(this.options.menus);this.element.toggleClass("dvUi-menu-icons",!!this.element.find(".dvUi-icon").length);d.filter(":not(.dvUi-menu)").addClass("dvUi-menu dvUi-widget dvUi-widget-content dvUi-front").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var d=b(this),f=d.parent(),e=b("<span>").addClass("dvUi-menu-icon dvUi-icon "+
c).data("dvUi-dvMenu-submenu-carat",!0);f.attr("aria-haspopup","true").prepend(e);d.attr("aria-labelledby",f.attr("id"))});d=d.add(this.element).find(this.options.items);d.not(".dvUi-menu-item").each(function(){var c=b(this);e._isDivider(c)&&c.addClass("dvUi-widget-content dvUi-menu-divider")});d.not(".dvUi-menu-item, .dvUi-menu-divider").addClass("dvUi-menu-item").uniqueId().attr({tabIndex:-1,role:this._itemRole()});d.filter(".dvUi-state-disabled").attr("aria-disabled","true");this.active&&!b.contains(this.element[0],
this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(b,d){"icons"===b&&this.element.find(".dvUi-menu-icon").removeClass(this.options.icons.submenu).addClass(d.submenu);"disabled"===b&&this.element.toggleClass("dvUi-state-disabled",!!d).attr("aria-disabled",d);this._super(b,d)},focus:function(b,d){var c;this.blur(b,b&&"focus"===b.type);this._scrollIntoView(d);this.active=d.first();c=this.active.addClass("dvUi-state-focus").removeClass("dvUi-state-active");
this.options.role&&this.element.attr("aria-activedescendant",c.attr("id"));this.active.parent().closest(".dvUi-menu-item").addClass("dvUi-state-active");b&&"keydown"===b.type?this._close():this.timer=this._delay(function(){this._close()},this.delay);c=d.children(".dvUi-menu");c.length&&b&&/^mouse/.test(b.type)&&this._startOpening(c);this.activeMenu=d.parent();this._trigger("focus",b,{item:d})},_scrollIntoView:function(d){var f,c,e;this._hasScroll()&&(f=parseFloat(b.css(this.activeMenu[0],"borderTopWidth"))||
0,c=parseFloat(b.css(this.activeMenu[0],"paddingTop"))||0,f=d.offset().top-this.activeMenu.offset().top-f-c,c=this.activeMenu.scrollTop(),e=this.activeMenu.height(),d=d.outerHeight(),0>f?this.activeMenu.scrollTop(c+f):f+d>e&&this.activeMenu.scrollTop(c+f-e+d))},blur:function(b,d){d||clearTimeout(this.timer);this.active&&(this.active.removeClass("dvUi-state-focus"),this.active=null,this._trigger("blur",b,{item:this.active}))},_startOpening:function(b){clearTimeout(this.timer);"true"===b.attr("aria-hidden")&&
(this.timer=this._delay(function(){this._close();this._open(b)},this.delay))},_open:function(d){var f=b.extend({of:this.active},this.options.position);clearTimeout(this.timer);this.element.find(".dvUi-menu").not(d.parents(".dvUi-menu")).hide().attr("aria-hidden","true");d.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(f)},collapseAll:function(d,e){clearTimeout(this.timer);this.timer=this._delay(function(){var c=e?this.element:b(d&&d.target).closest(this.element.find(".dvUi-menu"));
c.length||(c=this.element);this._close(c);this.blur(d);this.activeMenu=c},this.delay)},_close:function(b){b||(b=this.active?this.active.parent():this.element);b.find(".dvUi-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find(".dvUi-state-active").not(".dvUi-state-focus").removeClass("dvUi-state-active")},_closeOnDocumentClick:function(d){return!b(d.target).closest(".dvUi-menu").length},_isDivider:function(b){return!/[^\-\u2014\u2013\s]/.test(b.text())},collapse:function(b){var d=
this.active&&this.active.parent().closest(".dvUi-menu-item",this.element);d&&d.length&&(this._close(),this.focus(b,d))},expand:function(b){var d=this.active&&this.active.children(".dvUi-menu ").find(this.options.items).first();d&&d.length&&(this._open(d.parent()),this._delay(function(){this.focus(b,d)}))},next:function(b){this._move("next","first",b)},previous:function(b){this._move("prev","last",b)},isFirstItem:function(){return this.active&&!this.active.prevAll(".dvUi-menu-item").length},isLastItem:function(){return this.active&&
!this.active.nextAll(".dvUi-menu-item").length},_move:function(b,d,c){var f;this.active&&(f="first"===b||"last"===b?this.active["first"===b?"prevAll":"nextAll"](".dvUi-menu-item").eq(-1):this.active[b+"All"](".dvUi-menu-item").eq(0));f&&f.length&&this.active||(f=this.activeMenu.find(this.options.items)[d]());this.focus(c,f)},nextPage:function(d){var f,c,e;this.active?this.isLastItem()||(this._hasScroll()?(c=this.active.offset().top,e=this.element.height(),this.active.nextAll(".dvUi-menu-item").each(function(){f=
b(this);return 0>f.offset().top-c-e}),this.focus(d,f)):this.focus(d,this.activeMenu.find(this.options.items)[this.active?"last":"first"]())):this.next(d)},previousPage:function(d){var f,c,e;this.active?this.isFirstItem()||(this._hasScroll()?(c=this.active.offset().top,e=this.element.height(),this.active.prevAll(".dvUi-menu-item").each(function(){f=b(this);return 0<f.offset().top-c+e}),this.focus(d,f)):this.focus(d,this.activeMenu.find(this.options.items).first())):this.next(d)},_hasScroll:function(){return this.element.outerHeight()<
this.element.prop("scrollHeight")},select:function(d){this.active=this.active||b(d.target).closest(".dvUi-menu-item");var f={item:this.active};this.active.has(".dvUi-menu").length||this.collapseAll(d,!0);this._trigger("select",d,f)},_filterMenuItems:function(d){d=d.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");var f=new RegExp("^"+d,"i");return this.activeMenu.find(this.options.items).filter(".dvUi-menu-item").filter(function(){return f.test(b.trim(b(this).text()))})}});b.widget("dvUi.dvSelectmenu",
{version:"1.11.2",defaultElement:"<select>",options:{appendTo:null,disabled:null,icons:{button:"dvUi-icon-triangle-1-s"},position:{my:"left top",at:"left bottom",collision:"none"},width:null,change:null,close:null,focus:null,open:null,select:null},_create:function(){var b=this.element.uniqueId().attr("id");this.ids={element:b,button:b+"-button",menu:b+"-menu"};this._drawButton();this._drawMenu();this.options.disabled&&this.disable()},_drawButton:function(){var d=this,e=this.element.attr("tabindex");
this.label=b("label[for='"+this.ids.element+"']").attr("for",this.ids.button);this._on(this.label,{click:function(b){this.button.focus();b.preventDefault()}});this.element.hide();this.button=b("<span>",{"class":"dvUi-selectmenu-button dvUi-widget dvUi-state-default dvUi-corner-all",tabindex:e||this.options.disabled?-1:0,id:this.ids.button,role:"combobox","aria-expanded":"false","aria-autocomplete":"list","aria-owns":this.ids.menu,"aria-haspopup":"true"}).insertAfter(this.element);b("<span>",{"class":"dvUi-icon "+
this.options.icons.button}).prependTo(this.button);this.buttonText=b("<span>",{"class":"dvUi-selectmenu-text"}).appendTo(this.button);this._setText(this.buttonText,this.element.find("option:selected").text());this._resizeButton();this._on(this.button,this._buttonEvents);this.button.one("focusin",function(){d.menuItems||d._refreshMenu()});this._hoverable(this.button);this._focusable(this.button)},_drawMenu:function(){var d=this;this.menu=b("<ul>",{"aria-hidden":"true","aria-labelledby":this.ids.button,
id:this.ids.menu});this.menuWrap=b("<div>",{"class":"dvUi-selectmenu-menu dvUi-front"}).append(this.menu).appendTo(this._appendTo());this.menuInstance=this.menu.dvMenu({role:"listbox",select:function(b,c){b.preventDefault();d._setSelection();d._select(c.item.data("dvUi-dvSelectmenu-item"),b)},focus:function(b,c){var f=c.item.data("dvUi-dvSelectmenu-item");null!=d.focusIndex&&f.index!==d.focusIndex&&(d._trigger("focus",b,{item:f}),d.isOpen||d._select(f,b));d.focusIndex=f.index;d.button.attr("aria-activedescendant",
d.menuItems.eq(f.index).attr("id"))}}).dvMenu("instance");this.menu.addClass("dvUi-corner-bottom").removeClass("dvUi-corner-all");this.menuInstance._off(this.menu,"mouseleave");this.menuInstance._closeOnDocumentClick=function(){return!1};this.menuInstance._isDivider=function(){return!1}},refresh:function(){this._refreshMenu();this._setText(this.buttonText,this._getSelectedItem().text());this.options.width||this._resizeButton()},_refreshMenu:function(){this.menu.empty();var b;b=this.element.find("option");
b.length&&(this._parseOptions(b),this._renderMenu(this.menu,this.items),this.menuInstance.refresh(),this.menuItems=this.menu.find("li").not(".dvUi-selectmenu-optgroup"),b=this._getSelectedItem(),this.menuInstance.focus(null,b),this._setAria(b.data("dvUi-dvSelectmenu-item")),this._setOption("disabled",this.element.prop("disabled")))},open:function(b){this.options.disabled||(this.menuItems?(this.menu.find(".dvUi-state-focus").removeClass("dvUi-state-focus"),this.menuInstance.focus(null,this._getSelectedItem())):
this._refreshMenu(),this.isOpen=!0,this._toggleAttr(),this._resizeMenu(),this._position(),this._on(this.document,this._documentClick),this._trigger("open",b))},_position:function(){this.menuWrap.position(b.extend({of:this.button},this.options.position))},close:function(b){this.isOpen&&(this.isOpen=!1,this._toggleAttr(),this.range=null,this._off(this.document),this._trigger("close",b))},widget:function(){return this.button},menuWidget:function(){return this.menu},_renderMenu:function(d,e){var c=this,
f="";b.each(e,function(e,h){h.optgroup!==f&&(b("<li>",{"class":"dvUi-selectmenu-optgroup dvUi-menu-divider"+(h.element.parent("optgroup").prop("disabled")?" dvUi-state-disabled":""),text:h.optgroup}).appendTo(d),f=h.optgroup);c._renderItemData(d,h)})},_renderItemData:function(b,d){return this._renderItem(b,d).data("dvUi-dvSelectmenu-item",d)},_renderItem:function(d,e){var c=b("<li>",{text:e.label});e.disabled&&c.addClass("dvUi-state-disabled");e.element.attr("data-class")&&c.addClass("dv-SelectIcon").addClass(e.element.attr("data-class"));
return c.appendTo(d)},_setText:function(b,d){d?b.text(d):b.html("&#160;")},_move:function(b,d){var c,f=".dvUi-menu-item";this.isOpen?c=this.menuItems.eq(this.focusIndex):(c=this.menuItems.eq(this.element[0].selectedIndex),f+=":not(.dvUi-state-disabled)");c="first"===b||"last"===b?c["first"===b?"prevAll":"nextAll"](f).eq(-1):c[b+"All"](f).eq(0);c.length&&this.menuInstance.focus(d,c)},_getSelectedItem:function(){return this.menuItems.eq(this.element[0].selectedIndex)},_toggle:function(b){this[this.isOpen?
"close":"open"](b)},_setSelection:function(){var b;this.range&&(window.getSelection?(b=window.getSelection(),b.removeAllRanges(),b.addRange(this.range)):this.range.select(),this.button.focus())},_documentClick:{mousedown:function(d){this.isOpen&&(b(d.target).closest(".dvUi-selectmenu-menu, #"+this.ids.button).length||this.close(d))}},_buttonEvents:{mousedown:function(){var b;window.getSelection?(b=window.getSelection(),b.rangeCount&&(this.range=b.getRangeAt(0))):this.range=document.selection.createRange()},
click:function(b){this._setSelection();this._toggle(b)},keydown:function(d){var f=!0;switch(d.keyCode){case b.dvUi.keyCode.TAB:case b.dvUi.keyCode.ESCAPE:this.close(d);f=!1;break;case b.dvUi.keyCode.ENTER:this.isOpen&&this._selectFocusedItem(d);break;case b.dvUi.keyCode.UP:d.altKey?this._toggle(d):this._move("prev",d);break;case b.dvUi.keyCode.DOWN:d.altKey?this._toggle(d):this._move("next",d);break;case b.dvUi.keyCode.SPACE:this.isOpen?this._selectFocusedItem(d):this._toggle(d);break;case b.dvUi.keyCode.LEFT:this._move("prev",
d);break;case b.dvUi.keyCode.RIGHT:this._move("next",d);break;case b.dvUi.keyCode.HOME:case b.dvUi.keyCode.PAGE_UP:this._move("first",d);break;case b.dvUi.keyCode.END:case b.dvUi.keyCode.PAGE_DOWN:this._move("last",d);break;default:this.menu.trigger(d),f=!1}f&&d.preventDefault()}},_selectFocusedItem:function(b){var d=this.menuItems.eq(this.focusIndex);d.hasClass("dvUi-state-disabled")||this._select(d.data("dvUi-dvSelectmenu-item"),b)},_select:function(b,d){var c=this.element[0].selectedIndex;this.element[0].selectedIndex=
b.index;this._setText(this.buttonText,b.label);this._setAria(b);this._trigger("select",d,{item:b});b.index!==c&&this._trigger("change",d,{item:b});this.close(d)},_setAria:function(b){b=this.menuItems.eq(b.index).attr("id");this.button.attr({"aria-labelledby":b,"aria-activedescendant":b});this.menu.attr("aria-activedescendant",b)},_setOption:function(b,d){"icons"===b&&this.button.find("span.dvUi-icon").removeClass(this.options.icons.button).addClass(d.button);this._super(b,d);"appendTo"===b&&this.menuWrap.appendTo(this._appendTo());
"disabled"===b&&(this.menuInstance.option("disabled",d),this.button.toggleClass("dvUi-state-disabled",d).attr("aria-disabled",d),this.element.prop("disabled",d),d?(this.button.attr("tabindex",-1),this.close()):this.button.attr("tabindex",0));"width"===b&&this._resizeButton()},_appendTo:function(){var d=this.options.appendTo;d&&(d=d.jquery||d.nodeType?b(d):this.document.find(d).eq(0));d&&d[0]||(d=this.element.closest(".dvUi-front"));d.length||(d=this.document[0].body);return d},_toggleAttr:function(){this.button.toggleClass("dvUi-corner-top",
this.isOpen).toggleClass("dvUi-corner-all",!this.isOpen).attr("aria-expanded",this.isOpen);this.menuWrap.toggleClass("dvUi-selectmenu-open",this.isOpen);this.menu.attr("aria-hidden",!this.isOpen)},_resizeButton:function(){var b=this.options.width;b||(b=this.element.show().outerWidth(),this.element.hide());this.button.outerWidth(b)},_resizeMenu:function(){this.menu.css("width",this.menu.css("width"))},_getCreateOptions:function(){return{disabled:this.element.prop("disabled")}},_parseOptions:function(d){var e=
[];d.each(function(c,d){var f=b(d),h=f.parent("optgroup");e.push({element:f,index:c,value:f.attr("value"),label:f.text(),optgroup:h.attr("label")||"",disabled:h.prop("disabled")||f.prop("disabled")})});this.items=e},_destroy:function(){this.menuWrap.remove();this.button.remove();this.element.show();this.element.removeUniqueId();this.label.attr("for",this.ids.element)}})}(jQuery))}},DocuViewareConstants={MAX_PAGE_TRANSFER_RETRIES:10,IE_MAX_SCROLL_TOP_LIMIT:153E4,SERVER_SESSION_LOCK_TIMEOUT:45E3},DocuViewareEncodingUtilities=
{File:{New:function(b,d,e){b={blob:DocuViewareEncodingUtilities.base64.base64toBlob(b,d,Math.max(Math.round(b.length/10),1)),type:d,lastModified:new Date(Date.now()),fileName:e,slice:function(b,d){return this.blob.slice(b,d)}};b.size=b.blob.size;return b}},TypedArray:{Uint8Array:function(b){return window.Uint8Array?new window.Uint8Array(b):new DocuViewareEncodingUtilities.TypedArray.TypedArray(b)},subarray:function(b,d){return this.slice(b,d)},set_:function(b,d){2>arguments.length&&(d=0);for(var e=
0,k=b.length;e<k;++e,++d)this[d]=b[e]&255},TypedArray:function(b){var d;if("number"===typeof b){d=Array(b);for(var e=0;e<b;++e)d[e]=0}else d=b.slice(0);d.subarray=DocuViewareEncodingUtilities.TypedArray.subarray;d.buffer=d;d.byteLength=d.length;d.set=DocuViewareEncodingUtilities.TypedArray.set_;"object"===typeof b&&b.buffer&&(d.buffer=b.buffer);return d}},base64:{PADCHAR:"=",ALPHA:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",getbyte64:function(b,d){return DocuViewareEncodingUtilities.base64.ALPHA.indexOf(b.charAt(d))},
decode:function(b){if(window.atob)return window.atob(b);b=""+b;var d=DocuViewareEncodingUtilities.base64.getbyte64,e,k,n,f=b.length;if(0===f)return b;e=0;b.charAt(f-1)===DocuViewareEncodingUtilities.base64.PADCHAR&&(e=1,b.charAt(f-2)===DocuViewareEncodingUtilities.base64.PADCHAR&&(e=2),f-=4);var m=[];for(k=0;k<f;k+=4)n=d(b,k)<<18|d(b,k+1)<<12|d(b,k+2)<<6|d(b,k+3),m.push(String.fromCharCode(n>>16,n>>8&255,n&255));switch(e){case 1:n=d(b,k)<<18|d(b,k+1)<<12|d(b,k+2)<<6;m.push(String.fromCharCode(n>>
16,n>>8&255));break;case 2:n=d(b,k)<<18|d(b,k+1)<<12,m.push(String.fromCharCode(n>>16))}return m.join("")},getbyte:function(b,d){return b.charCodeAt(d)},encode:function(b){if(window.btoa)return window.btoa(b);var d=DocuViewareEncodingUtilities.base64.PADCHAR,e=DocuViewareEncodingUtilities.base64.ALPHA,k=DocuViewareEncodingUtilities.base64.getbyte,n,f,m=[];b=""+b;var c=b.length-b.length%3;if(0===b.length)return b;for(n=0;n<c;n+=3)f=k(b,n)<<16|k(b,n+1)<<8|k(b,n+2),m.push(e.charAt(f>>18)),m.push(e.charAt(f>>
12&63)),m.push(e.charAt(f>>6&63)),m.push(e.charAt(f&63));switch(b.length-c){case 1:f=k(b,n)<<16;m.push(e.charAt(f>>18)+e.charAt(f>>12&63)+d+d);break;case 2:f=k(b,n)<<16|k(b,n+1)<<8,m.push(e.charAt(f>>18)+e.charAt(f>>12&63)+e.charAt(f>>6&63)+d)}return m.join("")},base64toBlob:function(b,d,e){d=d||"";b=DocuViewareEncodingUtilities.base64.decode(b);for(var k=b.length,n=Math.ceil(k/e),f=Array(n),m=0;m<n;++m){for(var c=m*e,h=Math.min(c+e,k),q=Array(h-c),A=0;c<h;++A,++c)q[A]=b[c].charCodeAt(0);f[m]=new DocuViewareEncodingUtilities.TypedArray.Uint8Array(q)}return new Blob(f,
{type:d})}}},DocuViewareUtilities={addEvent:function(b,d,e){b.attachEvent?(b["e"+d+e]=e,b[d+e]=function(){b["e"+d+e](window.event)},b.attachEvent("on"+d,b[d+e])):b.addEventListener(d,e,!1)},removeEvent:function(b,d,e){b.detachEvent?(b.detachEvent("on"+d,b[d+e]),b[d+e]=null):b.removeEventListener(d,e,!1)},getWindowsVersion:function(){var b=window.navigator.userAgent.toLowerCase().match(/windows nt ([0-9]?[0-9]\.[0-9])/);return null!=b?2==b.length||3==b.length?parseFloat(b[1]):0:0},getInternetExplorerVersion:function(){var b=
-1;if("Microsoft Internet Explorer"==navigator.appName){var d=navigator.userAgent,e=/MSIE ([0-9]{1,}[.0-9]{0,})/;null!=e.exec(d)&&(b=parseFloat(RegExp.$1))}else"Netscape"==navigator.appName&&(d=navigator.userAgent,e=/Trident\/.*rv:([0-9]{1,}[.0-9]{0,})/,null!=e.exec(d)&&(b=parseFloat(RegExp.$1)));return b},getScrollbarWidth:function(){var b,d,e;b=document.createElement("div");b.style.position="absolute";b.style.top="-1000px";b.style.left="-1000px";b.style.width="100px";b.style.height="50px";b.style.overflow=
"hidden";d=document.createElement("div");d.style.width="100%";d.style.height="200px";b.appendChild(d);document.body.appendChild(b);e=d.offsetWidth;b.style.overflow="auto";b=d.offsetWidth;document.body.removeChild(document.body.lastChild);return e-b},getDevicePixelRatio:function(){var b=1;void 0!==window.screen.systemXDPI&&void 0!==window.screen.logicalXDPI&&window.screen.systemXDPI>window.screen.logicalXDPI?b=window.screen.systemXDPI/window.screen.logicalXDPI:void 0!==window.devicePixelRatio&&(b=
window.devicePixelRatio);return b},isValidURL:function(b){return/^(https?|ftp):\/\/([a-zA-Z0-9.-]+(:[a-zA-Z0-9.&%$-]+)*@)*((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]?)(\.(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])){3}|([a-zA-Z0-9-]+\.)*[a-zA-Z0-9-]+\.(com|edu|gov|int|mil|net|org|biz|arpa|info|name|pro|aero|coop|museum|[a-zA-Z]{2}))(:[0-9]+)*(\/($|[a-zA-Z0-9.,?'\\+&%$#=~_-]+))*$/.test(b)}},DocuViewareAnnotationsUtilities={getAnnotationDefaultProperties:function(b){switch(b){case 0:return{type:0,borderWidth:.2,
dashCap:0,dashStyle:0,fill:!1,fillColor:"#000000",fontName:"Arial",fontStyle:1,foreColor:"#FF0000",opacity:1,radiusFactor:.25,rotation:0,stroke:!0,strokeColor:"#FF0000",text:"STAMP",autoCreate:!1};case 1:return{type:1,borderWidth:.04,dashCap:0,dashStyle:0,fill:!1,fillColor:"#FFFFFF",opacity:1,radiusFactor:0,rotation:0,squaredBox:!1,stroke:!0,strokeColor:"#000000",autoCreate:!1};case 2:return{type:2,fillColor:"#FFFF00",rotation:0,squaredBox:!1,autoCreate:!1};case 3:return{type:3,borderWidth:.04,dashCap:0,
dashStyle:0,endCap:0,opacity:1,rotation:0,startCap:0,strokeColor:"#000000",autoCreate:!1};case 4:return{type:4,arrowFilled:!0,arrowHeight:10,arrowWidth:5,borderWidth:.04,dashCap:0,dashStyle:0,opacity:1,rotation:0,strokeColor:"#000000",autoCreate:!1};case 5:return{type:5,borderWidth:.04,dashCap:0,dashStyle:0,fill:!1,fillColor:"#000000",opacity:1,rotation:0,stroke:!0,strokeColor:"#000000",autoCreate:!1};case 6:return{type:6,borderWidth:.04,dashCap:0,dashStyle:0,fill:!1,fillColor:"#FFFFFF",opacity:1,
rotation:0,squaredBox:!1,stroke:!0,strokeColor:"#000000",autoCreate:!1};case 7:return{type:7,borderWidth:.04,dashCap:0,dashStyle:0,fill:!1,fillColor:"#000000",opacity:1,radiusFactor:0,rotation:0,stroke:!1,strokeColor:"#FFFFFF",autoCreate:!1};case 8:return{type:8,alignment:0,autoSize:!1,borderWidth:.01,dashCap:0,dashStyle:0,fill:!0,fillColor:"#FFFFFF",fontName:"Arial",fontSize:12,fontStyle:0,foreColor:"#000000",lineAlignment:0,opacity:1,radiusFactor:0,rotation:0,stroke:!1,strokeColor:"#000000",text:"Text",
canEditText:!0,autoCreate:!1};case 9:return{type:9,alignment:0,autoSize:!1,borderWidth:.01,dashCap:0,dashStyle:0,fill:!0,fillColor:"#FDFD32",fontName:"Arial",fontSize:20,fontStyle:1,foreColor:"#000000",lineAlignment:0,opacity:1,rotation:0,stroke:!0,strokeColor:"#000000",text:"Text",canEditText:!0,autoCreate:!1};case 10:return{type:10,borderWidth:.04,dashStyle:0,dashCap:0,opacity:1,rotation:0,strokeColor:"#000000",autoCreate:!1};case 11:return{type:11,borderWidth:.2,rotation:0,strokeColor:"#FFFF00",
autoCreate:!1};case 12:return{type:11,borderWidth:.04,dashCap:0,dashStyle:0,fill:!1,fillColor:"#FF0000",opacity:1,rotation:0,stroke:!0,strokeColor:"#000000",autoCreate:!1};case 13:return{type:13,borderWidth:.04,dashCap:0,dashStyle:0,fill:!1,fillColor:"#000000",fontName:"Arial",fontStyle:3,foreColor:"#0000FF",link:"",opacity:1,radiusFactor:0,rotation:0,stroke:!1,strokeColor:"#000000",autoCreate:!1,text:""};case 14:return{type:14,borderWidth:.04,dashCap:0,dashStyle:0,fill:!0,fillColor:"#FF0000",opacity:1,
rotation:0,stroke:!0,strokeColor:"#000000",autoCreate:!1};case 15:return{type:15,borderWidth:.04,dashCap:0,dashStyle:0,fontName:"Arial",fontSize:12,fontStyle:0,foreColor:"#000000",measurementUnit:1,opacity:1,rotation:0,strokeColor:"#000000",scale:1,autoCreate:!1};case 16:return{type:16,borderWidth:.04,dashCap:0,dashStyle:0,fontName:"Arial",fontSize:12,fontStyle:0,foreColor:"#000000",measurementUnit:1,fill:!1,fillColor:"#000000",opacity:1,rotation:0,stroke:!0,strokeColor:"#000000",scale:1,autoCreate:!1};
case 2048:return{type:2048,allowReview:!0,allowAnswer:!0,reviewStatus:0,fontName:"Arial",fontSize:9,fontStyle:0,foreColor:"#000000"};default:return null}},getAnnotationDefaultPropertiesDisplay:function(b){switch(b){case 0:return"borderWidth dashCap dashStyle fill fillColor fontName fontStyle foreColor opacity radiusFactor rotation stroke strokeColor text".split(" ");case 1:return"borderWidth dashCap dashStyle fill fillColor opacity radiusFactor rotation squaredBox stroke strokeColor".split(" ");case 2:return["fillColor",
"rotation","squaredBox"];case 3:return"borderWidth dashCap dashStyle endCap opacity rotation startCap strokeColor".split(" ");case 4:return"arrowFilled arrowHeight arrowWidth borderWidth dashCap dashStyle opacity rotation strokeColor".split(" ");case 5:return"borderWidth dashCap dashStyle fill fillColor opacity rotation stroke strokeColor".split(" ");case 6:return"borderWidth dashCap dashStyle fill fillColor opacity rotation squaredBox stroke strokeColor".split(" ");case 7:return"borderWidth dashCap dashStyle fill fillColor opacity radiusFactor rotation stroke strokeColor".split(" ");
case 8:return"alignment autoSize borderWidth dashCap dashStyle fill fillColor fontName fontSize fontStyle foreColor lineAlignment opacity radiusFactor rotation stroke strokeColor text".split(" ");case 9:return"alignment autoSize borderWidth dashCap dashStyle fill fillColor fontName fontSize fontStyle foreColor lineAlignment opacity rotation stroke strokeColor text".split(" ");case 10:return"borderWidth dashStyle dashCap opacity rotation strokeColor".split(" ");case 11:return["borderWidth","rotation",
"strokeColor"];case 12:return"borderWidth dashCap dashStyle fill fillColor opacity rotation stroke strokeColor".split(" ");case 13:return"borderWidth dashCap dashStyle fill fillColor fontName fontStyle foreColor link opacity radiusFactor rotation stroke strokeColor text".split(" ");case 14:return"borderWidth dashCap dashStyle fill fillColor opacity rotation stroke strokeColor".split(" ");case 15:return"borderWidth dashCap dashStyle fontName fontSize fontStyle foreColor measurementUnit opacity rotation strokeColor scale".split(" ");
case 16:return"borderWidth dashCap dashStyle fontName fontSize fontStyle foreColor measurementUnit fill fillColor opacity rotation stroke strokeColor scale".split(" ");case 2048:return"allowReview allowAnswer reviewStatus fontName fontSize fontStyle foreColor".split(" ");default:return null}}},JSON=JSON||{};
JSON.stringify=JSON.stringify||function(b){var d=typeof b;if("object"!=d||null===b)return"string"==d&&(b='"'+b+'"'),String(b);var e,k,n=[],f=b&&b.constructor==Array;for(e in b)k=b[e],d=typeof k,"string"==d?k='"'+k+'"':"object"==d&&null!==k&&(k=JSON.stringify(k)),n.push((f?"":'"'+e+'":')+String(k));return(f?"[":"{")+String(n)+(f?"]":"}")};
var DocuViewareAPI={Constants:{SINGLE_COLUMN_MOBILE_MENU_WIDTH:126,TWO_COLUMNS_MOBILE_MENU_WIDTH:188},Status:{OK:0,GenericError:1},Toolbar:{None:0,Standard:1,Mobile:2},SearchPageSelection:{CurrentPage:0,AllPages:1},RotateFlipType:{Rotate90FlipNone:1,Rotate180FlipNone:2,Rotate270FlipNone:3},LocalServiceStatus:{Ready:0,NotFound:1,WrongVersion:2},TwainCapabilities:{ACAP_AUDIOFILEFORMAT:4609,ACAP_XFERMECH:4610,CAP_ALARMS:4120,CAP_ALARMVOLUME:4121,CAP_AUTHOR:4096,CAP_AUTOFEED:4103,CAP_AUTOMATICCAPTURE:4122,
CAP_AUTOMATICSENSEMEDIUM:4155,CAP_AUTOSCAN:4112,CAP_BATTERYMINUTES:4146,CAP_BATTERYPERCENTAGE:4147,CAP_CAMERAENABLED:4150,CAP_CAMERAORDER:4151,CAP_CAMERAPREVIEWUI:4129,CAP_CAMERASIDE:4148,CAP_CAPTION:4097,CAP_CLEARBUFFERS:4125,CAP_CLEARPAGE:4104,CAP_CUSTOMBASE:32768,CAP_CUSTOMDSDATA:4117,CAP_CUSTOMINTERFACEGUID:4156,CAP_DEVICEEVENT:4130,CAP_DEVICEONLINE:4111,CAP_DEVICETIMEDATE:4127,CAP_DOUBLEFEEDDETECTION:4159,CAP_DOUBLEFEEDDETECTIONLENGTH:4160,CAP_DOUBLEFEEDDETECTIONRESPONSE:4162,CAP_DOUBLEFEEDDETECTIONSENSITIVITY:4161,
CAP_DUPLEX:4114,CAP_DUPLEXENABLED:4115,CAP_ENABLEDSUIONLY:4116,CAP_ENDORSER:4118,CAP_EXTENDEDCAPS:4102,CAP_FEEDERALIGNMENT:4141,CAP_FEEDERENABLED:4098,CAP_FEEDERLOADED:4099,CAP_FEEDERORDER:4142,CAP_FEEDERPOCKET:4154,CAP_FEEDERPREP:4153,CAP_FEEDPAGE:4105,CAP_INDICATORS:4107,CAP_INDICATORSMODE:4164,CAP_JOBCONTROL:4119,CAP_LANGUAGE:4140,CAP_MAXBATCHBUFFERS:4126,CAP_MICRENABLED:4152,CAP_PAPERDETECTABLE:4109,CAP_PAPERHANDLING:4163,CAP_POWERSAVETIME:4166,CAP_POWERSUPPLY:4128,CAP_PRINTER:4134,CAP_PRINTERCHARROTATION:4167,
CAP_PRINTERENABLED:4135,CAP_PRINTERFONTSTYLE:4168,CAP_PRINTERINDEX:4136,CAP_PRINTERINDEXLEADCHAR:4169,CAP_PRINTERINDEXMAXVALUE:4170,CAP_PRINTERINDEXNUMDIGITS:4171,CAP_PRINTERINDEXSTEP:4172,CAP_PRINTERINDEXTRIGGER:4173,CAP_PRINTERMODE:4137,CAP_PRINTERSTRING:4138,CAP_PRINTERSTRINGPREVIEW:4174,CAP_PRINTERSUFFIX:4139,CAP_PRINTERVERTICALOFFSET:4165,CAP_REACQUIREALLOWED:4144,CAP_REWINDPAGE:4106,CAP_SEGMENTED:4149,CAP_SERIALNUMBER:4132,CAP_SUPPORTEDCAPS:4101,CAP_SUPPORTEDCAPSEXT:4108,CAP_SUPPORTEDCAPSSEGMENTUNIQUE:4157,
CAP_SUPPORTEDDATS:4158,CAP_THUMBNAILSENABLED:4113,CAP_TIMEBEFOREFIRSTCAPTURE:4123,CAP_TIMEBETWEENCAPTURES:4124,CAP_TIMEDATE:4100,CAP_UICONTROLLABLE:4110,CAP_XFERCOUNT:1,ICAP_AUTOBRIGHT:4352,ICAP_AUTODISCARDBLANKPAGES:4404,ICAP_AUTOMATICBORDERDETECTION:4432,ICAP_AUTOMATICCOLORENABLED:4441,ICAP_AUTOMATICCOLORNONCOLORPIXELTYPE:4442,ICAP_AUTOMATICCROPUSESFRAME:4439,ICAP_AUTOMATICDESKEW:4433,ICAP_AUTOMATICLENGTHDETECTION:4440,ICAP_AUTOMATICROTATE:4434,ICAP_AUTOSIZE:4438,ICAP_BARCODEDETECTIONENABLED:4407,
ICAP_BARCODEMAXRETRIES:4412,ICAP_BARCODEMAXSEARCHPRIORITIES:4409,ICAP_BARCODESEARCHMODE:4411,ICAP_BARCODESEARCHPRIORITIES:4410,ICAP_BARCODETIMEOUT:4413,ICAP_BITDEPTH:4395,ICAP_BITDEPTHREDUCTION:4396,ICAP_BITORDER:4380,ICAP_BITORDERCODES:4390,ICAP_BRIGHTNESS:4353,ICAP_CCITTKFACTOR:4381,ICAP_COLORMANAGEMENTENABLED:4443,ICAP_COMPRESSION:256,ICAP_CONTRAST:4355,ICAP_CUSTHALFTONE:4356,ICAP_EXPOSURETIME:4357,ICAP_EXTIMAGEINFO:4399,ICAP_FEEDERTYPE:4436,ICAP_FILMTYPE:4447,ICAP_FILTER:4358,ICAP_FLASHUSED:4359,
ICAP_FLASHUSED2:4422,ICAP_FLIPROTATION:4406,ICAP_FRAMES:4372,ICAP_GAMMA:4360,ICAP_HALFTONES:4361,ICAP_HIGHLIGHT:4362,ICAP_ICCPROFILE:4437,ICAP_IMAGEDATASET:4398,ICAP_IMAGEFILEFORMAT:4364,ICAP_IMAGEFILTER:4423,ICAP_IMAGEMERGE:4444,ICAP_IMAGEMERGEHEIGHTTHRESHOLD:4445,ICAP_JPEGPIXELTYPE:4392,ICAP_JPEGQUALITY:4435,ICAP_JPEGSUBSAMPLING:4449,ICAP_LAMPSTATE:4365,ICAP_LIGHTPATH:4382,ICAP_LIGHTSOURCE:4366,ICAP_MAXFRAMES:4378,ICAP_MINIMUMHEIGHT:4400,ICAP_MINIMUMWIDTH:4401,ICAP_MIRROR:4448,ICAP_NOISEFILTER:4424,
ICAP_ORIENTATION:4368,ICAP_OVERSCAN:4425,ICAP_PATCHCODEDETECTIONENABLED:4415,ICAP_PATCHCODEMAXRETRIES:4420,ICAP_PATCHCODEMAXSEARCHPRIORITIES:4417,ICAP_PATCHCODESEARCHMODE:4419,ICAP_PATCHCODESEARCHPRIORITIES:4418,ICAP_PATCHCODETIMEOUT:4421,ICAP_PHYSICALHEIGHT:4370,ICAP_PHYSICALWIDTH:4369,ICAP_PIXELFLAVOR:4383,ICAP_PIXELFLAVORCODES:4391,ICAP_PIXELTYPE:257,ICAP_PLANARCHUNKY:4384,ICAP_ROTATION:4385,ICAP_SHADOW:4371,ICAP_SUPPORTEDBARCODETYPES:4408,ICAP_SUPPORTEDEXTIMAGEINFO:4446,ICAP_SUPPORTEDPATCHCODETYPES:4416,
ICAP_SUPPORTEDSIZES:4386,ICAP_THRESHOLD:4387,ICAP_TILES:4379,ICAP_TIMEFILL:4394,ICAP_UNDEFINEDIMAGESIZE:4397,ICAP_UNITS:258,ICAP_XFERMECH:259,ICAP_XNATIVERESOLUTION:4374,ICAP_XRESOLUTION:4376,ICAP_XSCALING:4388,ICAP_YNATIVERESOLUTION:4375,ICAP_YRESOLUTION:4377,ICAP_YSCALING:4389,ICAP_ZOOMFACTOR:4414},GetSessionID:function(b){return(b=document.getElementById(b))&&b.control?b.control.ajax.sessionID:null},IsInitialized:function(b){return(b=document.getElementById(b))&&b.control},IsLoaded:function(b){return(b=
document.getElementById(b))&&b.control&&!b.control.waitForInit&&!b.control.hasPendingResize()},IsTwainSupportAvailable:function(b){return(b=document.getElementById(b))&&b.control?b.control.IsTwainSupportAvailable():!1},PostCustomServerAction:function(b,d,e,k,n,f){return(b=document.getElementById(b))&&b.control?b.control.PostCustomServerAction(d,e,k,n,f):DocuViewareAPI.Status.GenericError},LoadFromFile:function(b,d,e){return(b=document.getElementById(b))&&b.control?b.control.LoadFromFile(d,e):DocuViewareAPI.Status.GenericError},
LoadFromUri:function(b,d,e,k){return(b=document.getElementById(b))&&b.control?b.control.LoadFromUri(d,"",e,k):DocuViewareAPI.Status.GenericError},LoadFromUriEx:function(b,d,e,k,n){return(b=document.getElementById(b))&&b.control?b.control.LoadFromUri(d,e,k,n):DocuViewareAPI.Status.GenericError},ToggleLoadFromUriDialog:function(b){return(b=document.getElementById(b))&&b.control?b.control.ToggleLoadFromUriDialog():DocuViewareAPI.Status.GenericError},Save:function(b,d,e){return(b=document.getElementById(b))&&
b.control?b.control.ToggleSaveDialog(d,e):DocuViewareAPI.Status.GenericError},Print:function(b,d,e){return(b=document.getElementById(b))&&b.control?b.control.TogglePrintDialog(d,e):DocuViewareAPI.Status.GenericError},TwainAcquire:function(b,d,e){return(b=document.getElementById(b))&&b.control?b.control.TwainToggleAcquisitionDialog(d,e):DocuViewareAPI.Status.GenericError},TwainSetConfig:function(b,d,e,k,n,f,m,c){return(b=document.getElementById(b))&&b.control?b.control.TwainSetConfig(d,e,k,n,f,m,c):
DocuViewareAPI.Status.GenericError},TwainDownloadServiceSetup:function(b){return(b=document.getElementById(b))&&b.control?b.control.DownloadTwainServiceSetup():DocuViewareAPI.Status.GenericError},TwainGetLocalServiceStatus:function(b){return(b=document.getElementById(b))&&b.control?b.control.TwainGetLocalServiceStatus():DocuViewareAPI.Status.GenericError},TwainGetSources:function(b){return(b=document.getElementById(b))&&b.control?b.control.GetTwainSourceList():DocuViewareAPI.Status.GenericError},
TwainAcquireToNewDocument:function(b,d){var e=document.getElementById(b);return e&&e.control?e.control.TwainAcquireToNewDocument(d):DocuViewareAPI.Status.GenericError},TwainAcquireToCurrentDocument:function(b,d,e){return(b=document.getElementById(b))&&b.control?b.control.TwainAcquireToCurrentDocument(d,e):DocuViewareAPI.Status.GenericError},GetDocumentType:function(b){return(b=document.getElementById(b))&&b.control?b.control.GetDocumentType():-1},GetDocumentName:function(b){return(b=document.getElementById(b))&&
b.control?b.control.GetDocumentName():""},GetPageCount:function(b){return(b=document.getElementById(b))&&b.control?b.control.GetPageCount():-1},GetDisplayedArea:function(b){return(b=document.getElementById(b))&&b.control?b.control.GetDisplayedArea():{left:0,top:0,width:0,height:0}},GetViewerScrollLeft:function(b){return(b=document.getElementById(b))&&b.control?b.control.GetViewerScrollLeft():-1},GetViewerScrollTop:function(b){return(b=document.getElementById(b))&&b.control?b.control.GetViewerScrollTop():
-1},SetViewerScrollLeft:function(b,d){var e=document.getElementById(b);return e&&e.control?e.control.SetViewerScrollLeft(d):DocuViewareAPI.Status.GenericError},SetViewerScrollTop:function(b,d){var e=document.getElementById(b);return e&&e.control?e.control.SetViewerScrollTop(d):DocuViewareAPI.Status.GenericError},GetSelectionAreaCoordinates:function(b){return(b=document.getElementById(b))&&b.control?b.control.GetSelectionAreaCoordinates():{left:0,top:0,width:0,height:0}},SetSelectionAreaCoordinates:function(b,
d){var e=document.getElementById(b);return e&&e.control?e.control.SetSelectionAreaCoordinates(d):DocuViewareAPI.Status.GenericError},ClearSelectionArea:function(b){return(b=document.getElementById(b))&&b.control?b.control.ClearSelectionArea():DocuViewareAPI.Status.GenericError},GetMouseMode:function(b){return(b=document.getElementById(b))&&b.control?b.control.GetMouseMode():DocuViewareAPI.Status.GenericError},SetMouseMode:function(b,d){var e=document.getElementById(b);return e&&e.control?e.control.SetMouseMode(d):
DocuViewareAPI.Status.GenericError},GetCurrentPage:function(b){return(b=document.getElementById(b))&&b.control?b.control.GetCurrentPage():-1},GetSelectedThumbnailItems:function(b){return(b=document.getElementById(b))&&b.control?b.control.GetSelectedThumbnailItems():null},SetThumbnailSelected:function(b,d,e){return(b=document.getElementById(b))&&b.control?b.control.SetThumbnailSelected(d,e):null},GetCurrentZoom:function(b){return(b=document.getElementById(b))&&b.control?b.control.GetCurrentZoom():
-1},SetCurrentZoom:function(b,d){var e=document.getElementById(b);return e&&e.control?e.control.SetCurrentZoom(d):DocuViewareAPI.Status.GenericError},SelectPage:function(b,d){var e=document.getElementById(b);return e&&e.control?e.control.SelectPage(d):DocuViewareAPI.Status.GenericError},ZoomIN:function(b,d,e){return(b=document.getElementById(b))&&b.control?b.control.ZoomIN(1,d,e):DocuViewareAPI.Status.GenericError},ZoomOUT:function(b,d,e){return(b=document.getElementById(b))&&b.control?b.control.ZoomOUT(1,
d,e):DocuViewareAPI.Status.GenericError},ZoomRect:function(b,d,e,k){return(b=document.getElementById(b))&&b.control?b.control.ZoomRect(d,e,k):DocuViewareAPI.Status.GenericError},RotateView:function(b,d){var e=document.getElementById(b);if(e&&e.control){var k=!1;"number"!=typeof d||d!=this.RotateFlipType.Rotate90FlipNone&&d!=this.RotateFlipType.Rotate180FlipNone&&d!=this.RotateFlipType.Rotate270FlipNone||(k=!0);return k?e.control.Rotate(d,0):DocuViewareAPI.Status.GenericError}return DocuViewareAPI.Status.GenericError},
RotatePage:function(b,d){var e=document.getElementById(b);if(e&&e.control){var k=!1;"number"!=typeof d||d!=this.RotateFlipType.Rotate90FlipNone&&d!=this.RotateFlipType.Rotate180FlipNone&&d!=this.RotateFlipType.Rotate270FlipNone||(k=!0);return k?e.control.Rotate(d,1):DocuViewareAPI.Status.GenericError}return DocuViewareAPI.Status.GenericError},ToggleSinglePageViewMode:function(b){return(b=document.getElementById(b))&&b.control?b.control.ToggleSinglePageViewMode():DocuViewareAPI.Status.GenericError},
SetZoomWidthViewer:function(b){return(b=document.getElementById(b))&&b.control?b.control.SetZoomMode(3):DocuViewareAPI.Status.GenericError},SetZoomFitViewer:function(b){return(b=document.getElementById(b))&&b.control?b.control.SetZoomMode(2):DocuViewareAPI.Status.GenericError},CloseDocument:function(b){return(b=document.getElementById(b))&&b.control?b.control.CloseDocument():DocuViewareAPI.Status.GenericError},SelectThumbnailSnapIn:function(b){return(b=document.getElementById(b))&&b.control?b.control.ShowThumbnailsSnapIn():
DocuViewareAPI.Status.GenericError},SelectBookmarksSnapIn:function(b){return(b=document.getElementById(b))&&b.control?b.control.ShowBookmarksSnapIn():DocuViewareAPI.Status.GenericError},SelectSearchSnapIn:function(b){return(b=document.getElementById(b))&&b.control?b.control.ShowSearchSnapIn():DocuViewareAPI.Status.GenericError},SelectAnnotationsSnapIn:function(b){return(b=document.getElementById(b))&&b.control?b.control.ShowAnnotationsSnapIn():DocuViewareAPI.Status.GenericError},SelectCommentsSnapIn:function(b){return(b=
document.getElementById(b))&&b.control?b.control.ShowCommentsSnapIn():DocuViewareAPI.Status.GenericError},SelectSnapIn:function(b,d){var e=document.getElementById(b);return e&&""!==d?e.control.SelectSnapIn(d):DocuViewareAPI.Status.GenericError},CollapseSnapInPanel:function(b){return(b=document.getElementById(b))&&b.control?b.control.SetSnapinsPanelVisibility(!1):DocuViewareAPI.Status.GenericError},GetSnapInPanelWidth:function(b){return(b=document.getElementById(b))&&b.control?b.control.GetSnapInPanelWidth():
0},SetSnapInPanelWidth:function(b,d){var e=document.getElementById(b);return e&&e.control?e.control.SetSnapInPanelWidth(d):DocuViewareAPI.Status.GenericError},GetSelectedText:function(b){return(b=document.getElementById(b))&&b.control?b.control.GetSelectedText():""},Search:function(b,d,e,k,n,f){if((b=document.getElementById(b))&&b.control){var m=!1;"string"===typeof d&&("undefined"===typeof f&&(f=!1),"boolean"==typeof e&&"boolean"==typeof k&&"boolean"==typeof f&&("number"!=typeof n||n!==this.SearchPageSelection.AllPages&&
n!==this.SearchPageSelection.CurrentPage||(m=!0)));return m?b.control.Search(d,e,k,f,n):DocuViewareAPI.Status.GenericError}return DocuViewareAPI.Status.GenericError},SetSearchSettings:function(b,d,e,k,n){return(b=document.getElementById(b))&&b.control?"boolean"==typeof d&&"boolean"==typeof e&&"boolean"==typeof k?"number"!=typeof n||n!==this.SearchPageSelection.AllPages&&n!==this.SearchPageSelection.CurrentPage?DocuViewareAPI.Status.GenericError:b.control.SetSearchSettings(d,e,k,n):DocuViewareAPI.Status.GenericError:
null},ClearSearch:function(b){return(b=document.getElementById(b))&&b.control?b.control.ClearSearch():DocuViewareAPI.Status.GenericError},UpdateLayout:function(b){return(b=document.getElementById(b))&&b.control?b.control.UpdateLayout():DocuViewareAPI.Status.GenericError},ExitAnnotationDrawingMode:function(b){return(b=document.getElementById(b))&&b.control?b.control.ExitAnnotationDrawingMode():DocuViewareAPI.Status.GenericError},RegisterOnAnnotationSelectedStateChanged:function(b,d){var e=document.getElementById(b);
return e&&e.control?e.control.RegisterOnAnnotationSelectedStateChanged(d):DocuViewareAPI.Status.GenericError},RegisterOnAnnotationAdded:function(b,d){var e=document.getElementById(b);return e&&e.control?e.control.RegisterOnAnnotationAdded(d):DocuViewareAPI.Status.GenericError},RegisterOnAnnotationEdited:function(b,d){var e=document.getElementById(b);return e&&e.control?e.control.RegisterOnAnnotationEdited(d):DocuViewareAPI.Status.GenericError},RegisterOnAnnotationDeleted:function(b,d){var e=document.getElementById(b);
return e&&e.control?e.control.RegisterOnAnnotationDeleted(d):DocuViewareAPI.Status.GenericError},RegisterOnFormFieldChanged:function(b,d){var e=document.getElementById(b);return e&&e.control?e.control.RegisterOnFormFieldChanged(d):DocuViewareAPI.Status.GenericError},RegisterOnPageChanged:function(b,d){var e=document.getElementById(b);return e&&e.control?e.control.RegisterOnPageChanged(d):DocuViewareAPI.Status.GenericError},RegisterOnZoomChanged:function(b,d){var e=document.getElementById(b);return e&&
e.control?e.control.RegisterOnZoomChanged(d):DocuViewareAPI.Status.GenericError},RegisterOnNewDocumentLoaded:function(b,d){var e=document.getElementById(b);return e&&e.control?e.control.RegisterOnNewDocumentLoaded(d):DocuViewareAPI.Status.GenericError},RegisterOnDocumentClosed:function(b,d){var e=document.getElementById(b);return e&&e.control?e.control.RegisterOnDocumentClosed(d):DocuViewareAPI.Status.GenericError},RegisterOnDocumentPrinted:function(b,d){var e=document.getElementById(b);return e&&
e.control?e.control.RegisterOnDocumentPrinted(d):DocuViewareAPI.Status.GenericError},RegisterOnDocumentSaved:function(b,d){var e=document.getElementById(b);return e&&e.control?e.control.RegisterOnDocumentSaved(d):DocuViewareAPI.Status.GenericError},RegisterOnTwainAcquisitionDialogAcquireButtonClick:function(b,d){var e=document.getElementById(b);return e&&e.control?e.control.RegisterOnTwainAcquisitionDialogAcquireButtonClick(d):DocuViewareAPI.Status.GenericError},RegisterOnTwainAcquisitionDialogCancelButtonClick:function(b,
d){var e=document.getElementById(b);return e&&e.control?e.control.RegisterOnTwainAcquisitionDialogCancelButtonClick(d):DocuViewareAPI.Status.GenericError},RegisterOnThumbnailsOrderChanged:function(b,d){var e=document.getElementById(b);return e&&e.control?e.control.RegisterOnThumbnailsOrderChanged(d):DocuViewareAPI.Status.GenericError},RegisterOnTextSelected:function(b,d){var e=document.getElementById(b);return e&&e.control?e.control.RegisterOnTextSelected(d):DocuViewareAPI.Status.GenericError},RegisterOnAreaSelected:function(b,
d){var e=document.getElementById(b);return e&&e.control?e.control.RegisterOnAreaSelected(d):DocuViewareAPI.Status.GenericError},RegisterOnCommentAdded:function(b,d){var e=document.getElementById(b);return e&&e.control?e.control.RegisterOnCommentAdded(d):DocuViewareAPI.Status.GenericError},RegisterOnCommentEdited:function(b,d){var e=document.getElementById(b);return e&&e.control?e.control.RegisterOnCommentEdited(d):DocuViewareAPI.Status.GenericError},RegisterOnCommentDeleted:function(b,d){var e=document.getElementById(b);
return e&&e.control?e.control.RegisterOnCommentDeleted(d):DocuViewareAPI.Status.GenericError},AddRubberStampAnnotInteractive:function(b,d,e,k){return(b=document.getElementById(b))&&b.control?b.control.AddAnnotInteractive(0,d,e,k):DocuViewareAPI.Status.GenericError},AddRectangleAnnotInteractive:function(b,d,e,k){return(b=document.getElementById(b))&&b.control?b.control.AddAnnotInteractive(1,d,e,k):DocuViewareAPI.Status.GenericError},AddRectangleHighlighterAnnotInteractive:function(b,d,e,k){return(b=
document.getElementById(b))&&b.control?b.control.AddAnnotInteractive(2,d,e,k):DocuViewareAPI.Status.GenericError},AddLineAnnotInteractive:function(b,d,e,k){return(b=document.getElementById(b))&&b.control?b.control.AddAnnotInteractive(3,d,e,k):DocuViewareAPI.Status.GenericError},AddConnectedLineAnnotInteractive:function(b,d,e,k){return(b=document.getElementById(b))&&b.control?b.control.AddAnnotInteractive(5,d,e,k):DocuViewareAPI.Status.GenericError},AddLineArrowAnnotInteractive:function(b,d,e,k){return(b=
document.getElementById(b))&&b.control?b.control.AddAnnotInteractive(4,d,e,k):DocuViewareAPI.Status.GenericError},AddEllipseAnnotInteractive:function(b,d,e,k){return(b=document.getElementById(b))&&b.control?b.control.AddAnnotInteractive(6,d,e,k):DocuViewareAPI.Status.GenericError},AddTextAnnotInteractive:function(b,d,e,k){return(b=document.getElementById(b))&&b.control?b.control.AddAnnotInteractive(8,d,e,k):DocuViewareAPI.Status.GenericError},AddStickyNoteAnnotInteractive:function(b,d,e,k){return(b=
document.getElementById(b))&&b.control?b.control.AddAnnotInteractive(9,d,e,k):DocuViewareAPI.Status.GenericError},AddFreeHandAnnotInteractive:function(b,d,e,k){return(b=document.getElementById(b))&&b.control?b.control.AddAnnotInteractive(10,d,e,k):DocuViewareAPI.Status.GenericError},AddFreeHandHighLighterAnnotInteractive:function(b,d,e,k){return(b=document.getElementById(b))&&b.control?b.control.AddAnnotInteractive(11,d,e,k):DocuViewareAPI.Status.GenericError},AddLinkAnnotInteractive:function(b,d,
e,k){return(b=document.getElementById(b))&&b.control?b.control.AddAnnotInteractive(13,d,e,k):DocuViewareAPI.Status.GenericError},AddRulerAnnotInteractive:function(b,d,e,k){return(b=document.getElementById(b))&&b.control?b.control.AddAnnotInteractive(15,d,e,k):DocuViewareAPI.Status.GenericError},AddPolyRulerAnnotInteractive:function(b,d,e,k){return(b=document.getElementById(b))&&b.control?b.control.AddAnnotInteractive(16,d,e,k):DocuViewareAPI.Status.GenericError},EnableAnnotEditionOnDblClick:function(b,
d){var e=document.getElementById(b);return e&&e.control?e.control.EnableAnnotEditionOnDblClick(d):DocuViewareAPI.Status.GenericError},ResetAnnotAutoCreateProperty:function(b,d){var e=document.getElementById(b);return e&&e.control?e.control.ResetAnnotAutoCreate(d):DocuViewareAPI.Status.GenericError},ResetAnnotToDefault:function(b,d){var e=document.getElementById(b);return e&&e.control?e.control.ResetAnnotToDefault(d):DocuViewareAPI.Status.GenericError},SetAnnotPropertiesValues:function(b,d,e){return(b=
document.getElementById(b))&&b.control?b.control.SetAnnotPropertiesValues(d,e):DocuViewareAPI.Status.GenericError},SetAnnotPropertiesToDisplay:function(b,d,e){return(b=document.getElementById(b))&&b.control?b.control.SetAnnotPropertiesToDisplay(d,e):DocuViewareAPI.Status.GenericError},ResetAnnotPropertiesToDisplayDefault:function(b,d){var e=document.getElementById(b);return e&&e.control?e.control.ResetAnnotPropertiesToDisplayDefault(d):DocuViewareAPI.Status.GenericError},SetAnnotDefaultAuthor:function(b,
d,e){return(b=document.getElementById(b))&&b.control?b.control.SetAnnotDefaultAuthor(d,e):DocuViewareAPI.Status.GenericError}},DOCUVIEWARE_JS_VERSION=30008,DocuViewareProgressbar=function(){var b,d,e,k,n,f,m={width:"100%",height:"4px",zIndex:16777271},c={width:0,height:"100%",clear:"both",transition:"height .3s"};b=function(b,c){for(var d in c)b.style[d]=c[d];b.style["float"]="left"};k=function(){var b=this,c=this.width-this.here;.1>c&&-.1<c?(n.call(this,this.here),this.moving=!1,100==this.width&&
(this.el.style.height=0,setTimeout(function(){b.cont.el.removeChild(b.el)},300))):(n.call(this,this.width-c/4),setTimeout(function(){b.go()},16))};n=function(b){this.width=b;this.el.style.width=this.width+"%"};f=function(){var b=new d(this);this.bars.unshift(b)};d=function(d){this.el=document.createElement("div");this.el.style.backgroundColor=d.opts.bg;this.here=this.width=0;this.moving=!1;this.cont=d;b(this.el,c);d.el.appendChild(this.el)};d.prototype.go=function(b){b?(this.here=b,this.moving||(this.moving=
!0,k.call(this))):this.moving&&k.call(this)};e=function(c){c=this.opts=c||{};var d;c.bg=c.bg||"#000";this.bars=[];d=this.el=document.createElement("div");b(this.el,m);c.id&&(d.id=c.id);d.style.position=c.target?"absolute":"fixed";c.target?c.target.insertBefore(d,c.target.firstChild):document.getElementsByTagName("body")[0].appendChild(d);f.call(this)};e.prototype.value=function(){return this.bars[0].here};e.prototype.go=function(b){this.bars[0].go(b);100==b&&f.call(this)};return e}(),CreateDocuViewareCursorManager=
function(b,d){return{target:b,isIE:d,cursor:null,customCursorClass:null,setStdCursor:function(b){b!=this.cursor&&(this.dropCurrentCursor(),this.cursor=b,this.target.style.cursor=this.cursor)},setCustomCursorClass:function(b){this.isIE&&(b+="IE");b!=this.customCursorClass&&(this.dropCurrentCursor(),this.customCursorClass=b,jQuery(this.target).addClass(this.customCursorClass))},dropCurrentCursor:function(){this.customCursorClass&&(jQuery(this.target).removeClass(this.customCursorClass),this.customCursorClass=
null);null!=this.cursor&&(this.cursor=null,this.target.style.cursor="")}}},CreateDocuViewareController=function(b,d,e,k,n,f,m,c,h,q,A,z,M,P,t,v,r,w,x,E){function O(a){null!=a.dom.openfile&&DocuViewareUtilities.addEvent(a.dom.openfile,"change",function(b){if(null!=b.target.files&&0!=b.target.files.length){b=b.target.files[0];var g=jQuery(a.dom.openfile);g.val("");g.replaceWith(g.clone());O(a);a.Internal.Files.uploadFile(b,0)}},!0)}if(b!=DOCUVIEWARE_JS_VERSION)t=document.getElementById("main"+c),null!=
t&&(t.style.visibility="visible"),document.write("The version of the DocuVieware javascript used is incorect. The JavaScript version version is: "+DOCUVIEWARE_JS_VERSION+". The expected version is: "+b+". Please refresh this page or contact the webmaster if the problem persists.");else{DocuViewarejQueryPlugins.register(e);var a={viewerWidth:null,viewerHeight:null,waitForInit:!1,appControllerPath:k,useIdInRoot:n,uniqueID:c,maxUploadSize:h,packetSize:q,debug:A,isSecure:d,localization:eval("("+z+")"),
UIconfig:M,snapIns:eval("("+P+")"),attachedDebugger:v,disableAnnotationDrawingModePanel:r,twainServiceUri:w,twainServiceSupportedVersion:x,twainSourceConfig:JSON.parse(E),isWindows:-1<navigator.platform.indexOf("Win"),windowsVersion:DocuViewareUtilities.getWindowsVersion(),isIOS:navigator.userAgent.match(/(iPad|iPhone|iPod)/g)?!0:!1,isSafari:0<Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor"),isIE:-1!=DocuViewareUtilities.getInternetExplorerVersion(),isIE9:9==DocuViewareUtilities.getInternetExplorerVersion(),
isIE10:10==DocuViewareUtilities.getInternetExplorerVersion(),isIE11:11==DocuViewareUtilities.getInternetExplorerVersion(),isIEorEdge:-1!=DocuViewareUtilities.getInternetExplorerVersion()||"Netscape"==navigator.appName&&-1<navigator.appVersion.indexOf("Edge"),fastMode:!0,log:function(a){this.debug&&(jQuery("#logDebug"+this.uniqueID).val(jQuery("#logDebug"+this.uniqueID).val()+a+"\n"),jQuery("#logDebug"+this.uniqueID).scrollTop(jQuery("#logDebug"+this.uniqueID)[0].scrollHeight),jQuery("#debugBar"+this.uniqueID).show())},
Internal:{Libs:{pica:{FILTER_INFO:[{win:.5,filter:function(a){return-.5<=a&&.5>a?1:0}},{win:1,filter:function(a){if(-1>=a||1<=a)return 0;if(-1.1920929E-7<a&&1.1920929E-7>a)return 1;a*=Math.PI;return Math.sin(a)/a*(.54+.46*Math.cos(a/1))}},{win:2,filter:function(a){if(-2>=a||2<=a)return 0;if(-1.1920929E-7<a&&1.1920929E-7>a)return 1;a*=Math.PI;return Math.sin(a)/a*Math.sin(a/2)/(a/2)}},{win:3,filter:function(a){if(-3>=a||3<=a)return 0;if(-1.1920929E-7<a&&1.1920929E-7>a)return 1;a*=Math.PI;return Math.sin(a)/
a*Math.sin(a/3)/(a/3)}}],toFixedPoint:function(a){return Math.floor(16384*a)},createFilters:function(a,b,c){var g=this.FILTER_INFO[a].filter,d=c/b,l=1/d,d=Math.min(1,d);a=this.FILTER_INFO[a].win/d;var p,e,f,h,m,k,n,q,r,t,v=new Int16Array((Math.floor(2*(a+1))+2)*c),S=0;for(p=0;p<c;p++){e=(p+.5)*l;f=Math.max(0,Math.floor(e-a));h=Math.min(b-1,Math.ceil(e+a));m=h-f+1;k=new Float32Array(m);m=new Int16Array(m);n=0;q=f;for(r=0;q<=h;q++,r++)t=g((q+.5-e)*d),n+=t,k[r]=t;for(r=e=0;r<k.length;r++)h=this.toFixedPoint(k[r]/
n),e+=h,m[r]=h;m[c>>1]+=this.toFixedPoint(1)-e;for(k=0;k<m.length&&0===m[k];)k++;if(k<m.length){for(n=m.length-1;0<n&&0===m[n];)n--;f+=k;r=n-k+1;v[S++]=f;v[S++]=r;v.set(m.subarray(k,n+1),S);S+=r}else v[S++]=0,v[S++]=0}return v},convolveHorizontally:function(a,b,c,d,e,f,h){var g,l,p,y,C,H,L,m,k,n,q=0,r=0;for(m=0;m<e;m++){for(k=C=0;k<f;k++){g=h[C++];H=h[C++];L=q+4*g|0;for(g=l=p=y=0;0<H;H--)n=h[C++],0!=n&&(a&&(y=y+n*b[L+3]|0),p=p+n*b[L+2]|0,l=l+n*b[L+1]|0,g=g+n*b[L]|0),L=L+4|0;c[r+3]=a&&4169728>y?y+
8192>>14:255;c[r+2]=4169728>p?p+8192>>14:255;c[r+1]=4169728>l?l+8192>>14:255;c[r]=4169728>g?g+8192>>14:255;r=r+4*e|0}r=4*(m+1)|0;q=(m+1)*d*4|0}},convolveVertically:function(a,b,c,d,e,f,h){var g,l,p,y,C,H,L,m,k,n,q=0,r=0;for(m=0;m<e;m++){for(k=C=0;k<f;k++){g=h[C++];H=h[C++];L=q+4*g|0;for(g=l=p=y=0;0<H;H--)n=h[C++],0!=n&&(a&&(y=y+n*b[L+3]|0),p=p+n*b[L+2]|0,l=l+n*b[L+1]|0,g=g+n*b[L]|0),L=L+4|0;c[r+3]=a&&4169728>y?y+8192>>14:255;c[r+2]=4169728>p?p+8192>>14:255;c[r+1]=4169728>l?l+8192>>14:255;c[r]=4169728>
g?g+8192>>14:255;r=r+4*e|0}r=4*(m+1)|0;q=(m+1)*d*4|0}},resize:function(a){var b=a.width,g=a.height,c=a.toWidth,d=a.toHeight,e=a.dest||new DocuViewareEncodingUtilities.TypedArray.Uint8Array(c*d*4),f="undefined"===typeof a.quality?3:a.quality,h=a.alpha||!1;if(1>b||1>g||1>c||1>d)return[];var m=this.createFilters(f,b,c),f=this.createFilters(f,g,d),k=new DocuViewareEncodingUtilities.TypedArray.Uint8Array(c*g*4);this.convolveHorizontally(h,a.src,k,b,g,c,m);this.convolveVertically(h,k,e,g,c,d,f);return e}}},
Capabilities:{hasWebPSupport:function(){var a=document.createElement("canvas");return a.getContext&&a.getContext("2d")?0==a.toDataURL("image/webp").indexOf("data:image/webp"):!1},hasTiffSupport:function(){return a.isIE}},Utilities:{normalizeRotation:function(a){a%=360;0>a&&(a+=360);return a},rgb2hex:function(a,b,c){return"#"+(16777216+(c|b<<8|a<<16)).toString(16).slice(1)},color2Hex:function(a){return"#"===a.substr(0,1)?a:(a=a.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i))&&
4===a.length?"#"+("0"+parseInt(a[1],10).toString(16)).slice(-2)+("0"+parseInt(a[2],10).toString(16)).slice(-2)+("0"+parseInt(a[3],10).toString(16)).slice(-2):""},color2Object:function(a){"#"===a.substr(0,1)&&(a=this.hex2Rgb(a));return(a=a.match(/^(?:rgb|rgba)\s*\(\s*(\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})(?:,\s*(\d?\.\d+))?\s*\)$/i))&&5===a.length?{r:parseInt(a[1]),g:parseInt(a[2]),b:parseInt(a[3]),a:a[4]?parseFloat(a[4]):1}:null},hex2Rgb:function(a){return"#"!==a.substr(0,1)?"":"rgb("+(a>>16)+","+(a>>
8&255)+","+(a&255)+")"},roundEx:function(a,b){var g=Math.pow(10,b);return Math.round(a*g)/g},pageRangeChecker:function(a,b){if(""!=b&&"*"!=b){var g=b.split(";"),c=/([0-9])/,d;for(d in g){var l=g[d].split("-");if(2>=l.length)for(var e in l){if(1!=c.test(l[e])||0==parseInt(l[e])||parseInt(l[e])>a)return!1}else return!1}}return!0},pageRangeToArrayConverter:function(b){var g=a.serverCtx.pageCount,c=(b+"").replace(/\s+/g,""),d=[];if("*"==b||""==b){for(c=1;c<=g;c++)d.push(c);return d}b=-1!=b.indexOf(";")?
";":",";var c=c.split(b),e,f;for(b=0;b<c.length;b++)if(e=c[b].split("-"),1===e.length)d.push(parseInt(e[0],10));else if(2===e.length&&(f=parseInt(e[0],10),e=parseInt(e[1],10),!(e<f)))for(;f<=e;f++)d.push(f);return d=d.filter(function(a,b,c){return c.indexOf(a)===b&&0<a&&a<=g}).sort(function(a,b){return a-b})}},Thumbnails:{lastUpdatedPageThumbnail:-1,selectedItems:[],THUMBNAIL_SHADOW_OFFSET:3,THUMBNAIL_SHADOW_BLUR:6,THUMBNAIL_SHADOW_COLOR:"gray",getThumbnailPage:function(a){if(null!=a){var b=a.getAttribute("data-pageNo");
if(b)return parseInt(b);if(null!=a.parentNode&&a.parentNode.getAttribute("data-pageNo"))return parseInt(a.parentNode.getAttribute("data-pageNo"))}return 0},setThumbnailPageDest:function(a,b){return null!=a?(a.setAttribute("data-pageNo",b.toString()),DocuViewareAPI.Status.OK):DocuViewareAPI.Status.GenericError},setThumbnailText:function(a,b){return null!=a?(a.children[1].innerHTML="<p align=center style='margin: 0 0 0 0;'><font size='-3'>"+b+"</font></p>",DocuViewareAPI.Status.OK):DocuViewareAPI.Status.GenericError},
getThumbnailFromPageNo:function(b){b=jQuery(a.dom.thumbnailArea).children("[data-pageNo="+b+"]");return 0<b.length?b:null},getThumbnailAt:function(b,c){for(var g=a.dom.thumbnailArea.childElementCount,d=!1,l=0;l<g;l++){var e=a.dom.thumbnailArea.children[l];if(0!=a.Internal.Thumbnails.getThumbnailPage(e)){var f=jQuery(e).position().top;if(f+jQuery(e).innerHeight()>=c&&f<=c){f=jQuery(e).position().left;if(f+jQuery(e).innerWidth()>=b&&f<=b)return e;d|=1}else if(d)break}}return null},createThumbnail:function(b){var g=
document.createElement("div");a.Internal.Thumbnails.setThumbnailPageDest(g,b);g.setAttribute("data-loaded","false");g.setAttribute("data-loading","false");g.setAttribute("data-moving","false");g.onmouseover=a.events.onThumbnailItemMouseOverHandler;g.onmouseout=a.events.onThumbnailItemMouseOutHandler;g.onclick=a.events.onThumbnailItemClickHandler;var c=document.createElement("canvas");c.className="spinner-thumb";c.width=a.dom.UIconfig.thumbnailWidth*DocuViewareUtilities.getDevicePixelRatio()+2*this.THUMBNAIL_SHADOW_OFFSET;
c.height=a.dom.UIconfig.thumbnailHeight*DocuViewareUtilities.getDevicePixelRatio()+2*this.THUMBNAIL_SHADOW_OFFSET;c.style.width=a.dom.UIconfig.thumbnailWidth+2*this.THUMBNAIL_SHADOW_OFFSET+"px";c.style.height=a.dom.UIconfig.thumbnailHeight+2*this.THUMBNAIL_SHADOW_OFFSET+"px";g.appendChild(c);c=document.createElement("div");c.style.position="relative";g.appendChild(c);a.Internal.Thumbnails.setThumbnailText(g,b.toString());return g},getSelectedThumbnails:function(b){var g=a.Internal.Thumbnails.selectedItems.slice();
b&&g.sort(function(a,b){return a-b});return g},setThumbnailSelected:function(a,b){return b?this.selectThumbnail(a):this.unselectThumbnail(a)},selectThumbnail:function(b){if(1>b||b>a.GetPageCount())return DocuViewareAPI.Status.GenericError;-1==this.selectedItems.indexOf(b)&&(this.selectedItems.push(b),a.dom.updateThumbStyle(b));return DocuViewareAPI.Status.OK},unselectThumbnail:function(b){if(1>b||b>a.GetPageCount())return DocuViewareAPI.Status.GenericError;this.selectedItems&&-1<this.selectedItems.indexOf(b)&&
(this.selectedItems.splice(this.selectedItems.indexOf(b),1),a.dom.updateThumbStyle(b));return DocuViewareAPI.Status.OK},isThumbnailSelected:function(a){return this.selectedItems?-1<this.selectedItems.indexOf(a):!1},toggleThumbnailSelection:function(b){return 1>b||b>a.GetPageCount()?DocuViewareAPI.Status.GenericError:this.isThumbnailSelected(b)?this.unselectThumbnail(b):this.selectThumbnail(b)},reinitThumbnailsSelection:function(){var b=this.selectedItems;this.selectedItems=[];if(0!=b.length)for(var c=
0;c<b.length;c++)a.dom.updateThumbStyle(b[c])},reinitThumbnails:function(){a.Internal.Thumbnails.reinitThumbnailsSelection();for(var b=a.dom.thumbnailArea.childElementCount,c=0;c<b;c++){var d=a.dom.thumbnailArea.children[c];a.Internal.Thumbnails.setThumbnailPageDest(d,c+1);a.Internal.Thumbnails.setThumbnailText(d,(c+1).toString())}},removeAllThumbnails:function(){this.selectedItems=[];if(a.dom.thumbnailArea)for(;a.dom.thumbnailArea.hasChildNodes();)a.dom.thumbnailArea.removeChild(a.dom.thumbnailArea.lastChild)}},
Files:{MAX_UPLOAD_THREADS:5,uploadThreads:0,uploadState:0,uploading:!1,uploadChunks:0,uploadFile:function(b,c){var g=b.size;if(0!=g)if(a.dom.maxUploadSize<g){var g=alert,d=a.Localize("error__upload_max_size"),l;l=a.dom.maxUploadSize;l=0<=l&&1024>l?l+" B":1024<=l&&1048576>l?(l/1024).toFixed(2)+" KB":1048576<=l&&1073741824>l?(l/1048576).toFixed(2)+" MB":1073741824<=l&&1099511627776>l?(l/1073741824).toFixed(2)+" GB":1099511627776<=l?(l/1099511627776).toFixed(2)+" TB":l+" B";g(d+l+".")}else{for(var d=
[],e=l=0,f=a.dom.packetSize>g?g:a.dom.packetSize;e<g;)l++,d.push(b.slice(e,f)),e=f,f=e+a.dom.packetSize;e=0;f=Date.now();for(a.debug&&console.log("DocuVieware: uploadFile::creating packets");e<l;)this.uploadChunk(f,b.name,d[e],l,e+1,g,c),e++;a.debug&&console.log("DocuVieware: uploadFile::"+l+" packets generated")}},uploadChunk:function(b,c,d,e,f,H,h){function g(b,g){jQuery(a.dom.mainSpinner).show();a.ajax.transferID=b;a.Internal.Files.uploading=!0;a.Internal.Files.uploadState=0;a.Internal.Files.uploadThreads=
0;a.Internal.Files.uploadChunks=g;a.dom.progressbar.go(0);var c=jQuery(a.dom.mainSpinnerContent);c.children(c.children.length-1).text(a.Localize("label__loading_progress"))}a.ajax.transferID!=b&&g(b,e);if(1==a.Internal.Files.uploading)if(a.Internal.Files.uploadThreads>=a.Internal.Files.MAX_UPLOAD_THREADS)setTimeout(function(){a.Internal.Files.uploadChunk(b,c,d,e,f,H,h)},10);else{a.Internal.Files.uploadThreads++;var l=new FileReader;if(null==l.readAsBinaryString)if(a.isIE11){var l=URL.createObjectURL(d),
p=new XMLHttpRequest;p.open("get",l,!0);p.responseType="arraybuffer";p.onload=function(){if(200==this.status){for(var g=new Uint8Array(this.response),d=g.length,l=Array(d);d--;)l[d]=String.fromCharCode(g[d]);g=window.btoa(l.join(""));a.Internal.Files.transferChunk(b,c,g,e,f,H,h)}};p.send()}else l.onload=function(g){g=new DocuViewareEncodingUtilities.TypedArray.Uint8Array(this.result);g=DocuViewareEncodingUtilities.base64.encode(function(a){for(var b=a.length,g=Array(b);b--;)g[b]=String.fromCharCode(a[b]);
return g.join("")}(g));a.Internal.Files.transferChunk(b,c,g,e,f,H,h)},l.readAsArrayBuffer(d);else l.onload=function(g){g=DocuViewareEncodingUtilities.base64.encode(g.target.result);a.Internal.Files.transferChunk(b,c,g,e,f,H,h)},l.readAsBinaryString(d)}},transferChunk:function(b,c,d,e,f,H,h){function g(b){a.Internal.Files.uploading=!1;a.dom.progressbar.go(100);jQuery(a.dom.mainSpinner).hide();if(b){if(a.callbacks.onFileOpenSuccess)a.callbacks.onFileOpenSuccess()}else if(a.callbacks.onFileOpenError)a.callbacks.onFileOpenError()}
b=JSON.stringify({transferID:a.ajax.transferID,sessionID:a.ajax.sessionID,appendMode:h,fileName:c,fileSize:H,data:d,chunkCount:e,chunkID:f});var l={url:a.appControllerPath+"/loadfromfile"+(a.useIdInRoot?"/1":""),data:b,async:!0,beforeSend:function(){return a.Internal.Files.uploading},success:function(b){a.Internal.Files.uploadThreads--;if(a.Internal.Files.uploading)if((b="string"===typeof b?eval("("+b+")"):b)&&b.status==DocuViewareAPI.Status.OK)if(b.isTransfering){a.Internal.Files.uploadState+=100/
a.Internal.Files.uploadChunks;a.dom.progressbar.go(a.Internal.Files.uploadState);b=jQuery(a.dom.mainSpinnerContent);var c=parseFloat(Math.round(100*a.Internal.Files.uploadState)/100).toFixed(2);b.children(b.children.length-1).text(a.Localize("label__loading_progress")+" ("+c+"%)")}else g(!0),a.ajax.SetNewServerCtx(b);else b&&b.status!=DocuViewareAPI.Status.OK&&null!=b.responseType&&"DocuVieware"===b.responseType&&b.allowRetry?(console.log("DocuVieware: Failed to upload packet: "+f.toString()+". Retrying..."),
a.ajax.PostAjaxRequestForDocuViewareAction(l)):(g(!1),a.ajax.HandleError(b))},error:function(b){a.ajax.HandleError(b);g(!1);a.Internal.Files.uploadThreads--}};a.ajax.PostAjaxRequestForDocuViewareAction(l)}},Print:{MAX_PRINTING_THREADS:3,printThreads:0,isPrinting:!1,printPages:function(b,c,d,e,f,H){if(a.hasPendingAction(!0))return DocuViewareAPI.Status.GenericError;a.isIE&&a.IsFullScreenMode()&&a.ToggleFullscreen();if(c&&!a.Internal.Utilities.pageRangeChecker(a.GetPageCount(),c))return a.DisplayError(a.Localize("error__invalid_page_range")),
DocuViewareAPI.Status.GenericError;if("0"==d)if(a.Internal.Utilities.pageRangeToArrayConverter(c)){d=function(){a.Internal.Print.isPrinting=!1;H&&H()};var g=function(b,g){if(a.Internal.Print.isPrinting&&(p[b-1]=g,y++,e&&e(y,l.length),y==l.length)){var c=document.createElement("iframe");document.body.appendChild(c);c.contentWindow.document.open();c.contentWindow.document.write("<!doctype html>");c.contentWindow.document.write("<html style='width:100%;height:100%'><head><title>"+a.serverCtx.fileName+
"</title><style media='print'>@page{size:auto;margin:0;}</style></head><body onload='if(document.queryCommandSupported(\"print\")){document.execCommand(\"print\",false,null);}else{this.focus();this.print();}' style='width:100%;height:100%;margin:0'>");for(var d=0;d<y;d++)0<d&&c.contentWindow.document.write("<div style='page-break-before:always;width:0;height:0;margin:0;padding:0'></div>"),c.contentWindow.document.write(p[l[d]-1]),"function"==typeof CollectGarbage&&CollectGarbage();c.contentWindow.document.write("</body></html>");
c.contentWindow.document.close();setTimeout(function(){document.body.removeChild(c)},6E3);a.Internal.Print.isPrinting=!1;f&&f();if(a.callbacks.onDocumentPrinted)a.callbacks.onDocumentPrinted()}},l=a.Internal.Utilities.pageRangeToArrayConverter(c),p=[],y=0;a.Internal.Print.isPrinting=!0;for(c=0;c<l.length;c++)this.getPageForPrint(b,l[c],l.length,g,d)}else return DocuViewareAPI.Status.GenericError;else if(window.open(a.appControllerPath+"/print"+(a.useIdInRoot?"/1":"")+"?sessionID="+a.ajax.sessionID+
"&pageRange="+(c?c:"*")+"&printAnnotations="+b,"_blank"),f&&f(),a.callbacks.onDocumentPrinted)a.callbacks.onDocumentPrinted();return DocuViewareAPI.Status.OK},getPageForPrint:function(b,c,d,e,f){1==a.Internal.Print.isPrinting&&(a.Internal.Print.printThreads>=a.Internal.Print.MAX_PRINTING_THREADS?setTimeout(function(){a.Internal.Print.getPageForPrint(b,c,d,e,f)},10):(a.Internal.Print.printThreads++,a.ajax.requestNo+=1,a.ajax.PostAjaxRequestForDocuViewareAction({url:a.appControllerPath+"/print"+(a.useIdInRoot?
"/1":""),async:!0,data:JSON.stringify({sessionID:a.ajax.sessionID,contextID:a.ajax.contextID,entries:[c],requestNo:a.ajax.requestNo,printAnnotations:b,isIE:a.isIE,pageCount:d}),success:function(b){if((b="string"===typeof b?eval("("+b+")"):b)&&b.status==DocuViewareAPI.Status.OK&&b.contextID==a.ajax.contextID)for(var g=0;g<b.images.length;g++){var c=null;if(b.images[g].getFromCache){var d=a.cache.getPageObject(b.images[g].pageNo);d&&(c=d.bitmap,c.style.display="block",c.style.maxWidth="99.5%",c.style.maxHeight=
"99.5%",c.style.margin="0 auto",c.style.padding="0",c.style.height="auto",c.style.width="auto",c=c.outerHTML)}else b.images[g].mime&&b.images[g].data&&(c="<img src='data:"+b.images[g].mime+";base64,"+b.images[g].data+"' style='display: block; max-width: 99.5%; max-height: 99.5%; margin: 0 auto; padding: 0; height: auto; width: auto;'>",b.images[g].setInCache&&a.cache.cachePageBitmap(b.images[g].pageNo,b.images[g].mime,b.images[g].data,b.images[g].scale,b.images[g].hasTransparency));e&&e(b.images[g].pageNo,
c)}"function"==typeof CollectGarbage&&CollectGarbage()},error:function(b){a.ajax.HandleError(b);f&&f()},complete:function(b){a.Internal.Print.printThreads--}})))}},Selection:{getSelectionAreaCoordinates:function(){var b={left:0,top:0,width:0,height:0};if((3==a.events.mouseMode||4==a.events.mouseMode)&&0<jQuery(a.dom.rselect).width()&&jQuery(a.dom.rselect).height()){var c=a.Internal.Pages.getRenderingState(a.GetCurrentPage()),d=a.dom.viewerArea.getBoundingClientRect(),e=a.dom.rselect.getBoundingClientRect(),
d={left:e.left-d.left-c.pageLeft+a.Internal.Coordinates.getViewerScrollLeft(),top:e.top-d.top-c.pageTop+a.Internal.Coordinates.getViewerScrollTop(),width:jQuery(a.dom.rselect).width(),height:jQuery(a.dom.rselect).height()},c=a.Internal.Matrix.scale(a.Internal.Matrix.invert(c.contentMatrix),1/96,1/96,!1);a.Internal.Matrix.transformBBox(c,0,d);b.left=a.Internal.Utilities.roundEx(d.left,7);b.top=a.Internal.Utilities.roundEx(d.top,7);b.width=a.Internal.Utilities.roundEx(d.width,7);b.height=a.Internal.Utilities.roundEx(d.height,
7)}return b},setSelectionAreaCoordinates:function(b){if(!a.serverCtx.documentLoaded||"object"!==typeof b||!b.left&&0!=b.left||!b.top&&0!=b.top||!b.width||!b.height)return DocuViewareAPI.Status.GenericError;var g=a.Internal.Pages.getRenderingState(a.GetCurrentPage()),c=a.Internal.Matrix.scale(g.contentMatrix,96,96,!1);a.Internal.Matrix.transformBBox(c,0,b);var c=b.left+g.pageLeft,d=b.top+g.pageTop,e=b.width;b=b.height;if(c<g.pageLeft||c+e>g.pageLeft+g.pageWidth||d<g.pageTop||d+b>g.pageTop+g.pageHeight)return DocuViewareAPI.Status.GenericError;
3!=a.events.mouseMode&&4!=a.events.mouseMode&&a.SetMouseMode(3);this.selectionArea.startNewSelectionBox(c,d,!0);a.dom.rselect.style.height=b+"px";a.dom.rselect.style.width=e+"px";a.dom.rselect.height=b;a.dom.rselect.width=e;this.selectionArea.show();return DocuViewareAPI.Status.OK},clearSelectionArea:function(){this.selectionArea.reset()},selectionArea:{isMoving:!1,isSelected:!1,isOver:!1,resizingMode:-1,lineMode:0,startX:0,startY:0,antOffset:0,dashList:[4,4,4,4],dashLength:0,init:function(b){a.dom.rselect=
document.createElement("canvas");a.dom.rselect.style.zIndex=16777271;a.dom.rselect.style.display="block";a.dom.rselect.style.position="absolute";a.dom.rselect.style.height="0px";a.dom.rselect.style.width="0px";a.dom.rselect.style.left="0px";a.dom.rselect.style.top="0px";a.dom.rselect.style.padding="0px";a.dom.rselect.style.margin="0px";a.dom.rselect.style.visibility="hidden";a.dom.rselect.onmouseup=function(b){return a.Internal.Selection.selectionArea.mouseUp(b)};a.dom.rselect.onmousedown=function(b,
g){return a.Internal.Selection.selectionArea.mouseDown(b,g)};a.dom.rselect.onmouseenter=function(b,g){return a.Internal.Selection.selectionArea.mouseEnter(b,g)};a.dom.rselect.onmousemove=function(b,g){return a.Internal.Selection.selectionArea.mouseMove(b,g)};a.dom.rselect.onmouseleave=function(b,g){return a.Internal.Selection.selectionArea.mouseLeave(b,g)};b.appendChild(a.dom.rselect)},reset:function(){if(3==a.events.mouseMode||4==a.events.mouseMode)this.isOver=this.isSelected=this.isMoving=!1,this.resizingMode=
-1,a.dom.rselect.style.height="0px",a.dom.rselect.style.width="0px",a.dom.rselect.height=0,a.dom.rselect.width=0,this.hide()},show:function(){a.dom.rselect&&(a.dom.rselect.style.visibility="visible")},hide:function(){a.dom.rselect&&(a.dom.rselect.style.visibility="hidden")},getCornerHitTest:function(a,b,c,d){return a>=c.left-d&&a<=c.left+d&&b>=c.top-d&&b<=c.top+d?0:a>=c.right-d&&a<=c.right+d&&b>=c.top-d&&b<=c.top+d?1:a>=c.right-d&&a<=c.right+d&&b<=c.bottom+d&&b>=c.bottom-d?2:a>=c.left-d&&a<=c.left+
d&&b<=c.bottom+d&&b>=c.bottom-d?3:a>=c.left-d&&a<=c.left+d?4:b>=c.top-d&&b<=c.top+d?5:a>=c.right-d&&a<=c.right+d?6:b<=c.bottom+d&&b>=c.bottom-d?7:-1},getGripSize:function(a){return 6*(a?3:1)},getStartPosition:function(){var b=a.Internal.Pages.getRenderingState(a.GetCurrentPage());return{x:this.startX-b.pageLeft,y:this.startY-b.pageTop}},getPageBounds:function(){var b=a.Internal.Pages.getRenderingState(a.GetCurrentPage()),c=a.dom.viewerArea.getBoundingClientRect(),d=a.dom.rselect.getBoundingClientRect();
return{left:d.left-c.left-b.pageLeft+a.Internal.Coordinates.getViewerScrollLeft(),top:d.top-c.top-b.pageTop+a.Internal.Coordinates.getViewerScrollTop(),width:d.width,height:d.height}},setCursor:function(b){if(this.isSelected&&this.isOver||this.isSelected&&this.isMoving){if(this.isMoving)b=this.resizingMode;else{b=this.getGripSize(b);var g=a.dom.rselect.getBoundingClientRect();b=this.getCornerHitTest(a.events.mouseX,a.events.mouseY,g,b)}switch(b){case 0:a.dom.viewerArea.cursorMgr.setStdCursor("nw-resize");
break;case 1:a.dom.viewerArea.cursorMgr.setStdCursor("ne-resize");break;case 2:a.dom.viewerArea.cursorMgr.setStdCursor("nwse-resize");break;case 3:a.dom.viewerArea.cursorMgr.setStdCursor("nesw-resize");break;case 4:a.dom.viewerArea.cursorMgr.setStdCursor("w-resize");break;case 5:a.dom.viewerArea.cursorMgr.setStdCursor("n-resize");break;case 6:a.dom.viewerArea.cursorMgr.setStdCursor("w-resize");break;case 7:a.dom.viewerArea.cursorMgr.setStdCursor("n-resize");break;default:a.dom.viewerArea.cursorMgr.setStdCursor("all-scroll")}}else this.isOver&&
!this.isDrawing?a.dom.viewerArea.cursorMgr.setStdCursor("all-scroll"):a.dom.viewerArea.cursorMgr.setStdCursor("crosshair")},setSelectionRectangleStyle:function(b){a.dom.rselect&&(b?(a.dom.rselect.style.backgroundColor=a.dom.UIconfig.activeSelectedBackgroundColor,a.dom.rselect.style.borderStyle="none",a.dom.rselect.style.borderWidth="0px"):(a.dom.rselect.style.backgroundColor="rgba(0,0,255,0.2)",a.dom.rselect.style.borderStyle="solid",a.dom.rselect.style.borderColor="red",a.dom.rselect.style.borderWidth=
"1px"))},setLineMode:function(a){this.lineMode=a},startNewAnnotBox:function(b,c){this.stopDrawingAnts();this.startX=b;this.startY=c;a.dom.rselect.style.left=b+"px";a.dom.rselect.style.top=c+"px";a.dom.rselect.style.height="1px";a.dom.rselect.style.width="1px";a.dom.rselect.height=jQuery(a.dom.rselect).height();a.dom.rselect.width=jQuery(a.dom.rselect).width();a.dom.rselect.getContext("2d").clearRect(0,0,a.dom.rselect.width,a.dom.rselect.height);this.show();this.isDrawing=!0},startNewSelectionBox:function(b,
c,d){this.stopDrawingAnts();this.isSelected=!1;this.startX=b;this.startY=c;a.dom.rselect.style.left=b+"px";a.dom.rselect.style.top=c+"px";a.dom.rselect.style.height="0px";a.dom.rselect.style.width="0px";a.dom.rselect.height=jQuery(a.dom.rselect).height();a.dom.rselect.width=jQuery(a.dom.rselect).width();a.dom.rselect.getContext("2d").clearRect(0,0,a.dom.rselect.width,a.dom.rselect.height);for(b=this.dashLength=this.antOffset=0;b<this.dashList.length;b++)this.dashLength+=this.dashList[b];this.drawingAnts();
d||(this.isDrawing=!0)},drawingAnts:function(){a.Internal.Selection.selectionArea.antOffset++;a.Internal.Selection.selectionArea.antOffset>a.Internal.Selection.selectionArea.dashLength&&(a.Internal.Selection.selectionArea.antOffset=0);a.Internal.Selection.selectionArea.draw();a.Internal.Selection.selectionArea.drawingAntsOn=setTimeout(a.Internal.Selection.selectionArea.drawingAnts,20)},stopDrawingAnts:function(){this.drawingAntsOn&&(clearTimeout(this.drawingAntsOn),this.drawingAntsOn=null)},draw:function(){if(3==
a.events.mouseMode||4==a.events.mouseMode){var b=a.dom.rselect.getContext("2d");b.clearRect(0,0,a.dom.rselect.width,a.dom.rselect.height);b.lineWidth="1";b.strokeStyle=a.dom.UIconfig.activeSelectedColor;b.setLineDash?(b.setLineDash(this.dashList),b.lineDashOffset=-this.antOffset,b.strokeRect(0,0,a.dom.rselect.width,a.dom.rselect.height)):(b.beginPath(),this.drawDashedLine(b,0,0,a.dom.rselect.width,0,this.dashList,this.antOffset),this.drawDashedLine(b,a.dom.rselect.width,0,a.dom.rselect.width,a.dom.rselect.height,
this.dashList,this.antOffset),this.drawDashedLine(b,a.dom.rselect.width,a.dom.rselect.height,0,a.dom.rselect.height,this.dashList,this.antOffset),this.drawDashedLine(b,0,a.dom.rselect.height,0,0,this.dashList,this.antOffset),b.closePath(),b.stroke())}},drawDashedLine:function(a,b,c,d,e,f,h){var g=f.length,l=0;for(G=0;G<g;G++)l+=parseInt(f[G]);d-=b;e-=c;var p=d?e/d:1E15;h=l*(1-h/l);h=Math.sqrt(h*h/(1+p*p));if(0>d||0>e)h=-h;b-=h;d+=h;c-=p*h;e+=p*h;a.moveTo(b,c);h=Math.sqrt(d*d+e*e);for(var l=0,y=!0;.1<=
h;){var C=f[l++%g];C>h&&(C=h);var H=Math.sqrt(C*C/(1+p*p));if(0>d||0>e)H=-H;b+=H;c+=p*H;a[y?"lineTo":"moveTo"](b,c);h-=C;y=!y}},mouseUp:function(b){if(1==a.events.mouseMode&&this.isDrawing)return this.isDrawing=!1,this.hide(),a.Internal.Annotations.addAnnotInteractive(),!0;if(4==a.events.mouseMode&&this.isDrawing)return b=a.GetSelectionAreaCoordinates(),this.reset(),this.isDrawing=!1,a.ZoomRect(b),!0;if(3==a.events.mouseMode&&this.isDrawing){this.isDrawing=!1;if(0==jQuery(a.dom.rselect).width()&&
0==jQuery(a.dom.rselect).height())this.hide();else if(this.isSelected=!0,a.callbacks.onAreaSelected)a.callbacks.onAreaSelected();return!0}return 3==a.events.mouseMode&&this.isMoving?(this.isMoving=!1,0==jQuery(a.dom.rselect).width()&&0==jQuery(a.dom.rselect).height()&&this.hide(),-1!=this.resizingMode&&(this.resizingMode=-1,this.setCursor()),!0):!1},mouseDown:function(b,c){a.events.mouseX=b.clientX;a.events.mouseY=b.clientY;a.events.mouseDownClientX=b.clientX;a.events.mouseDownClientY=b.clientY;this.isSelected=
this.isMoving=!0;var g=this.getGripSize(c),d=a.dom.rselect.getBoundingClientRect();this.resizingMode=this.getCornerHitTest(b.clientX,b.clientY,d,g);b.stopImmediatePropagation();b.preventDefault();return!1},mouseMove:function(b,c){this.setCursor(c);if(1==a.events.mouseMode){var g=a.dom.viewerArea.getBoundingClientRect(),d=b.clientX-a.events.mouseDownX+a.Internal.Coordinates.getViewerScrollLeft(),l=b.clientY-a.events.mouseDownY+a.Internal.Coordinates.getViewerScrollTop();a.dom.rselect.style.width=Math.abs(d)+
"px";a.dom.rselect.style.height=Math.abs(l)+"px";a.dom.rselect.width=Math.abs(d);a.dom.rselect.height=Math.abs(l);a.dom.rselect.style.left=0>d?b.clientX-g.left+a.Internal.Coordinates.getViewerScrollLeft()+"px":a.events.mouseDownX-g.left+"px";a.dom.rselect.style.top=0>l?b.clientY-g.top+a.Internal.Coordinates.getViewerScrollTop()+"px":a.events.mouseDownY-g.top+"px";1==this.lineMode&&(g=a.dom.rselect.getContext("2d"),g.lineWidth=96*a.Internal.Annotations.currentAnnotProperties.borderWidth*a.GetCurrentZoom(),
g.strokeStyle=a.Internal.Annotations.currentAnnotProperties.strokeColor,g.clearRect(0,0,a.dom.rselect.width,a.dom.rselect.height),g.beginPath(),g.moveTo(0<d?0:a.dom.rselect.width,0<l?0:a.dom.rselect.height),g.lineTo(0>d?0:a.dom.rselect.width,0>l?0:a.dom.rselect.height),g.stroke());return!0}if((3==a.events.mouseMode||4==a.events.mouseMode)&&this.isDrawing){var g=a.dom.viewerArea.getBoundingClientRect(),e=b.pageX-g.left+a.Internal.Coordinates.getViewerScrollLeft(),f=b.pageY-g.top+a.Internal.Coordinates.getViewerScrollTop(),
h=this.startX,m=this.startY+a.Internal.Coordinates.getViewerScrollTop(),k=a.Internal.Pages.getRenderingState(a.GetCurrentPage()),n=null;h>=k.pageLeft&&h<=k.pageLeft+k.pageWidth?n=this.startX+g.left:h<k.pageLeft?n=g.left+k.pageLeft:h>k.pageLeft+k.pageWidth&&(n=g.left+k.pageLeft+k.pageWidth);var q=null;m>=a.Internal.Coordinates.getViewerScrollTop()+k.pageTop&&m<=a.Internal.Coordinates.getViewerScrollTop()+k.pageTop+k.pageHeight?q=this.startY+g.top:m<a.Internal.Coordinates.getViewerScrollTop()+k.pageTop?
q=g.top+k.pageTop:m>a.Internal.Coordinates.getViewerScrollTop()+k.pageTop+k.pageHeight&&(q=g.top+k.pageTop+k.pageHeight);n&&q&&(d=b.clientX-n+a.Internal.Coordinates.getViewerScrollLeft(),l=b.clientY-q+a.Internal.Coordinates.getViewerScrollTop(),e<=k.pageLeft+k.pageWidth?a.dom.rselect.style.width=e>=k.pageLeft?Math.abs(d)+"px":jQuery(a.dom.rselect).position().left+jQuery(a.dom.rselect).width()-k.pageLeft+"px":h<=a.Internal.Coordinates.getViewerScrollLeft()+k.pageLeft+k.pageWidth?a.dom.rselect.style.width=
k.pageLeft+k.pageWidth-jQuery(a.dom.rselect).position().left+"px":a.dom.rselect.style.width="0px",f<=k.pageTop+k.pageHeight?a.dom.rselect.style.height=f>=k.pageTop?Math.abs(l)+"px":jQuery(a.dom.rselect).position().top+jQuery(a.dom.rselect).height()-k.pageTop+"px":m<=a.Internal.Coordinates.getViewerScrollTop()+k.pageTop+k.pageHeight?a.dom.rselect.style.height=k.pageTop+k.pageHeight-jQuery(a.dom.rselect).position().top+"px":a.dom.rselect.style.height="0px",a.dom.rselect.style.left=0>d?e>=k.pageLeft?
b.clientX-g.left+a.Internal.Coordinates.getViewerScrollLeft()+"px":k.pageLeft+"px":n-g.left+"px",a.dom.rselect.style.top=0>l?f>=rte.pageTop?b.clientY-g.top+a.Internal.Coordinates.getViewerScrollTop()+"px":k.pageTop+"px":q-g.top+"px");a.dom.rselect.width=jQuery(a.dom.rselect).width();a.dom.rselect.height=jQuery(a.dom.rselect).height();0<jQuery(a.dom.rselect).width()&&0<jQuery(a.dom.rselect).height()&&this.show();return!0}if((3==a.events.mouseMode||4==a.events.mouseMode)&&this.isMoving){k=a.Internal.Pages.getRenderingState(a.GetCurrentPage());
g=a.dom.viewerArea.getBoundingClientRect();e=a.dom.rselect.getBoundingClientRect();if(-1!=this.resizingMode&&8!=this.resizingMode){coordMouseFromViewer={x:b.pageX-g.left+a.Internal.Coordinates.getViewerScrollLeft(),y:b.pageY-g.top+a.Internal.Coordinates.getViewerScrollTop()};d=b.clientX-e.left;l=b.clientY-e.top;switch(this.resizingMode){case 0:0<jQuery(a.dom.rselect).width()-d&&(coordMouseFromViewer.x<k.pageLeft?(jQuery(a.dom.rselect).width(jQuery(a.dom.rselect).width()+(jQuery(a.dom.rselect).position().left-
k.pageLeft)),a.dom.rselect.style.left=k.pageLeft+"px"):(a.dom.rselect.style.left=coordMouseFromViewer.x+"px",jQuery(a.dom.rselect).width(jQuery(a.dom.rselect).width()-d)));0<jQuery(a.dom.rselect).height()-l&&(coordMouseFromViewer.y<k.pageTop?(jQuery(a.dom.rselect).height(jQuery(a.dom.rselect).height()+(jQuery(a.dom.rselect).position().top-k.pageTop)),a.dom.rselect.style.top=k.pageTop+"px"):(a.dom.rselect.style.top=coordMouseFromViewer.y+"px",jQuery(a.dom.rselect).height(jQuery(a.dom.rselect).height()-
l)));break;case 1:d=b.clientX-e.right;0<jQuery(a.dom.rselect).width()+d&&(coordMouseFromViewer.x>k.pageLeft+k.pageWidth?jQuery(a.dom.rselect).width(k.pageLeft+k.pageWidth-jQuery(a.dom.rselect).position().left):jQuery(a.dom.rselect).width(jQuery(a.dom.rselect).width()+d));0<jQuery(a.dom.rselect).height()-l&&(coordMouseFromViewer.y<k.pageTop?(jQuery(a.dom.rselect).height(jQuery(a.dom.rselect).height()+(jQuery(a.dom.rselect).position().top-k.pageTop)),a.dom.rselect.style.top=k.pageTop+"px"):(a.dom.rselect.style.top=
coordMouseFromViewer.y+"px",jQuery(a.dom.rselect).height(jQuery(a.dom.rselect).height()-l)));break;case 2:d=b.clientX-e.right;0<jQuery(a.dom.rselect).width()+d&&(coordMouseFromViewer.x>k.pageLeft+k.pageWidth?jQuery(a.dom.rselect).width(k.pageLeft+k.pageWidth-jQuery(a.dom.rselect).position().left):jQuery(a.dom.rselect).width(jQuery(a.dom.rselect).width()+d));l=b.clientY-e.bottom;0<jQuery(a.dom.rselect).height()+l&&(coordMouseFromViewer.y>k.pageTop+k.pageHeight?jQuery(a.dom.rselect).height(k.pageTop+
k.pageHeight-jQuery(a.dom.rselect).position().top):jQuery(a.dom.rselect).height(jQuery(a.dom.rselect).height()+l));break;case 3:0<jQuery(a.dom.rselect).width()-d&&(coordMouseFromViewer.x<k.pageLeft?(jQuery(a.dom.rselect).width(jQuery(a.dom.rselect).width()+(jQuery(a.dom.rselect).position().left-k.pageLeft)),a.dom.rselect.style.left=k.pageLeft+"px"):(a.dom.rselect.style.left=coordMouseFromViewer.x+"px",jQuery(a.dom.rselect).width(jQuery(a.dom.rselect).width()-d)));l=b.clientY-e.bottom;0<jQuery(a.dom.rselect).height()+
l&&(coordMouseFromViewer.y>k.pageTop+k.pageHeight?jQuery(a.dom.rselect).height(k.pageTop+k.pageHeight-jQuery(a.dom.rselect).position().top):jQuery(a.dom.rselect).height(jQuery(a.dom.rselect).height()+l));break;case 4:0<jQuery(a.dom.rselect).width()-d&&(coordMouseFromViewer.x<k.pageLeft?(jQuery(a.dom.rselect).width(jQuery(a.dom.rselect).width()+(jQuery(a.dom.rselect).position().left-k.pageLeft)),a.dom.rselect.style.left=k.pageLeft+"px"):(a.dom.rselect.style.left=coordMouseFromViewer.x+"px",jQuery(a.dom.rselect).width(jQuery(a.dom.rselect).width()-
d)));break;case 5:0<jQuery(a.dom.rselect).height()-l&&(coordMouseFromViewer.y<k.pageTop?(jQuery(a.dom.rselect).height(jQuery(a.dom.rselect).height()+(jQuery(a.dom.rselect).position().top-k.pageTop)),a.dom.rselect.style.top=k.pageTop+"px"):(a.dom.rselect.style.top=coordMouseFromViewer.y+"px",jQuery(a.dom.rselect).height(jQuery(a.dom.rselect).height()-l)));break;case 6:d=b.clientX-e.right;0<jQuery(a.dom.rselect).width()+d&&(coordMouseFromViewer.x>k.pageLeft+k.pageWidth?jQuery(a.dom.rselect).width(k.pageLeft+
k.pageWidth-jQuery(a.dom.rselect).position().left):jQuery(a.dom.rselect).width(jQuery(a.dom.rselect).width()+d));break;case 7:l=b.clientY-e.bottom,0<jQuery(a.dom.rselect).height()+l&&(coordMouseFromViewer.y>k.pageTop+k.pageHeight?jQuery(a.dom.rselect).height(k.pageTop+k.pageHeight-jQuery(a.dom.rselect).position().top):jQuery(a.dom.rselect).height(jQuery(a.dom.rselect).height()+l))}a.dom.rselect.width=jQuery(a.dom.rselect).width();a.dom.rselect.height=jQuery(a.dom.rselect).height()}else d=b.clientX-
a.events.mouseDownClientX,l=b.clientY-a.events.mouseDownClientY,jQuery(a.dom.rselect).position().left+d>=k.pageLeft&&jQuery(a.dom.rselect).position().left+d+jQuery(a.dom.rselect).width()<=k.pageLeft+k.pageWidth?(a.dom.rselect.style.left=jQuery(a.dom.rselect).position().left+d+"px",a.events.mouseDownClientX+=d):jQuery(a.dom.rselect).position().left+d<=k.pageLeft?a.dom.rselect.style.left=k.pageLeft+"px":jQuery(a.dom.rselect).position().left+d+jQuery(a.dom.rselect).width()>=k.pageLeft+k.pageWidth&&(a.dom.rselect.style.left=
k.pageLeft+k.pageWidth-jQuery(a.dom.rselect).width()+"px"),jQuery(a.dom.rselect).position().top+l>=k.pageTop&&jQuery(a.dom.rselect).position().top+l+jQuery(a.dom.rselect).height()<=k.pageTop+k.pageHeight?(a.dom.rselect.style.top=jQuery(a.dom.rselect).position().top+l+"px",a.events.mouseDownClientY+=l):jQuery(a.dom.rselect).position().top+l<=k.pageTop?a.dom.rselect.style.top=k.pageTop+"px":jQuery(a.dom.rselect).position().top+l+jQuery(a.dom.rselect).height()>=k.pageTop+k.pageHeight&&(a.dom.rselect.style.top=
k.pageTop+k.pageHeight-jQuery(a.dom.rselect).height()+"px");return!0}return!1},mouseEnter:function(a,b){return this.isOver=!0},mouseLeave:function(a,b){this.isOver=!1;return!0}}},Pages:{getPage:function(b){if(null!=a.cache.Pages)for(var c=0;c<a.cache.Pages.length;c++)if(a.cache.Pages[c].pageNo==b)return a.cache.Pages[c];return null},selectByDestination:function(b){return a.ajax.PostBaseRequest({url:a.appControllerPath+"/rundestination"+(a.useIdInRoot?"/1":""),data:{destinationName:b},success:function(b){a.ajax.HandleServerContextResponse("string"===
typeof b?eval("("+b+")"):b,!1,!0);a.dom.updateSelectedPageFader(0,a.GetCurrentPage())}},!1)},getVisiblePageNumbers:function(){var b=a.Internal.Coordinates.getViewerScrollTop(),c=b+jQuery(a.dom.viewerArea).innerHeight();return this.getVisiblePageNumbersEx(b,c)},getVisiblePageNumbersEx:function(b,c){var g=[];if(0==a.dom.viewerArea.offsetWidth||0==a.dom.viewerArea.offsetHeight)return g;if(b>c){var d=b;b=c;c=d}for(var d=!1,l=0;l<a.cache.canvas.length;l++){var e=a.cache.canvas[l].pageNo,f=a.cache.canvas[l].canvas.length,
h=parseFloat(a.cache.canvas[l].canvas[0].tile.style.top),f=parseFloat(a.cache.canvas[l].canvas[f-1].tile.style.top)+a.cache.canvas[l].canvas[f-1].tile.height;if(a.Internal.Coordinates.hasVerticalIntersection(h,f,b,c))g.push(e),d=!0;else if(d)break}0<g.length&&g.sort(function(a,b){return a-b});return g},getText:function(b){return(b=a.Internal.Pages.getPage(b))?b.text:null},getPageWidth:function(b){return(b=a.Internal.Pages.getPage(b))?b.width:0},getPageHeight:function(b){return(b=a.Internal.Pages.getPage(b))?
b.height:0},isPageVisible:function(b){var c=a.cache.getPageCanvas(b);if(c){b=a.Internal.Coordinates.getViewerScrollTop();var g=b+jQuery(a.dom.viewerArea).innerHeight(),d=c.canvas.length,e=parseFloat(c.canvas[0].tile.style.top),c=parseFloat(c.canvas[d-1].tile.style.top)+c.canvas[d-1].tile.height;if(a.Internal.Coordinates.hasVerticalIntersection(e,c,b,g))return!0}return!1},isPageRendered:function(b){return(b=a.Internal.Pages.getPage(b))?b.drawn||b.drawing:!1},getRenderRotation:function(b){return(b=
a.Internal.Pages.getPage(b))?b.renderRotation:0},getRenderingState:function(b){for(var c,g,d,e,f,h,k,m=0;m<a.cache.canvas.length;m++)if(a.cache.canvas[m].pageNo==b){c=a.cache.canvas[m].left;g=a.cache.canvas[m].top;d=a.cache.canvas[m].right-c;e=a.cache.canvas[m].bottom-g;break}if(b=a.Internal.Pages.getPage(b))f=b.contentMatrix,h=b.matrix,k=b.zoom;return{pageLeft:c,pageTop:g,pageWidth:d,pageHeight:e,zoom:k,matrix:h,contentMatrix:f}},pageView:function(b,c,d){function g(){if(null!=a.ajax.pendingPageViewRequestes)for(var b=
0;b<l.length;b++)for(var c=l[b],g=0;g<a.ajax.pendingPageViewRequestes.length;g++)if(a.ajax.pendingPageViewRequestes[g]==c){a.ajax.pendingPageViewRequestes.splice(g,1);break}}if(!a.serverCtx.documentLoaded||!a.cache.canvas)return 0;for(var l=[],e=0;e<b.length;e++){var p=b[e],f=!1,h=a.Internal.Pages.getPage(p);h&&(h.drawn||h.drawing||h.renderStatus!=DocuViewareAPI.Status.OK&&!d)&&(f=!0);if(!f){f=!1;if(null!=a.ajax.pendingPageViewRequestes)for(h=0;h<a.ajax.pendingPageViewRequestes.length;h++)if(a.ajax.pendingPageViewRequestes[h]==
p){f=!0;break}f||(null==a.ajax.pendingPageViewRequestes&&(a.ajax.pendingPageViewRequestes=[]),a.ajax.pendingPageViewRequestes.push(p),l.push(p))}}0<l.length&&(c&&a.DisplayPendingActionNotification(),a.ajax.pageViewRequestNo+=1,a.ajax.PostAjaxRequestForDocuViewareAction({url:a.appControllerPath+"/pageview"+(a.useIdInRoot?"/1":""),async:!0,data:JSON.stringify({sessionID:a.ajax.sessionID,contextID:a.ajax.contextID,zoom:a.serverCtx.zoom,forceReload:d,entries:l,requestNo:a.ajax.pageViewRequestNo}),success:function(b){c&&
a.HidePendingActionNotification();g();if((b="string"===typeof b?eval("("+b+")"):b)&&b.status==DocuViewareAPI.Status.OK&&b.contextID==a.ajax.contextID){var d=!0,l=!1,e=!1;b.checkZoom?a.serverCtx.zoom!=b.zoom&&(a.debug&&console.log("DocuVieware pageview: result ignored because of zoom inconsistency. ctxzoom: "+a.serverCtx.zoom+". response zoom: "+b.zoom+"."),e=!0,d=!1):a.serverCtx.zoom!=b.zoom&&(a.debug&&console.log("DocuVieware pageview: prevent for page drawing because of zoom inconsistency"),d=!1);
d&&a.serverCtx.viewRotation!=b.viewRotation&&(a.debug&&console.log("DocuVieware pageview: page state rejected because of rotation inconsistency. Ctx view rotation: "+a.serverCtx.viewRotation+". Content view rotation: "+b.viewRotation),l=!0);a.serverCtx.page=b.images;a.UpdateUI(!1,!0,d,!1,e,l)}},error:function(b){a.ajax.HandleError(b);a.debug&&console.log("DocuVieware pageview error");g()}}));return l.length}},Coordinates:{getViewerScrollLeft:function(){return a.dom.viewerArea.scrollLeft},getViewerScrollTop:function(){return a.dom.viewerArea.scrollTop},
setViewerScrollLeft:function(b){a.dom.viewerArea.scrollLeft=b;return DocuViewareAPI.Status.OK},setViewerScrollTop:function(b){a.dom.viewerArea.scrollTop=b;return DocuViewareAPI.Status.OK},clientToDocument:function(b,c,d,e){b=a.Internal.Pages.getRenderingState(b);var g=a.dom.viewerArea.getBoundingClientRect();c={x:c-g.left-b.pageLeft+a.Internal.Coordinates.getViewerScrollLeft(),y:d-g.top-b.pageTop+a.Internal.Coordinates.getViewerScrollTop()};e=1==e?1/96:1;e=a.Internal.Matrix.scale(a.Internal.Matrix.invert(b.contentMatrix),
e,e,!1);a.Internal.Matrix.transformPoint(e,c);return c},documentToViewer:function(b,c,d){b=a.Internal.Pages.getRenderingState(b);c={x:c,y:d};a.Internal.Matrix.transformPoint(b.contentMatrix,c);c.x+=b.pageLeft;c.y+=b.pageTop;return c},documentToViewerBox:function(b,c){var g=a.Internal.Pages.getRenderingState(b);a.Internal.Matrix.transformBBox(g.contentMatrix,0,c);c.left+=g.pageLeft;c.top+=g.pageTop},hasVerticalIntersection:function(a,b,c,d){return Math.min(b,d)>=Math.max(a,c)},hasIntersection:function(a,
b,c,d,e,f,h,k){return Math.min(c,h)>=Math.max(a,e)&&Math.min(d,k)>=Math.max(b,f)},newRectangle:function(a,b,c,d){return{Left:a,Top:b,Right:a+c,Bottom:b+d,Width:c,Height:d}},rectUnion:function(a,b,c,d,e,f,h,k){a=Math.min(a,e);b=Math.min(b,f);return this.newRectangle(a,b,Math.max(c,h)-a,Math.max(d,k)-b)}},Rotations:{getRotateFlipTypeAngle:function(a){switch(a){case 1:return 90;case 2:return 180;case 3:return 270}return 0}},Text:{_selectedText:null,clearSelection:function(){this._selectedText=null},
anyWordHitTest:function(b,c,d){var g=a.Internal.Pages.getVisiblePageNumbers();if(null!=g)for(var l=0;l<g.length;l++)if(a.Internal.Pages.isPageRendered(g[l])){var e=a.Internal.Coordinates.clientToDocument(g[l],b,c,0),p=a.Internal.Pages.getText(g[l]);if(null!=p)for(var f=e.x*p.scale,e=e.y*p.scale,h=p.textBlock.words,k=h.length,m=0;m<k;m++)if(h[m].BBox.Left-d<=f&&h[m].BBox.Right+d>=f&&h[m].BBox.Top-d<=e&&h[m].BBox.Bottom+d>=e)return{page:g[l],textRotate:p.textBlock.Rotation}}return null},getSelectedText:function(){return this._selectedText},
captureSelectedText:function(b,c,d,e,f,h){function g(a,b,c){var g=a._selectedText.length;0<g&&(c?a._selectedText+="\r\n":" "!=a._selectedText[g-1]&&"\t"!=a._selectedText[g-1]&&" "!=b[0]&&"\t"!=b[0]&&(a._selectedText+=" "))}this._selectedText="";var l=[],p=a.dom.viewerArea.getBoundingClientRect(),p=a.Internal.Coordinates.getViewerScrollTop()-p.top,p=a.Internal.Pages.getVisiblePageNumbersEx(c+p,e+p);if(null!=p)for(var y=-1==E&&-1==z&&-1==D&&-1==A,C=!0,H=1==p.length,k=-1,m=-1,n=0;n<p.length;n++){var q=
0==n,r=n==p.length-1,v=p[n];if(a.Internal.Pages.isPageRendered(v)){var t=[],w=a.Internal.Pages.getText(v);if(null!=w){var x=h;0!=w.textBlock.Rotation&&(x=!0);var z=a.Internal.Coordinates.clientToDocument(v,b,c,0),A=a.Internal.Coordinates.clientToDocument(v,d,e,0),E=z.x*w.scale,D=z.y*w.scale,z=A.x*w.scale,A=A.y*w.scale;if(D>A)var I=E,E=z,z=I,I=D,D=A,A=I;D=a.Internal.Coordinates.newRectangle(Math.min(E,z),Math.min(D,A),Math.abs(E-z),Math.abs(D-A));D.Right=D.Left+D.Width;D.Bottom=D.Top+D.Height;for(var A=
w.textBlock.words,I=A.length,J=-1,F=0,K=!1,G=null,M=0;M<=I-1;M++){var u=A[M];if(x){if(a.Internal.Coordinates.hasIntersection(D.Left,D.Top,D.Right,D.Bottom,u.BBox.Left,u.BBox.Top,u.BBox.Right,u.BBox.Bottom)){null!=G?(K=G.LineNo==u.LineNo,B=!K):B=K=!1;if(K){var N=t[t.length-1];t[t.length-1]=a.Internal.Coordinates.rectUnion(N.Left,N.Top,N.Right,N.Bottom,u.BBox.Left,u.BBox.Top,u.BBox.Right,u.BBox.Bottom)}else t.push(a.Internal.Coordinates.newRectangle(u.BBox.Left,u.BBox.Top,u.BBox.Width,u.BBox.Height));
g(this,u.Content,B);this._selectedText+=u.Content;K=!0;G=u}}else{var B=F!=u.LineNo;B&&(F=u.LineNo,K=!1,J=-1);if(y||!q||-1!=k&&k!=u.LineNo||-1!=J){if(y)J=u.LineNo;else if(-1==J||-1!=J&&u.LineNo!=J&&-1==m)J=u.BBox.Bottom<D.Bottom?u.LineNo:-1;if(-1!=J)B?t.push(a.Internal.Coordinates.newRectangle(u.BBox.Left,u.BBox.Top,u.BBox.Width,u.BBox.Height)):(N=t[t.length-1],t[t.length-1]=a.Internal.Coordinates.rectUnion(N.Left,N.Top,N.Right,N.Bottom,u.BBox.Left,u.BBox.Top,u.BBox.Right,u.BBox.Bottom)),g(this,u.Content,
B),this._selectedText+=u.Content;else if(-1==m||m==u.LineNo){if(u.BBox.Top<D.Bottom)if(u.BBox.Right<z)K?(N=t[t.length-1],t[t.length-1]=a.Internal.Coordinates.rectUnion(N.Left,N.Top,N.Right,N.Bottom,u.BBox.Left,u.BBox.Top,u.BBox.Right,u.BBox.Bottom)):t.push(a.Internal.Coordinates.newRectangle(u.BBox.Left,u.BBox.Top,u.BBox.Width,u.BBox.Height)),g(this,u.Content,B),this._selectedText+=u.Content,K=!0;else{if(a.Internal.Coordinates.hasIntersection(D.Left,D.Top,D.Right,D.Bottom,u.BBox.Left,u.BBox.Top,u.BBox.Right,
u.BBox.Bottom))for(g(this,u.Content,B),B=0;B<=u.GlyphBoxes.length-1;B++)u.GlyphBoxes[B].x+u.GlyphBoxes[B].width<z&&(K?(K=t[t.length-1],t[t.length-1]=a.Internal.Coordinates.rectUnion(K.Left,K.Top,K.Right,K.Bottom,u.GlyphBoxes[B].x,u.GlyphBoxes[B].y,u.GlyphBoxes[B].x+u.GlyphBoxes[B].width,u.GlyphBoxes[B].y+u.GlyphBoxes[B].height)):t.push(a.Internal.Coordinates.newRectangle(u.GlyphBoxes[B].x,u.GlyphBoxes[B].y,u.GlyphBoxes[B].width,u.GlyphBoxes[B].height)),K=!0,this._selectedText+=u.GlyphBoxes[B].glyph);
break}else break;-1==m&&r&&(m=u.LineNo)}else break}else if(a.Internal.Coordinates.hasIntersection(D.Left,D.Top,D.Right,D.Bottom,u.BBox.Left,u.BBox.Top,u.BBox.Right,u.BBox.Bottom)){if(C&&1==p.length){for(C=M;C<I;){if(A[C].LineNo!=F){H=A[C].BBox.Top>D.Bottom;break}C+=1}C=!1}g(this,u.Content,B);for(B=0;B<=u.GlyphBoxes.length-1;B++){N=f;if(H)if(K)var V=u.GlyphBoxes[B].x+u.GlyphBoxes[B].width,N=N|(a.Internal.Coordinates.hasIntersection(D.Left,D.Top,D.Right,D.Bottom,u.GlyphBoxes[B].x,u.GlyphBoxes[B].y,
u.GlyphBoxes[B].x+u.GlyphBoxes[B].width,u.GlyphBoxes[B].y+u.GlyphBoxes[B].height)&&V<D.Right);else N|=a.Internal.Coordinates.hasIntersection(D.Left,D.Top,D.Right,D.Bottom,u.GlyphBoxes[B].x,u.GlyphBoxes[B].y,u.GlyphBoxes[B].x+u.GlyphBoxes[B].width,u.GlyphBoxes[B].y+u.GlyphBoxes[B].height);else if(V=u.GlyphBoxes[B].x+u.GlyphBoxes[B].width,-1!=J||V>E)N=!0,-1==k&&(k=u.LineNo,J=u.BBox.Bottom<D.Bottom?u.LineNo:-1);N&&(K?(K=t[t.length-1],t[t.length-1]=a.Internal.Coordinates.rectUnion(K.Left,K.Top,K.Right,
K.Bottom,u.GlyphBoxes[B].x,u.GlyphBoxes[B].y,u.GlyphBoxes[B].x+u.GlyphBoxes[B].width,u.GlyphBoxes[B].y+u.GlyphBoxes[B].height)):t.push(a.Internal.Coordinates.newRectangle(u.GlyphBoxes[B].x,u.GlyphBoxes[B].y,u.GlyphBoxes[B].width,u.GlyphBoxes[B].height)),this._selectedText+=u.GlyphBoxes[B].glyph,K=!0)}}}}l.push({regions:t,pageNo:v,scale:w.scale})}}}return l}},Matrix:{transformPoint:function(a,b){var c=a.b*b.x+a.d*b.y+a.f;b.x=a.a*b.x+a.c*b.y+a.e;b.y=c},equal:function(a,b){return a.a===b.a&&a.b===b.b&&
a.c===b.c&&a.d===b.d&&a.e===b.e&&a.f===b.f},combine:function(a,b){return{a:a.a*b.a+a.b*b.c,b:a.a*b.b+a.b*b.d,c:a.c*b.a+a.d*b.c,d:a.c*b.b+a.d*b.d,e:a.e*b.a+a.f*b.c+b.e,f:a.e*b.b+a.f*b.d+b.f}},invert:function(a){var b=1/(a.a*a.d-a.b*a.c),b={a:a.d*b,b:-a.b*b,c:-a.c*b,d:a.a*b};b.e=-a.e*b.a-a.f*b.c;b.f=-a.e*b.b-a.f*b.d;return b},translate:function(a,b,c){return this.combine(a,{a:1,b:0,c:0,d:1,e:b,f:c})},isRotatedOrFlipped:function(a){return 0!=a.b||0!=a.c||0>a.a||0>a.d},scale:function(a,b,c,d){return d?
this.combine({a:b,b:0,c:0,d:c,e:0,f:0},a):this.combine(a,{a:b,b:0,c:0,d:c,e:0,f:0})},rotateAt:function(a,b,c,d,e){b=Math.PI*b/180;b={a:Math.cos(b),b:Math.sin(b),c:-Math.sin(b),d:Math.cos(b),e:c,f:d};if(e)return c=this.combine({a:1,b:0,c:0,d:1,e:-c,f:-d},b),this.combine(c,a);a=this.combine(a,{a:1,b:0,c:0,d:1,e:-c,f:-d});return this.combine(a,b)},transformBBox:function(a,b,c){var g;g=0==b?a:this.rotateAt(a,b,c.left+c.width/2,c.top+c.height/2,!0);a={x:c.left,y:c.top};b={x:c.left+c.width,y:c.top};var d=
{x:c.left+c.width,y:c.top+c.height},l={x:c.left,y:c.top+c.height};this.transformPoint(g,a);this.transformPoint(g,b);this.transformPoint(g,d);this.transformPoint(g,l);g=Math.min(a.x,b.x,d.x,l.x);var e=Math.max(a.x,b.x,d.x,l.x),f=Math.min(a.y,b.y,d.y,l.y);a=Math.max(a.y,b.y,d.y,l.y);c.left=g;c.top=f;c.width=e-g;c.height=a-f}},Search:{_currentOccurence:null,_occurences:null,_firstResult:null,clearResults:function(){this._currentOccurence=this._occurences=this._firstResult=null;if(a.dom.searchResults&&
a.dom.searchResults.hasChildNodes())for(var b=a.dom.searchResults.children.length-1;0<=b;b--)a.dom.searchResults.removeChild(a.dom.searchResults.children[b]);a.dom.SelectedTextRegions.clear(2)},addResults:function(b,c){this.clearResults();this._occurences=c;a.dom.SelectedTextRegions.clear(2);this.occurences=c;var g=null!=c?c.length:0;if(0<g)for(var d=1,l,e=0,f=0;f<g;f++){var h=document.createElement("div");0==f?this._firstResult=h:c[f].page!=l&&(d=1);l=c[f].page;h.pageOccurence=d++;h.className="searchResultItem";
var k=c[f].context.content,m=c[f].context.resultStart,n=c[f].context.resultLen;h.innerHTML=k.substr(0,m)+'<strong style="color:'+a.dom.UIconfig.activeSelectedColor+';">'+k.substr(m,n)+"</strong>"+k.substr(m+n);h.pageNo=c[f].page;h.searchedValue=b;a.dom.searchArea&&(h.onmouseenter=this.resultOnMouseEnterHandler,h.onmouseleave=this.resultOnMouseLeaveHandler,h.onclick=this.resultOnClickHandler);a.dom.searchArea&&e!=l&&(k=document.createElement("div"),k.className="searchResultItemPage",k.style.backgroundColor=
a.dom.UIconfig.panelDarkerBackColor,k.innerHTML=a.Localize("label_page")+" "+l,e=l,a.dom.searchResults.appendChild(k));a.dom.searchArea&&a.dom.searchResults.appendChild(h)}},highlightResults:function(b){a.dom.SelectedTextRegions.clear(2,b);if(null!=this._occurences){var c=this._occurences.length;if(0<c)for(var g=1,d=0;d<c;d++)if(this._occurences[d].page==b){var e={left:96*this._occurences[d].left,top:96*this._occurences[d].top,width:96*this._occurences[d].width,height:96*this._occurences[d].height};
a.Internal.Coordinates.documentToViewerBox(this._occurences[d].page,e);null!=this._currentOccurence&&this._currentOccurence.pageNo==b&&this._currentOccurence.pageOccurence==g?a.dom.SelectedTextRegions.addNew(this._occurences[d].page,e.left,e.top,e.width,e.height,"rgba(0,200,0,0.3)","rgba(255,0,0,1)",2):a.dom.SelectedTextRegions.addNew(this._occurences[d].page,e.left,e.top,e.width,e.height,"rgba(0,200,0,0.3)",null,2);g++}}},navigateToFirstResult:function(){this._firstResult&&(this.navigateToResult(this._firstResult),
a.dom.searchResults.parentElement.scrollTop=0)},resultOnClickHandler:function(b){a.Internal.Search.navigateToResult(b.currentTarget)},resultOnMouseEnterHandler:function(b){b.target.style.borderColor=a.dom.UIconfig.activeSelectedColor},resultOnMouseLeaveHandler:function(b){b.target.style.borderLeftColor="transparent";b.target.style.borderRightColor="transparent";b.target.style.borderTopColor="transparent";b.target.style.borderBottomColor=a.dom.UIconfig.miscBorderColor},navigateToResult:function(b){a.Internal.Search._currentOccurence=
b;a.dom.searchArea&&(jQuery(a.dom.searchResults).find(".searchResultItem").each(function(b){jQuery(this).removeClass("active");jQuery(this).css("border-left-color","transparent");jQuery(this).css("border-right-color","transparent");jQuery(this).css("border-top-color","transparent");jQuery(this).css("border-bottom-color",a.dom.UIconfig.miscBorderColor);jQuery(this).css("background-color","transparent")}),b.style.borderColor="transparent",b.style.backgroundColor=a.dom.UIconfig.activeSelectedBackgroundColor,
jQuery(b).addClass("active"));a.SelectPageEx(b.pageNo,!0,!0,!0,!1,!0)}},FormFields:{existFormField:function(b){if(!b.control)return!1;if(a.dom.viewerArea.hasChildNodes())for(var c=a.dom.viewerArea.children.length-1;0<=c;c--)if(a.dom.viewerArea.children[c]===b.control)return!0;return!1},removePageFormFields:function(b){if(null!=a.cache.FormFields)for(var c=0;c<a.cache.FormFields.length;c++){var d=a.cache.FormFields[c];d.formFieldApp.pageNo==b&&(this.removeFormField(d),a.cache.FormFields.splice(c,1),
c--)}},removeAll:function(b){if(null!=a.cache.FormFields){for(b=0;b<a.cache.FormFields.length;b++)this.removeFormField(a.cache.FormFields[b]);a.cache.FormFields=null}},removeFormField:function(b){b.control&&b.control.parentNode==a.dom.viewerArea&&a.dom.viewerArea.removeChild(b.control);if(b.children)for(var c=0;c<b.children.length;c++)this.removeFormField(b.children[c])},newController:function(b){var c={};c.formFieldApp=b;c.updateNo=0;c.pendingUpdate=0;c.stopEditing=function(){this.isEditing()&&this.isModified()&&
this.updateFormField(null)};c.updateFormField=function(b){if(a.hasPendingAction(!0,!0))return DocuViewareAPI.Status.GenericError;var c={};c.properties=this.formFieldApp.properties;c.sessionID=a.ajax.sessionID;c.contextID=a.ajax.contextID;c.pageNo=this.formFieldApp.pageNo;c.id=this.formFieldApp.id;b&&(jQuery.extend(!0,c.properties,b),c.rotation=b.rotation);this.updateNo+=1;this.pendingUpdate+=1;c.updateNo=this.updateNo;var d=this;a.ajax.PostAjaxRequestForDocuViewareAction({url:a.appControllerPath+
"/formfieldupdate"+(a.useIdInRoot?"/1":""),async:!0,data:JSON.stringify(c),success:function(b){--d.pendingUpdate;if((b="string"===typeof b?eval("("+b+")"):b)&&null!=b.formFieldApp){if(d.isEditing()||b.updateNo!=d.updateNo||(d.formFieldApp=b.formFieldApp,d.render(),a.updateThumbnails([d.formFieldApp.pageNo])),a.callbacks.onFormFieldChanged)a.callbacks.onFormFieldChanged({id:b.formFieldApp.id,pageNo:b.formFieldApp.pageNo})}else a.ajax.HandleError(b)},error:function(b){a.ajax.HandleError(b);--d.pendingUpdate}});
return DocuViewareAPI.Status.OK};c.isEditing=function(){return document.activeElement==this.control};c.hasPendingUpdate=function(){return 0<this.pendingUpdate};c.isModified=function(){var b=!1;switch(this.formFieldApp.properties.type){case 2:b=this.formFieldApp.properties.isChecked!=this.control.checked;break;case 4:b=this.formFieldApp.properties.value!=this.control.value;break;case 3:b=this.formFieldApp.properties.value!=jQuery('input[name="'+a.uniqueID+"_formfield_"+this.formFieldApp.properties.id+
'"]:checked').val();break;case 7:b=this.formFieldApp.properties.value!=this.control.options[this.control.selectedIndex].value;break;case 8:b=this.formFieldApp.properties.value!=this.control.options[this.control.selectedIndex].value}return b};c.blur=function(){this.control.style.backgroundColor="#CCD7FF";this.isModified()&&(this.setCurrentValue(),this.updateFormField(null))};c.focus=function(){this.control.style.backgroundColor=this.formFieldApp.properties.backgroundColor};c.setCurrentValue=function(){switch(this.formFieldApp.properties.type){case 2:this.formFieldApp.properties.isChecked=
this.control.checked;break;case 4:this.formFieldApp.properties.value=this.control.value;break;case 3:this.formFieldApp.properties.value=jQuery('input[name="'+a.uniqueID+"_formfield_"+this.formFieldApp.properties.id+'"]:checked').val();break;case 7:this.formFieldApp.properties.value=this.control.options[this.control.selectedIndex].value;break;case 8:this.formFieldApp.properties.value=this.control.options[this.control.selectedIndex].value}};c.render=function(){if(this.children)for(var b=0;b<this.children.length;b++)this.children[b].render();
if(this.control){var b={left:this.formFieldApp.properties.left,top:this.formFieldApp.properties.top,width:this.formFieldApp.properties.width,height:this.formFieldApp.properties.height},c=a.Internal.Pages.getRenderingState(this.formFieldApp.pageNo);b.left*=96;b.top*=96;b.width*=96;b.height*=96;var d=a.Internal.Pages.getRenderRotation(this.formFieldApp.pageNo),g=0;switch(d){case 2:g=180;break;case 3:g=270;break;case 1:g=90}a.Internal.Matrix.transformBBox(c.contentMatrix,-g,b);b.left+=c.pageLeft;b.top+=
c.pageTop;this.control.style.left=b.left+"px";this.control.style.top=b.top+"px";this.control.style.display=0==this.formFieldApp.properties.visibility||0==this.formFieldApp.properties.visibility?"block":"none";this.control.style.position="absolute";this.control.style.padding="0px";this.control.style.margin="0px";this.control.style.outline="0";this.control.style.backgroundColor="#CCD7FF";0!=this.formFieldApp.properties.fontSize&&(this.control.style.fontSize=this.formFieldApp.properties.fontSize*a.GetCurrentZoom()+
"pt");this.control.style.color=this.formFieldApp.properties.fontColor;this.formFieldApp.properties.fontFamily&&(this.control.style.fontFamily='"'+this.formFieldApp.properties.fontFamily+'"');switch(this.formFieldApp.properties.fontStyle){case 0:this.control.style.fontStyle="normal";this.control.style.fontWeight="normal";this.control.style.textDecoration="none";break;case 1:this.control.style.fontStyle="normal";this.control.style.fontWeight="bold";this.control.style.textDecoration="none";break;case 2:this.control.style.fontStyle=
"italic";this.control.style.fontWeight="normal";this.control.style.textDecoration="none";break;case 3:this.control.style.fontStyle="italic";this.control.style.fontWeight="bold";this.control.style.textDecoration="none";break;case 4:this.control.style.fontStyle="normal";this.control.style.fontWeight="normal";this.control.style.textDecoration="underline";break;case 5:this.control.style.fontStyle="normal";this.control.style.fontWeight="bold";this.control.style.textDecoration="underline";break;case 6:this.control.style.fontStyle=
"italic";this.control.style.fontWeight="normal";this.control.style.textDecoration="underline";break;case 7:this.control.style.fontStyle="italic";this.control.style.fontWeight="bold";this.control.style.textDecoration="underline";break;case 8:this.control.style.fontStyle="normal";this.control.style.fontWeight="normal";this.control.style.textDecoration="line-through";break;case 9:this.control.style.fontStyle="normal";this.control.style.fontWeight="bold";this.control.style.textDecoration="line-through";
break;case 10:this.control.style.fontStyle="italic";this.control.style.fontWeight="normal";this.control.style.textDecoration="line-through";break;case 11:this.control.style.fontStyle="italic";this.control.style.fontWeight="bold";this.control.style.textDecoration="line-through";break;case 12:this.control.style.fontStyle="normal";this.control.style.fontWeight="normal";this.control.style.textDecoration="none";break;case 13:this.control.style.fontStyle="normal";this.control.style.fontWeight="normal";
this.control.style.textDecoration="none";break;case 14:this.control.style.fontStyle="normal";this.control.style.fontWeight="normal";this.control.style.textDecoration="none";break;case 15:this.control.style.fontStyle="normal",this.control.style.fontWeight="normal",this.control.style.textDecoration="none"}if(2!=this.formFieldApp.properties.type&&3!=this.formFieldApp.properties.type){switch(this.formFieldApp.properties.borderStyle){case 0:this.control.style.borderStyle="solid";break;case 1:this.control.style.borderStyle=
"dashed";break;case 2:this.control.style.borderStyle="outset";break;case 3:this.control.style.borderStyle="inset";break;case 4:this.control.style.borderStyle="none";this.control.style.borderBottomStyle="solid";break;default:this.control.style.borderStyle="none"}this.control.style.borderWidth=96*this.formFieldApp.properties.borderWidth*a.GetCurrentZoom()+"px";this.control.style.borderColor=this.formFieldApp.properties.borderColor}this.control.alt=this.formFieldApp.properties.title;switch(this.formFieldApp.properties.textAlignment){case 0:this.control.style.textAlign=
"left";break;case 1:this.control.style.textAlign="center";break;case 2:this.control.style.textAlign="right"}this.control.disabled=this.formFieldApp.properties.readOnly;var c=(this.control.style.borderLeftWidth?parseFloat(this.control.style.borderLeftWidth.replace("px","")):0)+(this.control.style.borderRightWidth?parseFloat(this.control.style.borderRightWidth.replace("px","")):0),l=(this.control.style.borderLeftWidth?parseFloat(this.control.style.borderTopWidth.replace("px","")):0)+(this.control.style.borderBottomWidth?
parseFloat(this.control.style.borderRightWidth.replace("px","")):0);this.control.style.width=b.width-c+"px";this.control.style.height=b.height-l+"px";this.control.style.transform=0!=g?"rotate("+g+"deg)":"none";this.control.style.cursor=4!=this.formFieldApp.properties.type||1!=d&&3!=d&&5!=d&&7!=d?"auto":"vertical-text"}};switch(b.properties.type){case 2:c.control=document.createElement("input");c.control.type="checkbox";c.control.checked=b.properties.isChecked;break;case 4:b.properties.isMultiline?
c.control=document.createElement("textarea"):(c.control=document.createElement("input"),c.control.type=b.properties.password?"password":"text");c.control.value=b.properties.value;b.properties.maxLength&&0<b.properties.maxLength&&(c.control.maxLength=b.properties.maxLength);break;case 3:if(b.properties.children){c.children=[];for(var d=0;d<b.properties.children.length;d++){var g=this.newController(b.properties.children[d]);g.control&&g.formFieldApp.properties.value==b.properties.value&&(g.control.checked=
!0);c.children.push(g)}}else c.control=document.createElement("input"),c.control.type="radio",c.control.value=b.properties.value;break;case 7:c.control=document.createElement("select");for(d=0;d<b.properties.items.length;d++)g=document.createElement("option"),g.text=b.properties.items[d].Value,g.value=b.properties.items[d].Key,b.properties.value==g.value&&(g.selected=!0),c.control.appendChild(g);break;case 8:for(c.control=document.createElement("select"),c.control.size=b.properties.items.length,b.properties.isMultiSelect&&
(c.control.multiple=!0),d=0;d<b.properties.items.length;d++)g=document.createElement("option"),g.text=b.properties.items[d].Value,g.value=b.properties.items[d].Key,b.properties.value==g.value&&(g.selected=!0),c.control.appendChild(g)}c.control&&(c.control.owner=c,c.control.name=0==b.properties.parentId?a.uniqueID+"_formfield_"+b.properties.id:a.uniqueID+"_formfield_"+b.properties.parentId,c.control.id=a.uniqueID+"_formfield_"+b.properties.id,c.control.classList.add("dvFormField"),c.control.style.zIndex=
16E6,c.control.onblur=function(a){this.owner.blur()},c.control.onfocus=function(a){this.owner.focus()});null==a.cache.FormFields?a.cache.FormFields=[c]:a.cache.FormFields.push(c);c.control&&a.dom.viewerArea.appendChild(c.control);return c}},Twain:{Status:{OK:0,WARNING:1,ERROR:2,BAD_VERSION:3,NOT_RESPONDING:4},updateStatusBar:function(b,c){c=c?c:"";switch(b){case a.Internal.Twain.Status.OK:a.dom.twainAcquisitionStatusBarMessage.style.border="1px solid #3c763d";a.dom.twainAcquisitionStatusBarMessage.style.color=
"#3c763d";break;case a.Internal.Twain.Status.WARNING:a.dom.twainAcquisitionStatusBarMessage.style.border="1px solid #cc5500";a.dom.twainAcquisitionStatusBarMessage.style.color="#cc5500";break;case a.Internal.Twain.Status.ERROR:case a.Internal.Twain.Status.BAD_VERSION:case a.Internal.Twain.Status.NOT_RESPONDING:a.dom.twainAcquisitionStatusBarMessage.style.border="1px solid #a94442";a.dom.twainAcquisitionStatusBarMessage.style.color="#a94442";break;default:a.dom.twainAcquisitionStatusBarMessage.style.border=
"1px solid transparent",a.dom.twainAcquisitionStatusBarMessage.style.color="#000000"}!b||b!=a.Internal.Twain.Status.BAD_VERSION&&b!=a.Internal.Twain.Status.NOT_RESPONDING||(c=c+"<br>"+a.Localize("_twain_connector_donwload")+'<a href="#" onclick="var e = document.getElementById(\''+a.uniqueID+"'); if (e) { e.control.DownloadTwainServiceSetup_Click(); return false;}\">"+a.Localize("_twain_connector_donwload_here")+"</a>");a.dom.twainAcquisitionStatusBarMessage.innerHTML=c},updateTwainAcquisitionDialogMessageBox:function(b,
c){c=c?c:"";switch(b){case a.Internal.Twain.Status.OK:jQuery(a.dom.twainAcquisitionDialog).find("#twainAcquisitionMessage"+a.uniqueID).css("border","1px solid #3c763d");jQuery(a.dom.twainAcquisitionDialog).find("#twainAcquisitionMessage"+a.uniqueID).css("color","#3c763d");break;case a.Internal.Twain.Status.WARNING:jQuery(a.dom.twainAcquisitionDialog).find("#twainAcquisitionMessage"+a.uniqueID).css("border","1px solid #cc5500");jQuery(a.dom.twainAcquisitionDialog).find("#twainAcquisitionMessage"+a.uniqueID).css("color",
"#cc5500");break;case a.Internal.Twain.Status.ERROR:case a.Internal.Twain.Status.BAD_VERSION:case a.Internal.Twain.Status.NOT_RESPONDING:jQuery(a.dom.twainAcquisitionDialog).find("#twainAcquisitionMessage"+a.uniqueID).css("border","1px solid #a94442");jQuery(a.dom.twainAcquisitionDialog).find("#twainAcquisitionMessage"+a.uniqueID).css("color","#a94442");break;default:jQuery(a.dom.twainAcquisitionDialog).find("#twainAcquisitionMessage"+a.uniqueID).css("border","1px solid transparent"),jQuery(a.dom.twainAcquisitionDialog).find("#twainAcquisitionMessage"+
a.uniqueID).css("color","#000000")}!b||b!=a.Internal.Twain.Status.BAD_VERSION&&b!=a.Internal.Twain.Status.NOT_RESPONDING||(c=c+"<br>"+a.Localize("_twain_connector_donwload")+'<a href="#" onclick="var e = document.getElementById(\''+a.uniqueID+"'); if (e) { e.control.DownloadTwainServiceSetup_Click(); return false;}\">"+a.Localize("_twain_connector_donwload_here")+"</a>");jQuery(a.dom.twainAcquisitionDialog).find("#twainAcquisitionMessage"+a.uniqueID).html(c)},acquire:function(b,c,d){if(!b||!c)return DocuViewareAPI.Status.GenericError;
b={url:a.twainServiceUri+"TWAINAcquire2/",data:JSON.stringify({source:{sourceName:b,sourceConfig:a.twainSourceConfig}}),success:function(b){(b=b.TwainAcquire2Result)&&b.status===DocuViewareAPI.Status.OK?c(b):(d&&d(b),a.ajax.HandleError(b))},error:function(){var b={status:DocuViewareAPI.Status.GenericError,message:a.Localize("_twain_connector_unavailable"),throwError:!1};d&&d(b);a.ajax.HandleError(b)}};a.ajax.PostAjaxRequestForCrossDomainApp(b);return DocuViewareAPI.Status.OK}},Annotations:{DEFAULT_GRIP_SIZE:6,
CANVAS_PADDING:6,currentAnnotProperties:null,currentAnnotPageNo:0,selected:[],cached:[],mouseOverAnnot:!1,annotEdit:null,defaultAuthor:null,defaultProperties:{0:DocuViewareAnnotationsUtilities.getAnnotationDefaultProperties(0),1:DocuViewareAnnotationsUtilities.getAnnotationDefaultProperties(1),2:DocuViewareAnnotationsUtilities.getAnnotationDefaultProperties(2),3:DocuViewareAnnotationsUtilities.getAnnotationDefaultProperties(3),4:DocuViewareAnnotationsUtilities.getAnnotationDefaultProperties(4),5:DocuViewareAnnotationsUtilities.getAnnotationDefaultProperties(5),
6:DocuViewareAnnotationsUtilities.getAnnotationDefaultProperties(6),7:DocuViewareAnnotationsUtilities.getAnnotationDefaultProperties(7),8:DocuViewareAnnotationsUtilities.getAnnotationDefaultProperties(8),9:DocuViewareAnnotationsUtilities.getAnnotationDefaultProperties(9),10:DocuViewareAnnotationsUtilities.getAnnotationDefaultProperties(10),11:DocuViewareAnnotationsUtilities.getAnnotationDefaultProperties(11),12:DocuViewareAnnotationsUtilities.getAnnotationDefaultProperties(12),13:DocuViewareAnnotationsUtilities.getAnnotationDefaultProperties(13),
14:DocuViewareAnnotationsUtilities.getAnnotationDefaultProperties(14),15:DocuViewareAnnotationsUtilities.getAnnotationDefaultProperties(15),16:DocuViewareAnnotationsUtilities.getAnnotationDefaultProperties(16),2048:DocuViewareAnnotationsUtilities.getAnnotationDefaultProperties(2048)},defaultPropertiesDisplay:{0:DocuViewareAnnotationsUtilities.getAnnotationDefaultPropertiesDisplay(0),1:DocuViewareAnnotationsUtilities.getAnnotationDefaultPropertiesDisplay(1),2:DocuViewareAnnotationsUtilities.getAnnotationDefaultPropertiesDisplay(2),
3:DocuViewareAnnotationsUtilities.getAnnotationDefaultPropertiesDisplay(3),4:DocuViewareAnnotationsUtilities.getAnnotationDefaultPropertiesDisplay(4),5:DocuViewareAnnotationsUtilities.getAnnotationDefaultPropertiesDisplay(5),6:DocuViewareAnnotationsUtilities.getAnnotationDefaultPropertiesDisplay(6),7:DocuViewareAnnotationsUtilities.getAnnotationDefaultPropertiesDisplay(7),8:DocuViewareAnnotationsUtilities.getAnnotationDefaultPropertiesDisplay(8),9:DocuViewareAnnotationsUtilities.getAnnotationDefaultPropertiesDisplay(9),
10:DocuViewareAnnotationsUtilities.getAnnotationDefaultPropertiesDisplay(10),11:DocuViewareAnnotationsUtilities.getAnnotationDefaultPropertiesDisplay(11),12:DocuViewareAnnotationsUtilities.getAnnotationDefaultPropertiesDisplay(12),13:DocuViewareAnnotationsUtilities.getAnnotationDefaultPropertiesDisplay(13),14:DocuViewareAnnotationsUtilities.getAnnotationDefaultPropertiesDisplay(14),15:DocuViewareAnnotationsUtilities.getAnnotationDefaultPropertiesDisplay(15),16:DocuViewareAnnotationsUtilities.getAnnotationDefaultPropertiesDisplay(16),
2048:DocuViewareAnnotationsUtilities.getAnnotationDefaultPropertiesDisplay(2048)},setDefaultPropertiesValues:function(a,b){this.defaultProperties[a]=this.mergeAnnotationProperties(a,b)},setDefaultPropertiesToDisplay:function(a,b){this.defaultPropertiesDisplay[a]=b},setDefaultAuthor:function(a){this.defaultAuthor=a},getAnnotationTitleFromType:function(b){var c="";switch(b){case 0:c=a.Localize("_label_rubber_stamp_properties");break;case 1:c=a.Localize("_label_rectangle_properties");break;case 2:c=
a.Localize("_label_rectangle_highlighter_properties");break;case 3:c=a.Localize("_label_line_properties");break;case 4:c=a.Localize("_label_line_arrow_properties");break;case 5:c=a.Localize("_label_connected_line_properties");break;case 6:c=a.Localize("_label_ellipse_properties");break;case 7:c=a.Localize("_label_embedded_image_properties");break;case 8:c=a.Localize("_label_text_properties");break;case 9:c=a.Localize("_label_stickynote_properties");break;case 10:c=a.Localize("_label_freehand_properties");
break;case 11:c=a.Localize("_label_freehand_highlighter_properties");break;case 12:c=a.Localize("_label_freehand_polygon_properties");break;case 13:c=a.Localize("_label_link_properties");break;case 14:c=a.Localize("_label_polygon_properties");break;case 15:c=a.Localize("_label_ruler_properties");break;case 16:c=a.Localize("_label_polyruler_properties")}return c},editSelectedAnnotation:function(){if(null!=a.dom.selectedAnnotation&&a.dom.selectedAnnotation.annotApp.canEdit){var b=a.dom.selectedAnnotation;
a.EditAnnotInteractive(b,this.defaultPropertiesDisplay[b.annotApp.properties.type])}},getAllFirstAnnotationComments:function(b){for(var c=[],d=0;d<a.cache.AnnotsComments.length;d++){var g=!1,e=a.Internal.Annotations.getFirstAnnotationCommentOfDiscussion(a.cache.AnnotsComments[d].annotApp.id);if(null!=e){for(var f=0;f<c.length;f++)if(c[f].comment.annotApp.id===e.annotApp.id){g=!0;break}g||c.push({comment:e})}}null!=b&&b(c);return c},getFirstAnnotationCommentOfAnnotationFromId:function(b,c){if(null!=
b&&""!=b){var d=a.Internal.Annotations.getAllFirstAnnotationComments(a.sortCommentsBy);if(null!=d)for(var g=0;g<d.length;g++)if(d[g].comment.annotApp.properties.previousGuid===b)return d[g]}return null},getAnnotationCommentFromId:function(b){if(null!=b&&""!=b)for(var c=0;c<a.cache.AnnotsComments.length;c++)if(a.cache.AnnotsComments[c].annotApp.id===b)return a.cache.AnnotsComments[c];return null},getFirstAnnotationCommentOfDiscussion:function(b){b=a.Internal.Annotations.getAnnotationCommentFromId(b);
if(null!=b){for(;;){var c=a.Internal.Annotations.getAnnotationCommentFromId(b.annotApp.properties.previousGuid);if(null!=c)b=c;else break}return b}return null},getFirstAnnotationCommentAnswerOfDiscussion:function(b){b=a.Internal.Annotations.getAnnotationCommentFromId(b);return null!=b&&(b=a.Internal.Annotations.getFirstAnnotationCommentOfDiscussion(b.annotApp.id),null!=b)?a.Internal.Annotations.getAnnotationCommentFromId(b.annotApp.properties.nextGuid):null},getLastAnnotationCommentAnswerOfDiscussion:function(b){b=
a.Internal.Annotations.getAnnotationCommentFromId(b);if(null!=b){for(;;){var c=a.Internal.Annotations.getAnnotationCommentFromId(b.annotApp.properties.nextGuid);if(null!=c)b=c;else break}return b}return null},getAnnotationCommentOwnerAnnotApp:function(b,c){if(null==b||2048!=b.properties.type)return null;if(c)for(;;){var d=a.Internal.Annotations.getAnnotationCommentOwnerAnnotApp(b,!1);if(null!=d)if(2048==d.properties.type)b=d;else return d;else break}if(null!=a.cache.AnnotsComments)for(d=0;d<a.cache.AnnotsComments.length;d++){var g=
a.cache.AnnotsComments[d];if(g.annotApp.id==b.properties.previousGuid)return g.annotApp}if(null!=a.cache.Annots)for(d=0;d<a.cache.Annots.length;d++)if(g=a.cache.Annots[d],g.annotApp.id==b.properties.previousGuid)return g.annotApp;return null},deleteAnnotationComment:function(b,c){for(var d=!1,g=0;g<a.cache.AnnotsComments.length;g++)if(a.cache.AnnotsComments[g].annotApp.id===b){var d=a.Internal.Annotations.getAnnotationCommentFromId(a.cache.AnnotsComments[g].annotApp.properties.nextGuid),l=a.Internal.Annotations.getAnnotationCommentFromId(a.cache.AnnotsComments[g].annotApp.properties.previousGuid);
null==d?null!=l&&(l.annotApp.properties.nextGuid=null):null!=l?(l.annotApp.properties.nextGuid=d.annotApp.id,d.annotApp.properties.previousGuid=l.annotApp.id):d.annotApp.properties.previousGuid=null;a.cache.AnnotsComments.splice(g,1);d=!0;break}return d?(c&&a.refreshCommentsPanel(),DocuViewareAPI.Status.OK):DocuViewareAPI.Status.GenericError},scrollToSelectedAnnotationCommentVisibility:function(b){var c=jQuery("#dvcomment-"+b);b=jQuery("#commentsContainer"+a.uniqueID);var d=c.offset().top+b.scrollTop(),
g=c.innerHeight(),e=d+g;c.is(":visible")||(c.css({visibility:"hidden"}).show(),d=c.offset().top,c.css({visibility:"",display:""}));var c=b.scrollTop(),f=c+b.innerHeight();d-g<c?b.animate({scrollTop:d-g},600):e>f&&b.animate({scrollTop:b.scrollTop()+e-f},600)},resetAnnotationCommentSelection:function(){var b=a.Internal.Annotations.getSelectedAnnotationComment();b&&jQuery(b).removeClass("dvcomment-selected");jQuery(a.dom.commentsArea).find("#commentsContainer"+a.uniqueID).children(".dvcomment").children().each(function(){jQuery(this).find(".dvcomment-header").css({border:"",
"padding-left":"","padding-top":"","padding-bottom":"","padding-right":""});jQuery(this).find(".dvcomment-message").css({"border-bottom":"","border-left":"","border-right":"","padding-left":"","padding-right":"","padding-bottom":""});jQuery(this).children(".dvcomment-content").children(".dvanswer").each(function(){jQuery(this).find(".dvcomment-header").css({border:"","padding-left":"","padding-top":"","padding-bottom":"","padding-right":""});jQuery(this).find(".dvcomment-message").css({"border-bottom":"",
"border-left":"","border-right":"","padding-left":"","padding-right":"","padding-bottom":""})})})},getSelectedAnnotationComment:function(){return jQuery(a.dom.commentsArea).find("#commentsContainer"+a.uniqueID).find(".dvcomment-selected")},selectAnnotationCommentById:function(b,c){var d=a.Internal.Annotations.getSelectedAnnotationComment();jQuery(d).attr("id")!=="dvcomment-"+b&&(a.Internal.Annotations.resetAnnotationCommentSelection(),d=document.getElementById("dvcomment-"+b),jQuery(d).addClass("dvcomment-selected"),
jQuery(d).children(".dvcomment-header").css({border:"3px solid "+a.dom.UIconfig.headerColor,"padding-left":"7px","padding-top":"7px","padding-bottom":"7px","padding-right":"7px"}),jQuery(d).children(".dvcomment-content").children(".dvcomment-message").css({"border-bottom":"3px solid "+a.dom.UIconfig.headerColor,"border-left":"3px solid "+a.dom.UIconfig.headerColor,"border-right":"3px solid "+a.dom.UIconfig.headerColor,"padding-left":"8px","padding-right":"8px","padding-bottom":"8px"}),c&&a.Internal.Annotations.scrollToSelectedAnnotationCommentVisibility(b))},
removeSelectedAnnotation:function(){null!=a.dom.selectedAnnotation&&a.dom.selectedAnnotation.annotApp.canDelete&&a.DisplayDialogForm(jQuery(a.dom.annotationActionRemoveConfirm),a.Localize("_title_confirm_annotation_removal"),null,function(){jQuery("#annotationRemoveConfirmMessage"+a.uniqueID).html(a.Localize("_message_confirm_annotation_removal"))},null,[{text:a.Localize("_label_no"),click:function(){jQuery(a.dom.annotationActionRemoveConfirm).dvDialog("close")}},{text:a.Localize("_label_yes"),"class":"btn-valid",
click:function(){null!=a.dom.selectedAnnotation&&a.DeleteAnnotationById(a.dom.selectedAnnotation.annotApp.id);jQuery(a.dom.annotationActionRemoveConfirm).dvDialog("close")}}])},stopAnnotInteractiveAdd:function(){null!=this.currentAnnotProperties&&(this.currentAnnotProperties=null,this.currentAnnotPageNo=0,a.events.pathPoints=null,a.events.isDrawingPath=!1,a.SetMouseMode(0),a.events.ownMouseEvents=!1)},beginAddAnnotInteractive:function(b,c){if(a.hasPendingAction(!0))return DocuViewareAPI.Status.GenericError;
this.unselectAll();if(null!=a.cache.Annots)for(var d=0;d<a.cache.Annots.length;d++)a.cache.Annots[d].updateCursor(!0);this.currentAnnotProperties=b;this.currentAnnotPageNo=c;5==b.type||10==b.type||11==b.type||16==b.type?a.SetMouseMode(2):(a.SetMouseMode(1),3==b.type||4==b.type||15==b.type?a.Internal.Selection.selectionArea.setLineMode(1):a.Internal.Selection.selectionArea.setLineMode(0));a.events.ownMouseEvents=!0;return DocuViewareAPI.Status.OK},addAnnotInteractive:function(){a.SetMouseMode(0);a.events.ownMouseEvents=
!1;var b=this.currentAnnotPageNo,c=a.Internal.Pages.getRenderingState(b),d=a.Internal.Selection.selectionArea.getPageBounds(),e=a.Internal.Matrix.scale(a.Internal.Matrix.invert(c.contentMatrix),1/96,1/96,!1);a.Internal.Matrix.transformBBox(e,0,d);this.currentAnnotProperties.left=a.Internal.Utilities.roundEx(d.left,7);this.currentAnnotProperties.top=a.Internal.Utilities.roundEx(d.top,7);this.currentAnnotProperties.width=a.Internal.Utilities.roundEx(d.width,7);this.currentAnnotProperties.height=a.Internal.Utilities.roundEx(d.height,
7);d=a.Internal.Selection.selectionArea.getStartPosition();a.Internal.Matrix.transformPoint(e,d);if(5==this.currentAnnotProperties.type||10==this.currentAnnotProperties.type||11==this.currentAnnotProperties.type||16==this.currentAnnotProperties.type)for(this.currentAnnotProperties.startX=-1,this.currentAnnotProperties.startY=-1,this.currentAnnotProperties.pathData=[],d=0;d<a.events.pathPoints.length;d++)if(131072!=a.events.pathPoints[d].x&&131072!=a.events.pathPoints[d].x){var f={x:a.events.pathPoints[d].x-
c.pageLeft,y:a.events.pathPoints[d].y-c.pageTop};a.Internal.Matrix.transformPoint(e,f);this.currentAnnotProperties.pathData.push(a.Internal.Utilities.roundEx(f.x,7));this.currentAnnotProperties.pathData.push(a.Internal.Utilities.roundEx(f.y,7))}else this.currentAnnotProperties.pathData.push(131072),this.currentAnnotProperties.pathData.push(131072);else this.currentAnnotProperties.startX=a.Internal.Utilities.roundEx(d.x,7),this.currentAnnotProperties.startY=a.Internal.Utilities.roundEx(d.y,7);c=a.Internal.Annotations.defaultAuthor;
e=null;null!=c&&(e={author:c});a.ajax.PostBaseRequest({url:a.appControllerPath+"/newannotation"+(a.useIdInRoot?"/1":""),data:{extProperties:e,properties:this.currentAnnotProperties,pageNo:b},success:function(b){if((b="string"===typeof b?eval("("+b+")"):b)&&null!=b.annotApp&&b.annotApp.status==DocuViewareAPI.Status.OK){var c=a.Internal.Pages.getRenderingState(b.annotApp.pageNo),c=a.Internal.Annotations.newController(b.annotApp,c.pageLeft,c.pageTop,c.contentMatrix);a.dom.singlePageView&&b.annotApp.pageNo!=
a.GetCurrentPage()||c.render();a.updateThumbnails([b.annotApp.pageNo]);if(a.callbacks.onAnnotationAdded)a.callbacks.onAnnotationAdded({id:b.annotApp.id,pageNo:b.annotApp.pageNo})}else a.ajax.HandleError(b)}},!1)},setAnnotationsComments:function(b){a.cache.AnnotsComments=b},addAnnotationComment:function(b){if(null!=b&&(null==a.cache.AnnotsComments?a.cache.AnnotsComments=[b]:a.cache.AnnotsComments.push(b),null!=b.annotApp.properties.previousGuid&&""!=b.annotApp.properties.previousGuid)){var c=a.Internal.Annotations.getAnnotationCommentFromId(b.annotApp.properties.previousGuid);
null!=c&&(c.annotApp.properties.nextGuid=b.annotApp.id)}},addAnnotation:function(b){null==a.cache.Annots?a.cache.Annots=[b]:a.cache.Annots.push(b)},getAnnotationFromCanvas:function(b){if(null!=a.cache.Annots)for(var c=0;c<a.cache.Annots.length;c++){var d=a.cache.Annots[c];if(d.canvas===b)return d}return null},removePageAnnots:function(b){this.unselectAll(b);if(null!=a.cache.Annots)for(var c=0;c<a.cache.Annots.length;c++){var d=a.cache.Annots[c];d.annotApp.pageNo==b&&(d.canvas.parentNode==a.dom.viewerArea&&
a.dom.viewerArea.removeChild(d.canvas),a.cache.Annots.splice(c,1),c--)}},removeAll:function(){this.unselectAll();a.cache.Annots=null},unselectAll:function(b){if(!b||null!=a.dom.selectedAnnotation&&a.dom.selectedAnnotation.annotApp.pageNo==b)null!=a.dom.annotationsActionButtons&&jQuery(a.dom.annotationsActionButtons).hide(),a.dom.selectedAnnotation=null;for(var c=this.selected.length-1;0<=c;c--)b&&this.selected[c].annotApp.pageNo!=b||this.selected[c].setSelectState(!1)},selectById:function(b){a.Internal.Annotations.unselectAll();
if(null!=a.cache.Annots)for(var c=0;c<a.cache.Annots.length;c++){var d=a.cache.Annots[c];if(d.annotApp.id===b){d.setSelectState(!0);break}}},subrender:function(b,c,d){for(var g=0,l=b;l<d.annotApp.commands.length;l++)switch(d.annotApp.commands[l]){case 0:c.save();break;case 1:c.restore();break;case 2:c.transform(d.annotApp.args[l][0],d.annotApp.args[l][1],d.annotApp.args[l][2],d.annotApp.args[l][3],d.annotApp.args[l][4],d.annotApp.args[l][5]);break;case 3:c.fillStyle="rgba("+d.annotApp.args[l][1]+
","+d.annotApp.args[l][2]+","+d.annotApp.args[l][3]+","+d.annotApp.args[l][0]/255+")";break;case 4:c.beginPath();c.moveTo(d.annotApp.args[l][0],d.annotApp.args[l][1]);c.lineTo(d.annotApp.args[l][0]+d.annotApp.args[l][2],d.annotApp.args[l][1]);c.lineTo(d.annotApp.args[l][0]+d.annotApp.args[l][2],d.annotApp.args[l][1]+d.annotApp.args[l][3]);c.lineTo(d.annotApp.args[l][0],d.annotApp.args[l][1]+d.annotApp.args[l][3]);c.closePath();c.clip();break;case 5:c.globalAlpha=.5;break;case 6:c.globalAlpha=d.annotApp.args[l][0]/
255;break;case 7:for(var e=DocuViewareEncodingUtilities.base64.decode(d.annotApp.data[l]),f=e.length,h=new DocuViewareEncodingUtilities.TypedArray.Uint8Array(f),p=0;p<f;p++)h[p]=e.charCodeAt(p);var e=d.annotApp.args[l].length/2,f=[{x:0,y:0},{x:0,y:0},{x:0,y:0}],k=0;c.beginPath();for(p=0;p<e;p++){var m=128<=h[p];m&&(h[p]-=128);switch(h[p]){case 0:c.moveTo(d.annotApp.args[l][2*p],d.annotApp.args[l][2*p+1]);k=0;break;case 1:c.lineTo(d.annotApp.args[l][2*p],d.annotApp.args[l][2*p+1]);k=0;break;case 3:f[k].x=
d.annotApp.args[l][2*p],f[k].y=d.annotApp.args[l][2*p+1],k+=1,3==k&&(c.bezierCurveTo(f[0].x,f[0].y,f[1].x,f[1].y,f[2].x,f[2].y),k=0)}m&&c.closePath()}c.fill();break;case 8:var n=d.annotApp.args[l][0],q=d.annotApp.args[l][1],r=d.annotApp.args[l][2],t=d.annotApp.args[l][3];g++;if(0==b&&d.cachedImages.length>=g)c.drawImage(d.cachedImages[g-1],n,q,r,t);else{var v=new Image;v.onload=function(){c.drawImage(v,n,q,r,t);a.Internal.Annotations.subrender(l+1,c,d)};v.src="data:image/png;base64,"+d.annotApp.data[l];
d.cachedImages.push(v);return}}c.restore();d.isSelected&&(c.save(),c.lineWidth=1,c.strokeStyle="rgba(255, 0, 0, 1.0)",c.strokeRect(a.Internal.Annotations.CANVAS_PADDING,a.Internal.Annotations.CANVAS_PADDING,d.canvas.width-2*a.Internal.Annotations.CANVAS_PADDING,d.canvas.height-2*a.Internal.Annotations.CANVAS_PADDING),d.annotApp.canResize&&!d.annotApp.properties.autoSize&&(c.fillRect(a.Internal.Annotations.CANVAS_PADDING-d.gripSize/2,a.Internal.Annotations.CANVAS_PADDING-d.gripSize/2,d.gripSize,d.gripSize),
c.fillRect(d.canvas.width/2-d.gripSize/2,a.Internal.Annotations.CANVAS_PADDING-d.gripSize/2,d.gripSize,d.gripSize),c.fillRect(d.canvas.width-a.Internal.Annotations.CANVAS_PADDING-d.gripSize/2,a.Internal.Annotations.CANVAS_PADDING-d.gripSize/2,d.gripSize,d.gripSize),c.fillRect(d.canvas.width-a.Internal.Annotations.CANVAS_PADDING-d.gripSize/2,d.canvas.height/2-d.gripSize/2,d.gripSize,d.gripSize),c.fillRect(d.canvas.width-a.Internal.Annotations.CANVAS_PADDING-d.gripSize/2,d.canvas.height-a.Internal.Annotations.CANVAS_PADDING-
d.gripSize/2,d.gripSize,d.gripSize),c.fillRect(d.canvas.width/2-d.gripSize/2,d.canvas.height-a.Internal.Annotations.CANVAS_PADDING-d.gripSize/2,d.gripSize,d.gripSize),c.fillRect(a.Internal.Annotations.CANVAS_PADDING-d.gripSize/2,d.canvas.height-a.Internal.Annotations.CANVAS_PADDING-d.gripSize/2,d.gripSize,d.gripSize),c.fillRect(a.Internal.Annotations.CANVAS_PADDING-d.gripSize/2,d.canvas.height/2-d.gripSize/2,d.gripSize,d.gripSize)),d.annotApp.canRotate&&(b=d.canvas.width/2,g=d.canvas.height/2,h=d.gripSize/
2,c.beginPath(),c.arc(b,g,h,0,2*Math.PI,!1),c.fill()),c.restore());c=null},newController:function(b,c,d,e){var g={cachedImages:[]};g.annotApp=b;g.updateNo=0;g.pendingUpdate=0;g.isMoving=!1;g.isRotating=!1;g.resizingMode=-1;g.isSelected=!1;g.stopMoving=function(){this.isMoving&&(this.isMoving=!1)};g.stopResizing=function(){-1!=this.resizingMode&&(this.resizingMode=-1)};g.stopRotating=function(){this.isRotating&&(this.isRotating=!1)};g.stopEditing=function(){this.isEditing()&&(this.stopMoving(),this.stopResizing(),
this.stopRotating(),this.isModified()&&this.updateAnnotation(!1,null))};g.hasPendingUpdate=function(){return 0<this.pendingUpdate};g.isEditing=function(){return this.isRotating||this.isMoving||-1!=this.resizingMode};g.setSelectState=function(b,c){if(b!=this.isSelected){if(b)this.gripSize=a.Internal.Annotations.DEFAULT_GRIP_SIZE*(c?3:1),this.canvas.bakzIndex=this.canvas.style.zIndex,this.canvas.style.zIndex=16777270,this.canvas.tabIndex=1,a.Internal.Annotations.selected.push(this);else{this.canvas.style.zIndex=
this.canvas.bakzIndex;this.canvas.removeAttribute("tabindex");this.stopEditing();for(var d=a.Internal.Annotations.selected.length-1;0<=d;d--)if(a.Internal.Annotations.selected[d]===this){a.Internal.Annotations.selected.splice(d,1);break}}this.isSelected=b;this.render(!1,b);if(a.callbacks.onAnnotationSelectedStateChanged)a.callbacks.onAnnotationSelectedStateChanged({id:this.annotApp.id,state:b})}};g.editPointsHitTest=function(b,c,d){if(a.serverCtx.annotationEditorMode&&this.annotApp.canMove&&this.annotApp.canSelect&&
this.annotApp.pageNo==a.GetCurrentPage()){var g=this.canvas.getBoundingClientRect(),l=g.left+a.Internal.Annotations.CANVAS_PADDING,e=g.top+a.Internal.Annotations.CANVAS_PADDING,f=g.right-a.Internal.Annotations.CANVAS_PADDING,g=g.bottom-a.Internal.Annotations.CANVAS_PADDING,p=l+(f-l)/2,h=e+(g-e)/2;if(b>=l-d&&b<=l+d&&c>=e-d&&c<=e+d)return 0;if(b>=f-d&&b<=f+d&&c>=e-d&&c<=e+d)return 1;if(b>=f-d&&b<=f+d&&c<=g+d&&c>=g-d)return 2;if(b>=l-d&&b<=l+d&&c<=g+d&&c>=g-d)return 3;if(b>=l-d&&b<=l+d&&c<=h+d&&c>=h-
d)return 4;if(b>=p-d&&b<=p+d&&c>=e-d&&c<=e+d)return 5;if(b>=f-d&&b<=f+d&&c<=h+d&&c>=h-d)return 6;if(b>=p-d&&b<=p+d&&c<=g+d&&c>=g-d)return 7;if(b>=p-d&&b<=p+d&&c<=h+d&&c>=h-d)return 8}return-1};g.isModified=function(){return this.rotationinit!=this.annotApp.rotation||this.annotrect.left!=this.annotrectNew.left||this.annotrect.top!=this.annotrectNew.top||this.annotrect.width!=this.annotrectNew.width||this.annotrect.height!=this.annotrectNew.height};g.addWidth=function(a,b){this.annotrectNew.width+=
a;this.annotApp.squaredBox&&(this.annotrectNew.height+=a);b&&this.render(!1)};g.addHeight=function(a,b){this.annotrectNew.height+=a;this.annotApp.squaredBox&&(this.annotrectNew.width+=a);b&&this.render(!1)};g.updateCursor=function(b){if(!this.isEditing())if(this.annotApp.canSelect&&!b&&a.serverCtx.annotationEditorMode)if(this.annotApp.pageNo!=a.GetCurrentPage())this.cursorMgr.setStdCursor("not-allowed");else{b=this.editPointsHitTest(a.events.mouseX,a.events.mouseY,a.Internal.Annotations.DEFAULT_GRIP_SIZE);
if(this.isSelected){if(this.annotApp.canResize&&!this.annotApp.properties.autoSize){if(0==b){this.cursorMgr.setStdCursor("nw-resize");return}if(1==b){this.cursorMgr.setStdCursor("ne-resize");return}if(2==b){this.cursorMgr.setStdCursor("nwse-resize");return}if(3==b){this.cursorMgr.setStdCursor("nesw-resize");return}if(4==b){this.cursorMgr.setStdCursor("w-resize");return}if(5==b){this.cursorMgr.setStdCursor("n-resize");return}if(6==b){this.cursorMgr.setStdCursor("w-resize");return}if(7==b){this.cursorMgr.setStdCursor("n-resize");
return}}if(this.annotApp.canRotate&&8==b){this.cursorMgr.setCustomCursorClass("rotateCursor");return}}this.annotApp.canMove?this.cursorMgr.setStdCursor("all-scroll"):this.cursorMgr.setStdCursor("default")}else this.cursorMgr.setStdCursor("")};g.render=function(b,c){var d=this.annotrectNew.width/this.annotrect.width,g=this.annotrectNew.height/this.annotrect.height,l={left:this.annotbox.left+this.pageLeft+(this.annotrectNew.left-this.annotrect.left),top:this.annotbox.top+this.pageTop+(this.annotrectNew.top-
this.annotrect.top),width:this.annotbox.width*d,height:this.annotbox.height*g};0==this.annotApp.rotation||6==this.annotApp.properties.type&&this.annotApp.squaredBox||a.Internal.Matrix.transformBBox({a:1,b:0,c:0,d:1,e:0,f:0},this.annotApp.rotation,l);var e=l.left-a.Internal.Annotations.CANVAS_PADDING,f=l.top-a.Internal.Annotations.CANVAS_PADDING,p=l.width+2*a.Internal.Annotations.CANVAS_PADDING,h=l.height+2*a.Internal.Annotations.CANVAS_PADDING;this.canvas.style.left=e+"px";this.canvas.style.top=f+
"px";this.isSelected&&(null!=a.dom.annotationsActionButtons&&(null!=a.dom.commentsArea?(this.annotApp.canEdit&&this.annotApp.canDelete&&(jQuery(a.dom.annotationsActionButtons).find("#annotationActionEditButton"+a.uniqueID).show(),jQuery(a.dom.annotationsActionButtons).find("#annotationActionButtonsSplitter1"+a.uniqueID).show(),jQuery(a.dom.annotationsActionButtons).find("#annotationActionCommentButton"+a.uniqueID).show(),jQuery(a.dom.annotationsActionButtons).find("#annotationActionButtonsSplitter2"+
a.uniqueID).show(),jQuery(a.dom.annotationsActionButtons).find("#annotationActionDeleteButton"+a.uniqueID).show(),jQuery(a.dom.annotationsActionButtons).width(84)),this.annotApp.canEdit&&!this.annotApp.canDelete&&(jQuery(a.dom.annotationsActionButtons).find("#annotationActionEditButton"+a.uniqueID).show(),jQuery(a.dom.annotationsActionButtons).find("#annotationActionButtonsSplitter1"+a.uniqueID).show(),jQuery(a.dom.annotationsActionButtons).find("#annotationActionCommentButton"+a.uniqueID).show(),
jQuery(a.dom.annotationsActionButtons).find("#annotationActionButtonsSplitter2"+a.uniqueID).hide(),jQuery(a.dom.annotationsActionButtons).find("#annotationActionDeleteButton"+a.uniqueID).hide(),jQuery(a.dom.annotationsActionButtons).width(50)),!this.annotApp.canEdit&&this.annotApp.canDelete&&(jQuery(a.dom.annotationsActionButtons).find("#annotationActionEditButton"+a.uniqueID).hide(),jQuery(a.dom.annotationsActionButtons).find("#annotationActionButtonsSplitter1"+a.uniqueID).hide(),jQuery(a.dom.annotationsActionButtons).find("#annotationActionCommentButton"+
a.uniqueID).show(),jQuery(a.dom.annotationsActionButtons).find("#annotationActionButtonsSplitter2"+a.uniqueID).show(),jQuery(a.dom.annotationsActionButtons).find("#annotationActionDeleteButton"+a.uniqueID).show(),jQuery(a.dom.annotationsActionButtons).width(50)),this.annotApp.canEdit||this.annotApp.canDelete||(jQuery(a.dom.annotationsActionButtons).find("#annotationActionEditButton"+a.uniqueID).hide(),jQuery(a.dom.annotationsActionButtons).find("#annotationActionButtonsSplitter1"+a.uniqueID).hide(),
jQuery(a.dom.annotationsActionButtons).find("#annotationActionCommentButton"+a.uniqueID).show(),jQuery(a.dom.annotationsActionButtons).find("#annotationActionButtonsSplitter2"+a.uniqueID).hide(),jQuery(a.dom.annotationsActionButtons).find("#annotationActionDeleteButton"+a.uniqueID).hide(),jQuery(a.dom.annotationsActionButtons).width(17))):(this.annotApp.canEdit&&this.annotApp.canDelete&&(jQuery(a.dom.annotationsActionButtons).find("#annotationActionEditButton"+a.uniqueID).show(),jQuery(a.dom.annotationsActionButtons).find("#annotationActionButtonsSplitter1"+
a.uniqueID).show(),jQuery(a.dom.annotationsActionButtons).find("#annotationActionCommentButton"+a.uniqueID).hide(),jQuery(a.dom.annotationsActionButtons).find("#annotationActionButtonsSplitter2"+a.uniqueID).hide(),jQuery(a.dom.annotationsActionButtons).find("#annotationActionDeleteButton"+a.uniqueID).show(),jQuery(a.dom.annotationsActionButtons).width(50)),this.annotApp.canEdit&&!this.annotApp.canDelete&&(jQuery(a.dom.annotationsActionButtons).find("#annotationActionEditButton"+a.uniqueID).show(),
jQuery(a.dom.annotationsActionButtons).find("#annotationActionButtonsSplitter1"+a.uniqueID).hide(),jQuery(a.dom.annotationsActionButtons).find("#annotationActionCommentButton"+a.uniqueID).hide(),jQuery(a.dom.annotationsActionButtons).find("#annotationActionButtonsSplitter2"+a.uniqueID).hide(),jQuery(a.dom.annotationsActionButtons).find("#annotationActionDeleteButton"+a.uniqueID).hide(),jQuery(a.dom.annotationsActionButtons).width(17)),!this.annotApp.canEdit&&this.annotApp.canDelete&&(jQuery(a.dom.annotationsActionButtons).find("#annotationActionEditButton"+
a.uniqueID).hide(),jQuery(a.dom.annotationsActionButtons).find("#annotationActionButtonsSplitter1"+a.uniqueID).hide(),jQuery(a.dom.annotationsActionButtons).find("#annotationActionCommentButton"+a.uniqueID).hide(),jQuery(a.dom.annotationsActionButtons).find("#annotationActionButtonsSplitter2"+a.uniqueID).hide(),jQuery(a.dom.annotationsActionButtons).find("#annotationActionDeleteButton"+a.uniqueID).show(),jQuery(a.dom.annotationsActionButtons).width(17))),jQuery(a.dom.annotationsActionButtons).css("left",
e+p-jQuery(a.dom.annotationsActionButtons).outerWidth()-a.Internal.Annotations.CANVAS_PADDING+"px"),jQuery(a.dom.annotationsActionButtons).css("top",f+h+"px"),this.annotApp.canEdit||this.annotApp.canDelete||null!=a.dom.commentsArea?jQuery(a.dom.annotationsActionButtons).show():jQuery(a.dom.annotationsActionButtons).hide()),c&&(a.dom.selectedAnnotation=this));b||(this.canvas.width!=p&&(this.canvas.width=p),this.canvas.height!=h&&(this.canvas.height=h),e=this.canvas.getContext("2d"),e.save(),f=this.annotmat,
f=a.Internal.Matrix.translate(f,-this.annotbox.left,-this.annotbox.top),f=a.Internal.Matrix.scale(f,d,g,!1),0!=this.annotApp.rotation&&(f=a.Internal.Matrix.rotateAt(f,this.annotApp.rotation,this.annotbox.width/2*d,this.annotbox.height/2*g,!1),f=a.Internal.Matrix.translate(f,(l.width-this.annotbox.width*d)/2,(l.height-this.annotbox.height*g)/2)),f=a.Internal.Matrix.translate(f,a.Internal.Annotations.CANVAS_PADDING,a.Internal.Annotations.CANVAS_PADDING),e.transform(f.a,f.b,f.c,f.d,f.e,f.f),a.dom.UIconfig.annotsDropShadow&&
this.annotApp.supportShadow&&(e.shadowOffsetX=2,e.shadowOffsetY=2,e.shadowBlur=4,e.shadowColor="rgba(100, 100, 100, 0.6)"),a.Internal.Annotations.subrender(0,e,this))};g.canvas=document.createElement("canvas");g.canvas.style.display="block";g.canvas.style.position="absolute";g.canvas.style.padding="0px";g.canvas.style.margin="0px";g.canvas.style.outline="0";g.canvas.style.zIndex=16E6+g.annotApp.zorder;g.cursorMgr=CreateDocuViewareCursorManager(g.canvas,a.isIEorEdge);g.updateAnnotation=function(b,
c){if(a.hasPendingAction(!0,!0))return DocuViewareAPI.Status.GenericError;var d={x:this.annotrectNew.left+this.annotrectNew.width/2,y:this.annotrectNew.top+this.annotrectNew.height/2},g={x:this.annotrectNew.width,y:this.annotrectNew.height},l=a.Internal.Matrix.scale(a.Internal.Matrix.invert({a:this.annotmat.a,b:this.annotmat.b,c:this.annotmat.c,d:this.annotmat.d,e:0,f:0}),1/96,1/96,!1),e=a.Internal.Matrix.scale(a.Internal.Matrix.invert({a:this.annotmat.a,b:this.annotmat.b,c:this.annotmat.c,d:this.annotmat.d,
e:this.annotmat.e,f:this.annotmat.f}),1/96,1/96,!1);a.Internal.Matrix.transformPoint(e,d);a.Internal.Matrix.transformPoint(l,g);this.updateNo+=1;this.pendingUpdate+=1;var f={properties:this.annotApp.properties,"delete":b,pageNo:this.annotApp.pageNo,id:this.annotApp.id,rotation:this.annotApp.rotation,left:a.Internal.Utilities.roundEx(d.x,7),top:a.Internal.Utilities.roundEx(d.y,7),width:a.Internal.Utilities.roundEx(Math.abs(g.x),7),height:a.Internal.Utilities.roundEx(Math.abs(g.y),7),updateNo:this.updateNo};
c&&(jQuery.extend(!0,f.properties,c),f.rotation=c.rotation);var p=this;a.ajax.PostAjaxRequestForDocuViewareAction({url:a.appControllerPath+"/annotupdate"+(a.useIdInRoot?"/1":""),async:!b,data:JSON.stringify({annot:f,sessionID:a.ajax.sessionID,contextID:a.ajax.contextID}),success:function(c){--p.pendingUpdate;c="string"===typeof c?eval("("+c+")"):c;if(b&&c.status==DocuViewareAPI.Status.OK||c&&null!=c.annotApp&&c.annotApp.status==DocuViewareAPI.Status.OK)if(b){if(null!=c.deletedAnnotsCommentId)for(var d=
c.deletedAnnotsCommentId.length,g=0;g<d;g++)a.Internal.Annotations.deleteAnnotationComment(c.deletedAnnotsCommentId[g],g==d-1);null!=a.dom.annotationsActionButtons&&jQuery(a.dom.annotationsActionButtons).hide();a.updateThumbnails([c.pageNo]);if(null!=a.cache.Annots)for(g=0;g<a.cache.Annots.length;g++)d=a.cache.Annots[g],d.annotApp.pageNo===c.pageNo&&(d.annotApp.id===c.id?(a.dom.viewerArea.removeChild(d.canvas),a.cache.Annots.splice(g,1),g--):d.annotApp.idx>f.idx&&d.annotApp.idx--);if(a.callbacks.onAnnotationDeleted)a.callbacks.onAnnotationDeleted({id:c.id,
pageNo:c.pageNo})}else{if(p.isEditing()||c.updateNo!=p.updateNo||(p.annotApp=c.annotApp,p.reset(),p.render(),a.updateThumbnails([c.pageNo])),a.callbacks.onAnnotationEdited)a.callbacks.onAnnotationEdited({id:c.id,pageNo:c.pageNo})}else a.ajax.HandleError(c)},error:function(b){a.ajax.HandleError(b);--p.pendingUpdate}});return DocuViewareAPI.Status.OK};a.serverCtx.annotationEditorMode&&(g.canvas.ontouchstart=function(a){1==a.changedTouches.length&&(this.mousedown(a.changedTouches[0],!0),a.preventDefault())},
g.canvas.ontouchmove=function(a){1==a.changedTouches.length&&(this.mousemove(a.changedTouches[0]),a.preventDefault())},g.canvas.ontouchend=function(a){1==a.changedTouches.length&&(this.mouseup(a.changedTouches[0]),a.preventDefault())},g.canvas.onmousedown=function(a){this.mousedown(a)},g.canvas.onmousemove=function(a){this.mousemove(a)},g.canvas.onmouseup=function(a){this.mouseup(a)},g.canvas.onmouseenter=function(a){this.mouseenter(a)},g.canvas.onmouseleave=function(a){this.mouseleave(a)},g.canvas.onkeyup=
function(a){this.keyup(a)},g.canvas.ondblclick=function(a){this.dblClick(a)},g.canvas.mouseenter=function(b){a.Internal.Annotations.mouseOverAnnot=!0},g.canvas.mouseleave=function(b){a.Internal.Annotations.mouseOverAnnot=!1},g.canvas.mouseup=function(b){a.events.mouseup(b)},g.canvas.mousedown=function(b,c){if(a.events.ownMouseEvents)a.events.mousedown(b);else{var d=a.Internal.Annotations.getAnnotationFromCanvas(this),g=d.annotApp.pageNo!=a.GetCurrentPage();if(!g){if(d.annotApp.canSelect){a.Internal.Annotations.unselectAll();
d.setSelectState(!0,c);var l=d.editPointsHitTest(b.clientX,b.clientY,a.Internal.Annotations.DEFAULT_GRIP_SIZE*(c?3:1));d.annotApp.canResize&&!d.annotApp.properties.autoSize&&-1!=l&&8!=l?d.resizingMode=l:d.annotApp.canRotate&&8==l?d.isRotating=!0:d.annotApp.canMove&&(d.isMoving=!0)}a.cache.AnnotsComments&&(l=a.Internal.Annotations.getFirstAnnotationCommentOfAnnotationFromId(d.annotApp.id),null!=l?a.Internal.Annotations.selectAnnotationCommentById(l.comment.annotApp.id,!0):a.Internal.Annotations.resetAnnotationCommentSelection())}a.events.mouseX=
b.clientX;a.events.mouseY=b.clientY;d.updateCursor();g&&3!=a.events.mouseMode&&4!=a.events.mouseMode&&a.events.mousedown(b)}},g.canvas.mousemove=function(b){a.events.ownMouseEvents?a.events.mousemove(b):(a.events.mousemove(b),a.Internal.Annotations.getAnnotationFromCanvas(this).updateCursor())},g.canvas.keyup=function(b){13==b.keyCode?a.Internal.Annotations.editSelectedAnnotation():46==b.keyCode&&a.Internal.Annotations.removeSelectedAnnotation()},g.canvas.dblClick=function(b){a.dom.enableAnnotEditionOnDblClick&&
a.Internal.Annotations.editSelectedAnnotation()});g.updatePageInfo=function(a,b,c){this.annotmat=c;this.pageLeft=a;this.pageTop=b;this.reset()};g.reset=function(){this.rotationinit=this.annotApp.rotation;this.annotbaserect={left:this.annotApp.rect.Left,top:this.annotApp.rect.Top,width:this.annotApp.rect.Right-this.annotApp.rect.Left,height:this.annotApp.rect.Bottom-this.annotApp.rect.Top};this.annotbox={left:this.annotApp.bbox.Left,top:this.annotApp.bbox.Top,width:this.annotApp.bbox.Right-this.annotApp.bbox.Left,
height:this.annotApp.bbox.Bottom-this.annotApp.bbox.Top};this.annotrect={left:this.annotbaserect.left,top:this.annotbaserect.top,width:this.annotbaserect.width,height:this.annotbaserect.height};a.Internal.Matrix.transformBBox(a.Internal.Matrix.scale(this.annotmat,96,96,!0),0,this.annotrect);a.Internal.Matrix.transformBBox(a.Internal.Matrix.scale(this.annotmat,96,96,!0),0,this.annotbox);this.annotrectNew={left:this.annotrect.left,top:this.annotrect.top,width:this.annotrect.width,height:this.annotrect.height};
var b=Math.min(this.annotrect.left,this.annotbox.left),c=Math.min(this.annotrect.top,this.annotbox.top),d=Math.max(this.annotrect.top+this.annotrect.height,this.annotbox.top+this.annotbox.height),g=Math.max(this.annotrect.left+this.annotrect.width,this.annotbox.left+this.annotbox.width);this.annotbox.left=b;this.annotbox.top=c;this.annotbox.width=g-b;this.annotbox.height=d-c};a.Internal.Annotations.addAnnotation(g);g.updatePageInfo(c,d,e);b.visible&&(13!==g.annotApp.properties.type||a.serverCtx.annotationEditorMode||
(jQuery(g.canvas).hover(function(){jQuery(this).css("cursor","pointer")}),jQuery(g.canvas).on("click",function(b){b.preventDefault();b=g.annotApp.properties.link;DocuViewareUtilities.isValidURL(b)?window.open(b,"_blank"):"page:"===b.substring(0,5)&&(b=b.split(":")[1],isNaN(b)||isNaN(parseInt(b,10))||b<=a.serverCtx.pageCount&&a.SelectPage(b))})),a.dom.viewerArea.appendChild(g.canvas));return g},mergeAnnotationProperties:function(a,b){var c=jQuery.extend(!0,{},this.defaultProperties[a]);"object"===
typeof b&&jQuery.each(b,function(a,b){a in c&&(c[a]=b)});return c},showAnnotationPropertiesUI:function(b,c,d,e){a.Internal.Annotations.annotEdit=d;jQuery(a.dom.annotationDialogFormContainer).find(".dv-annotation-control").hide();jQuery(a.dom.annotationDialogFormContainer).find("#annotation_auto_creation"+a.uniqueID).hide();jQuery(a.dom.annotationDialogFormContainer).children().find(":disabled").prop("disabled",!1);jQuery.each(b,function(d,g){switch(d){case "fill":jQuery(a.dom.annotationDialogForm).find("input[name='annotation_fill_input"+
a.uniqueID+"']").prop("checked",g).trigger("change");if(!e||e&&Array.isArray(e)&&-1!=e.indexOf("fill"))jQuery(a.dom.annotationDialogForm).find("#annotation_background_fieldset"+a.uniqueID).css("display","inline-block"),jQuery(a.dom.annotationDialogForm).find("#annotation_fill_control"+a.uniqueID).css("display","inline-block"),jQuery(a.dom.annotationDialogForm).find("#annotation_fill"+a.uniqueID).css("display","inline-block");break;case "fillColor":var l=a.Internal.Utilities.color2Object(g);jQuery(a.dom.annotationDialogForm).find("input[name='annotation_fill_color_input"+
a.uniqueID+"']").attr("data-opacity",l?l.a:1);jQuery(a.dom.annotationDialogForm).find("input[name='annotation_fill_color_input"+a.uniqueID+"']").val(a.Internal.Utilities.color2Hex(g));if(!e||e&&Array.isArray(e)&&-1!=e.indexOf("fillColor"))jQuery(a.dom.annotationDialogForm).find("#annotation_background_fieldset"+a.uniqueID).css("display","inline-block"),jQuery(a.dom.annotationDialogForm).find("#annotation_fill_color_control"+a.uniqueID).css("display","inline-block"),jQuery(a.dom.annotationDialogForm).find("#annotation_fill"+
a.uniqueID).css("display","inline-block");break;case "dashCap":jQuery(a.dom.annotationDialogForm).find("[name='annotation_dash_cap_select"+a.uniqueID+"'][value='"+g+"']:radio").prop("checked",!0);if(!e||e&&Array.isArray(e)&&-1!=e.indexOf("dashCap"))jQuery(a.dom.annotationDialogForm).find("#annotation_background_fieldset"+a.uniqueID).css("display","inline-block"),jQuery(a.dom.annotationDialogForm).find("#annotation_dash_cap"+a.uniqueID).css("display","inline-block");break;case "dashStyle":jQuery(a.dom.annotationDialogForm).find("select[name='annotation_dash_style_select"+
a.uniqueID+"']").find("option[value='"+g+"']").prop("selected",!0);if(!e||e&&Array.isArray(e)&&-1!=e.indexOf("dashStyle"))jQuery(a.dom.annotationDialogForm).find("#annotation_background_fieldset"+a.uniqueID).css("display","inline-block"),jQuery(a.dom.annotationDialogForm).find("#annotation_dash_style"+a.uniqueID).css("display","inline-block");break;case "stroke":jQuery(a.dom.annotationDialogForm).find("input[name='annotation_stroke_input"+a.uniqueID+"']").prop("checked",g).trigger("change");if(!e||
e&&Array.isArray(e)&&-1!=e.indexOf("stroke"))jQuery(a.dom.annotationDialogForm).find("#annotation_background_fieldset"+a.uniqueID).css("display","inline-block"),jQuery(a.dom.annotationDialogForm).find("#annotation_stroke"+a.uniqueID).css("display","inline-block"),jQuery(a.dom.annotationDialogForm).find("#annotation_stroke_control"+a.uniqueID).css("display","inline-block");break;case "strokeColor":l=a.Internal.Utilities.color2Object(g);jQuery(a.dom.annotationDialogForm).find("input[name='annotation_stroke_color_input"+
a.uniqueID+"']").attr("data-opacity",l?l.a:1);jQuery(a.dom.annotationDialogForm).find("input[name='annotation_stroke_color_input"+a.uniqueID+"']").val(a.Internal.Utilities.color2Hex(g));if(!e||e&&Array.isArray(e)&&-1!=e.indexOf("strokeColor"))jQuery(a.dom.annotationDialogForm).find("#annotation_background_fieldset"+a.uniqueID).css("display","inline-block"),jQuery(a.dom.annotationDialogForm).find("#annotation_stroke"+a.uniqueID).css("display","inline-block"),jQuery(a.dom.annotationDialogForm).find("#annotation_stroke_color_control"+
a.uniqueID).css("display","inline-block");break;case "borderWidth":0==b.type||11==b.type?(jQuery(a.dom.annotationDialogForm).find("input[name='annotation_border_width_input"+a.uniqueID+"']").val(Number((96*g).toFixed(2).replace(".00",""))),jQuery(a.dom.annotationDialogForm).find("#annotation_border_width_custom_label"+a.uniqueID+" label").html(a.Localize("label_annotation_property_border_width"))):(l=parseFloat(jQuery(a.dom.annotationDialogForm).find("select[name='annotation_border_width_select"+
a.uniqueID+"']").find("option[value='"+Number((9600*g).toFixed(2).replace(".00",""))+"']").val())||0,jQuery(a.dom.annotationDialogForm).find("select[name='annotation_border_width_select"+a.uniqueID+"']").find("option[value='"+l+"']").prop("selected",!0).trigger("change"),0==l&&jQuery(a.dom.annotationDialogForm).find("input[name='annotation_border_width_input"+a.uniqueID+"']").val(Number((96*g).toFixed(2).replace(".00",""))),jQuery(a.dom.annotationDialogForm).find("#annotation_border_width_custom_label"+
a.uniqueID+" label").html("&nbsp;"));if(!e||e&&Array.isArray(e)&&-1!=e.indexOf("borderWidth"))jQuery(a.dom.annotationDialogForm).find("#annotation_background_fieldset"+a.uniqueID).css("display","inline-block"),0==b.type||11==b.type?(jQuery(a.dom.annotationDialogForm).find("#annotation_border_width_custom"+a.uniqueID).css("display","inline-block"),jQuery(a.dom.annotationDialogForm).find("#annotation_border_width"+a.uniqueID).hide()):jQuery(a.dom.annotationDialogForm).find("#annotation_border_width"+
a.uniqueID).css("display","inline-block");break;case "opacity":jQuery(a.dom.annotationDialogForm).find("input[name='annotation_opacity_input"+a.uniqueID+"']").val(Number((100*g).toFixed(2).replace(".00","")));(!e||e&&Array.isArray(e)&&-1!=e.indexOf("opacity"))&&jQuery(a.dom.annotationDialogForm).find("#annotation_opacity"+a.uniqueID).css("display","inline-block");break;case "link":jQuery(a.dom.annotationDialogForm).find("input[name='annotation_link_input"+a.uniqueID+"']").val(g);if(!e||e&&Array.isArray(e)&&
-1!=e.indexOf("link"))jQuery(a.dom.annotationDialogForm).find("#annotation_text_fieldset"+a.uniqueID).css("display","inline-block"),jQuery(a.dom.annotationDialogForm).find("#annotation_link"+a.uniqueID).css("display","inline-block");break;case "radiusFactor":jQuery(a.dom.annotationDialogForm).find("input[name='annotation_radius_factor_input"+a.uniqueID+"']").val(Number((100*g).toFixed(2).replace(".00","")));if(!e||e&&Array.isArray(e)&&-1!=e.indexOf("radiusFactor"))jQuery(a.dom.annotationDialogForm).find("#annotation_background_fieldset"+
a.uniqueID).css("display","inline-block"),jQuery(a.dom.annotationDialogForm).find("#annotation_radius_factor"+a.uniqueID).css("display","inline-block");break;case "rotation":jQuery(a.dom.annotationDialogForm).find("input[name='annotation_rotation_input"+a.uniqueID+"']").val(Number(g.toFixed(2).replace(".00","")));(!e||e&&Array.isArray(e)&&-1!=e.indexOf("rotation"))&&jQuery(a.dom.annotationDialogForm).find("#annotation_rotation"+a.uniqueID).css("display","inline-block");break;case "squaredBox":jQuery(a.dom.annotationDialogForm).find("input[name='annotation_squared_box_input"+
a.uniqueID+"']").prop("checked",g).trigger("change");if(!e||e&&Array.isArray(e)&&-1!=e.indexOf("squaredBox"))jQuery(a.dom.annotationDialogForm).find("#annotation_background_fieldset"+a.uniqueID).css("display","inline-block"),jQuery(a.dom.annotationDialogForm).find("#annotation_squared_box"+a.uniqueID).css("display","inline-block");break;case "text":jQuery(a.dom.annotationDialogForm).find("textarea[name='annotation_text_input"+a.uniqueID+"']").val(g);if(!e||e&&Array.isArray(e)&&-1!=e.indexOf("text"))jQuery(a.dom.annotationDialogForm).find("#annotation_text_fieldset"+
a.uniqueID).css("display","inline-block"),jQuery(a.dom.annotationDialogForm).find("#annotation_text_control"+a.uniqueID).css("display","inline-block");b.canEditText||8!=b.type&&9!=b.type||jQuery(a.dom.annotationDialogForm).find("textarea[name='annotation_text_input"+a.uniqueID+"']").prop("disabled",!0);break;case "fontName":jQuery(a.dom.annotationDialogForm).find("select[name='annotation_font_name_select"+a.uniqueID+"']").find("option[value='"+g+"']").prop("selected",!0);a.setDialogAnnotationFontNamePropertiesPreview();
if(!e||e&&Array.isArray(e)&&-1!=e.indexOf("fontName"))jQuery(a.dom.annotationDialogForm).find("#annotation_text_fieldset"+a.uniqueID).css("display","inline-block"),jQuery(a.dom.annotationDialogForm).find("#annotation_font_name_control"+a.uniqueID).css("display","table-cell");break;case "fontStyle":jQuery(a.dom.annotationDialogForm).find("select[name='annotation_font_style_select"+a.uniqueID+"']").find("option[value='"+g+"']").prop("selected",!0);a.setDialogAnnotationFontStylePropertiesPreview();if(!e||
e&&Array.isArray(e)&&-1!=e.indexOf("fontStyle"))jQuery(a.dom.annotationDialogForm).find("#annotation_text_fieldset"+a.uniqueID).css("display","inline-block"),jQuery(a.dom.annotationDialogForm).find("#annotation_font_style_control"+a.uniqueID).css("display","table-cell");break;case "foreColor":l=a.Internal.Utilities.color2Object(g);jQuery(a.dom.annotationDialogForm).find("input[name='annotation_fore_color_input"+a.uniqueID+"']").attr("data-opacity",l?l.a:1);jQuery(a.dom.annotationDialogForm).find("input[name='annotation_fore_color_input"+
a.uniqueID+"']").val(a.Internal.Utilities.color2Hex(g));a.setDialogAnnotationFontColorPropertiesPreview();if(!e||e&&Array.isArray(e)&&-1!=e.indexOf("foreColor"))jQuery(a.dom.annotationDialogForm).find("#annotation_text_fieldset"+a.uniqueID).css("display","inline-block"),jQuery(a.dom.annotationDialogForm).find("#annotation_fore_color_control"+a.uniqueID).css("display","table-cell");break;case "alignment":jQuery(a.dom.annotationDialogForm).find("[name='annotation_alignment_select"+a.uniqueID+"'][value='"+
g+"']:radio").prop("checked",!0);a.setDialogAnnotationAlignmentPropertiesPreview();if(!e||e&&Array.isArray(e)&&-1!=e.indexOf("alignment"))jQuery(a.dom.annotationDialogForm).find("#annotation_text_fieldset"+a.uniqueID).css("display","inline-block"),jQuery(a.dom.annotationDialogForm).find("#annotation_alignment_control"+a.uniqueID).css("display","table-cell");break;case "autoSize":jQuery(a.dom.annotationDialogForm).find("input[name='annotation_auto_size_input"+a.uniqueID+"']").prop("checked",g).trigger("change");
if(!e||e&&Array.isArray(e)&&-1!=e.indexOf("autoSize"))jQuery(a.dom.annotationDialogForm).find("#annotation_background_fieldset"+a.uniqueID).css("display","inline-block"),jQuery(a.dom.annotationDialogForm).find("#annotation_auto_size"+a.uniqueID).css("display","inline-block");break;case "fontSize":jQuery(a.dom.annotationDialogForm).find("input[name='annotation_font_size_input"+a.uniqueID+"']").val(Number(g.toFixed(2).replace(".00","")));a.setDialogAnnotationFontColorPropertiesPreview();if(!e||e&&Array.isArray(e)&&
-1!=e.indexOf("fontSize"))jQuery(a.dom.annotationDialogForm).find("#annotation_text_fieldset"+a.uniqueID).css("display","inline-block"),jQuery(a.dom.annotationDialogForm).find("#annotation_font_size_control"+a.uniqueID).css("display","table-cell");break;case "lineAlignment":jQuery(a.dom.annotationDialogForm).find("[name='annotation_line_alignment_select"+a.uniqueID+"'][value='"+g+"']:radio").prop("checked",!0);a.setDialogAnnotationAlignmentPropertiesPreview();if(!e||e&&Array.isArray(e)&&-1!=e.indexOf("lineAlignment"))jQuery(a.dom.annotationDialogForm).find("#annotation_text_fieldset"+
a.uniqueID).css("display","inline-block"),jQuery(a.dom.annotationDialogForm).find("#annotation_line_alignment_control"+a.uniqueID).css("display","table-cell");break;case "arrowFilled":jQuery(a.dom.annotationDialogForm).find("input[name='annotation_arrow_filled_input"+a.uniqueID+"']").prop("checked",g).trigger("change");if(!e||e&&Array.isArray(e)&&-1!=e.indexOf("arrowFilled"))jQuery(a.dom.annotationDialogForm).find("#annotation_arrow_fieldset"+a.uniqueID).css("display","inline-block"),jQuery(a.dom.annotationDialogForm).find("#annotation_arrow_filled"+
a.uniqueID).css("display","inline-block");break;case "arrowHeight":jQuery(a.dom.annotationDialogForm).find("input[name='annotation_arrow_height_input"+a.uniqueID+"']").val(g);if(!e||e&&Array.isArray(e)&&-1!=e.indexOf("arrowHeight"))jQuery(a.dom.annotationDialogForm).find("#annotation_arrow_fieldset"+a.uniqueID).css("display","inline-block"),jQuery(a.dom.annotationDialogForm).find("#annotation_arrow_height"+a.uniqueID).css("display","inline-block");break;case "arrowWidth":jQuery(a.dom.annotationDialogForm).find("input[name='annotation_arrow_width_input"+
a.uniqueID+"']").val(g);if(!e||e&&Array.isArray(e)&&-1!=e.indexOf("arrowWidth"))jQuery(a.dom.annotationDialogForm).find("#annotation_arrow_fieldset"+a.uniqueID).css("display","inline-block"),jQuery(a.dom.annotationDialogForm).find("#annotation_arrow_width"+a.uniqueID).css("display","inline-block");break;case "endCap":jQuery(a.dom.annotationDialogForm).find("select[name='annotation_end_cap_select"+a.uniqueID+"']").find("option[value='"+g+"']").prop("selected",!0);(!e||e&&Array.isArray(e)&&-1!=e.indexOf("endCap"))&&
jQuery(a.dom.annotationDialogForm).find("#annotation_end_cap"+a.uniqueID).css("display","inline-block");break;case "startCap":jQuery(a.dom.annotationDialogForm).find("select[name='annotation_start_cap_select"+a.uniqueID+"']").find("option[value='"+g+"']").prop("selected",!0);(!e||e&&Array.isArray(e)&&-1!=e.indexOf("startCap"))&&jQuery(a.dom.annotationDialogForm).find("#annotation_start_cap"+a.uniqueID).css("display","inline-block");break;case "measurementUnit":jQuery(a.dom.annotationDialogForm).find("select[name='annotation_measurement_unit_select"+
a.uniqueID+"']").find("option[value='"+g+"']").prop("selected",!0);if(!e||e&&Array.isArray(e)&&-1!=e.indexOf("measurementUnit"))jQuery(a.dom.annotationDialogForm).find("#annotation_text_fieldset"+a.uniqueID).css("display","inline-block"),jQuery(a.dom.annotationDialogForm).find("#annotation_measurement_unit"+a.uniqueID).css("display","inline-block");break;case "scale":jQuery(a.dom.annotationDialogForm).find("input[name='annotation_scale_input"+a.uniqueID+"']").val(Number(g.toFixed(2).replace(".00",
"")));(!e||e&&Array.isArray(e)&&-1!=e.indexOf("scale"))&&jQuery(a.dom.annotationDialogForm).find("#annotation_scale"+a.uniqueID).css("display","inline-block");break;case "autoCreate":c||(jQuery(a.dom.annotationDialogForm).find("input[name='annotation_auto_creation_input"+a.uniqueID+"']").prop("checked",g).trigger("change"),e||jQuery(a.dom.annotationDialogForm).find("#annotation_auto_creation"+a.uniqueID).css("display","inline-block"))}});a.DisplayDialogForm(jQuery(a.dom.annotationDialogForm),a.Internal.Annotations.getAnnotationTitleFromType(b.type),
function(){jQuery("input[name='annotation_alignment_select"+a.uniqueID+"']:radio").change(function(){a.setDialogAnnotationAlignmentPropertiesPreview()});jQuery("input[name='annotation_line_alignment_select"+a.uniqueID+"']:radio").change(function(){a.setDialogAnnotationLineAlignmentPropertiesPreview()});jQuery("#annotation_text_input"+a.uniqueID).attr("data-original-height",jQuery("#annotation_text_input"+a.uniqueID).height())},null,null,[{text:a.Localize("_label_button_annotation_cancel"),click:function(){jQuery(a.dom.annotationDialogForm).dvDialog("close")}},
{text:c?a.Localize("_label_button_annotation_edit"):a.Localize("_label_button_annotation_add"),"class":"btn-valid",click:function(){jQuery.each(b,function(c,d){switch(c){case "fill":b[c]=jQuery(a.dom.annotationDialogForm).find("input[name='annotation_fill_input"+a.uniqueID+"']").is(":checked");break;case "fillColor":b[c]=jQuery(jQuery(a.dom.annotationDialogForm).find("input[name='annotation_fill_color_input"+a.uniqueID+"']")).minicolors("rgbaString");break;case "dashCap":b[c]=parseInt(jQuery(a.dom.annotationDialogForm).find("[name='annotation_dash_cap_select"+
a.uniqueID+"']:checked").val());break;case "dashStyle":b[c]=parseInt(jQuery(a.dom.annotationDialogForm).find("select[name='annotation_dash_style_select"+a.uniqueID+"']").find("option:selected").val());break;case "stroke":b[c]=jQuery(a.dom.annotationDialogForm).find("input[name='annotation_stroke_input"+a.uniqueID+"']").is(":checked");break;case "strokeColor":b[c]=jQuery(jQuery(a.dom.annotationDialogForm).find("input[name='annotation_stroke_color_input"+a.uniqueID+"']")).minicolors("rgbaString");break;
case "borderWidth":b[c]=parseFloat(100*jQuery(a.dom.annotationDialogForm).find("input[name='annotation_border_width_input"+a.uniqueID+"']").val())/96/100||0;break;case "opacity":b[c]=parseFloat(jQuery(a.dom.annotationDialogForm).find("input[name='annotation_opacity_input"+a.uniqueID+"']").val()/100);break;case "link":b[c]=jQuery(a.dom.annotationDialogForm).find("input[name='annotation_link_input"+a.uniqueID+"']").val();break;case "radiusFactor":b[c]=parseFloat(jQuery(a.dom.annotationDialogForm).find("input[name='annotation_radius_factor_input"+
a.uniqueID+"']").val()/100);break;case "rotation":b[c]=parseFloat(jQuery(a.dom.annotationDialogForm).find("input[name='annotation_rotation_input"+a.uniqueID+"']").val())||0;break;case "squaredBox":b[c]=jQuery(a.dom.annotationDialogForm).find("input[name='annotation_squared_box_input"+a.uniqueID+"']").is(":checked");break;case "text":b[c]=jQuery(a.dom.annotationDialogForm).find("textarea[name='annotation_text_input"+a.uniqueID+"']").val();break;case "fontName":b[c]=jQuery(a.dom.annotationDialogForm).find("select[name='annotation_font_name_select"+
a.uniqueID+"']").find("option:selected").val();break;case "fontStyle":b[c]=parseInt(jQuery(a.dom.annotationDialogForm).find("select[name='annotation_font_style_select"+a.uniqueID+"']").find("option:selected").val());break;case "foreColor":b[c]=jQuery(jQuery(a.dom.annotationDialogForm).find("input[name='annotation_fore_color_input"+a.uniqueID+"']")).minicolors("rgbaString");break;case "alignment":b[c]=parseInt(jQuery(a.dom.annotationDialogForm).find("[name='annotation_alignment_select"+a.uniqueID+
"']:checked").val());break;case "autoSize":b[c]=jQuery(a.dom.annotationDialogForm).find("input[name='annotation_auto_size_input"+a.uniqueID+"']").is(":checked");break;case "fontSize":b[c]=parseFloat(jQuery(a.dom.annotationDialogForm).find("input[name='annotation_font_size_input"+a.uniqueID+"']").val())||parseFloat(b[c]);break;case "lineAlignment":b[c]=parseInt(jQuery(a.dom.annotationDialogForm).find("[name='annotation_line_alignment_select"+a.uniqueID+"']:checked").val());break;case "arrowFilled":b[c]=
jQuery(a.dom.annotationDialogForm).find("input[name='annotation_arrow_filled_input"+a.uniqueID+"']").is(":checked");break;case "arrowHeight":b[c]=parseInt(jQuery(a.dom.annotationDialogForm).find("input[name='annotation_arrow_height_input"+a.uniqueID+"']").val())||0;break;case "arrowWidth":b[c]=parseInt(jQuery(a.dom.annotationDialogForm).find("input[name='annotation_arrow_width_input"+a.uniqueID+"']").val())||0;break;case "endCap":b[c]=parseInt(jQuery(a.dom.annotationDialogForm).find("select[name='annotation_end_cap_select"+
a.uniqueID+"']").find("option:selected").val());break;case "startCap":b[c]=parseInt(jQuery(a.dom.annotationDialogForm).find("select[name='annotation_start_cap_select"+a.uniqueID+"']").find("option:selected").val());break;case "measurementUnit":b[c]=jQuery(a.dom.annotationDialogForm).find("select[name='annotation_measurement_unit_select"+a.uniqueID+"']").find("option:selected").val();break;case "scale":b[c]=parseFloat(jQuery(a.dom.annotationDialogForm).find("input[name='annotation_scale_input"+a.uniqueID+
"']").val())||1;break;case "autoCreate":b[c]=jQuery(a.dom.annotationDialogForm).find("input[name='annotation_auto_creation_input"+a.uniqueID+"']").is(":checked")}});jQuery(a.dom.annotationDialogForm).dvDialog("close");return c?a.Internal.Annotations.annotEdit.updateAnnotation(!1,b):a.Internal.Annotations.beginAddAnnotInteractive(b,a.GetCurrentPage())}}]);return DocuViewareAPI.Status.GenericError}}},getConfig:function(){return{devicePixelRatio:DocuViewareUtilities.getDevicePixelRatio(),viewerWidth:this.dom.viewerArea.offsetWidth,
viewerHeight:this.dom.viewerArea.offsetHeight,scrollBarWidth:this.dom.sbWidth,hasWebPSupport:this.Internal.Capabilities.hasWebPSupport(),hasTiffSupport:this.Internal.Capabilities.hasTiffSupport()}},hasPendingResize:function(){return null!=a.NewViewerSizeTimeout},hasPendingAction:function(b,c,d){if(b&&this.serverCtx&&0==this.serverCtx.documentLoaded)return d||this.DisplayError(this.Localize("error__no_document_loaded")),!0;if(1==this.Internal.Files.uploading)return d||this.DisplayError(this.Localize("label__uploading_document")),
!0;if(1==this.ajax.downloading)return d||this.DisplayError(this.Localize("label__downloading_document")),!0;if(0<this.ajax.pendingRequestes)return!0;if(this.waitForInit)return d||this.DisplayError(this.Localize("label__initializing")),!0;if(!c&&null!=a.cache.Annots)for(b=0;b<a.cache.Annots.length;b++)if(a.cache.Annots[b].hasPendingUpdate())return d||this.DisplayError(this.Localize("transferring_data")),!0;return!1},Localize:function(a){var b=JSON.parse(this.localization);if(b&&0<b.length)for(var c=
0;c<b.length;c++)if(a==b[c].id)return b[c].message;return a},DisplayError:function(b){this.ShowMessage({text:b,backgroundColor:a.dom.UIconfig.headerColor,icon:16,delay:5E3})},ShowMessage:function(b){var c=jQuery(this.dom.infoDiv);c.css("background-color",b.backgroundColor?b.backgroundColor:a.dom.UIconfig.headerColor);var d=jQuery(this.dom.infoMessage);d.css("font-size",b.fontSize?b.fontSize:"130%");d.css("font-weight",b.fontWeight?b.fontWeight:"normal");d.css("color",b.fontColor?b.fontColor:"#FFFFFF");
d.css("text-decoration",b.textDecoration?b.textDecoration:"none");d.css("text-transform",b.textTransform?b.textTransform:"none");d.css("height",b.messageBoxHeight?b.messageBoxHeight:a.dom.UIconfig.defaultMessageBoxHeight);b.isHtmlText?d.html(b.text):d.text(b.text);c.find(".message_icon").hide();switch(b.icon){case 0:b.customIcon&&c.find(".message_icon_custom").html(b.customIcon).css("display","inline-block");break;case 16:c.find(".message_icon_error").css("display","inline-block");break;case 32:c.find(".message_icon_question").css("display",
"inline-block");break;case 48:c.find(".message_icon_warning").css("display","inline-block");break;case 64:c.find(".message_icon_info").css("display","inline-block");break;case 128:c.find(".message_icon_ok").css("display","inline-block")}c.finish().slideDown(b.slideDown?b.slideDown:300).delay(b.delay?b.delay:2500).slideUp(b.slideUp?b.slideUp:300)},DisplayPendingActionNotification:function(){a.ajax.pendingRequestesWithIndicator++;1==a.ajax.pendingRequestesWithIndicator&&jQuery(this.dom.pendingActionDiv).show()},
HidePendingActionNotification:function(){a.ajax.pendingRequestesWithIndicator--;0==a.ajax.pendingRequestesWithIndicator&&jQuery(this.dom.pendingActionDiv).hide()},DisplayDialogForm:function(b,c,d,e,f,h){b.dvDialog({dialogClass:"dv-main",appendTo:jQuery(a.dom.mainArea),minWidth:510+a.dom.sbWidth,maxHeight:jQuery(a.dom.controlArea).height(),position:{my:"center",at:"center",of:jQuery(a.dom.mainArea)},title:c,resizable:!1,draggable:!0,create:function(b,c){null!=d&&"function"==typeof d&&d();jQuery(this).css("overflow-x",
"hidden");jQuery(this).css("overflow-y","auto");jQuery(this).parent().find(".dvUi-widget-header").css("background-color",a.dom.UIconfig.headerColor);jQuery(this).parent().find(".dvUi-dialog-spacer").css("background-color",a.dom.UIconfig.miscBorderColor);jQuery(this).parent().css("color",a.dom.UIconfig.strokeColor);jQuery(this).parent().css("border","1px solid "+a.dom.UIconfig.strokeColor);jQuery(this).parent().find('input[type="text"]:not(".dv-color")').css("border-color",a.dom.UIconfig.strokeColor);
jQuery(this).parent().find('input[type="text"]').css("color",a.dom.UIconfig.strokeColor);jQuery(this).parent().find("select").css("border-color",a.dom.UIconfig.strokeColor);jQuery(this).parent().find("select").css("color",a.dom.UIconfig.strokeColor);jQuery(this).parent().find(".dvUi-widget-content").css("color",a.dom.UIconfig.strokeColor);jQuery(this).parent().find(".dvUi-widget-content a").css("color",a.dom.UIconfig.strokeColor);jQuery(this).parent().find(".dvUi-widget-header").css("background-color",
a.dom.UIconfig.headerColor);jQuery(this).parent().find(".dvUi-widget-header a").css("color",a.dom.UIconfig.strokeColor);jQuery(this).parent().find(".dv-annotationOptionText:not(:last-child)").css("border-right","1px solid "+a.dom.UIconfig.miscBorderColor)},open:function(b,c){var d=this;null!=e&&"function"==typeof e&&e();jQuery(this).parent().find(".dv-jquerySelect").each(function(a){jQuery(this).dvSelectmenu({change:function(){jQuery(this).trigger("change")}});jQuery(this).hasClass("dv-jquerySelectOverflow")&&
jQuery(this).dvSelectmenu("menuWidget").addClass("overflow")});jQuery(this).parent().find(".dv-jqueryRadio").each(function(b){jQuery(this).dvButtonset({setActive:function(){jQuery(d).parent().find(".dvUi-button").css("border","1px solid transparent");jQuery(d).parent().find(".dvUi-state-active").css("border","1px solid "+a.dom.UIconfig.miscBorderColor)}})});jQuery(this).parent().find(".dvUi-selectmenu-button").css("border","1px solid "+a.dom.UIconfig.miscBorderColor);jQuery(this).parent().find(".dvUi-selectmenu-menu .dvUi-menu").css("border",
"1px solid "+a.dom.UIconfig.miscBorderColor);jQuery(this).parent().find(".dv-color").each(function(){jQuery(this).minicolors({control:"hue",defaultValue:jQuery(this).val(),inline:!1,letterCase:"uppercase",opacity:!0,position:"bottom left"})});jQuery(this).parent().find(".minicolors-swatch").css("border-right","1px solid "+a.dom.UIconfig.miscBorderColor);jQuery(this).parent().find(".btn-valid").css("background-color",a.dom.UIconfig.activeSelectedColor);jQuery(this).parent().find(".btn-valid").hover(function(){jQuery(this).css("background-color",
a.dom.UIconfig.activeSelectedColorHover)},function(){jQuery(this).css("background-color",a.dom.UIconfig.activeSelectedColor)});var g=-1;jQuery(this).closest(".dvUi-dialog").find(".dvUi-dialog-buttonpane button").each(function(){g++});if(-1<g)for(var l=0;l<=g;l++)l===g?jQuery(this).closest(".dvUi-dialog").find(".dvUi-dialog-buttonpane button:eq("+l+")").focus():jQuery(this).closest(".dvUi-dialog").find(".dvUi-dialog-buttonpane button:eq("+l+")").blur();jQuery(a.dom.modalOverlayArea).show()},close:function(b,
c){null!=f&&"function"==typeof f&&f();jQuery(a.dom.modalOverlayArea).hide();jQuery(this).parent().find(".dv-jquerySelect").each(function(a){jQuery(this).dvSelectmenu("destroy")});jQuery(this).parent().find(".dv-jqueryRadio").each(function(a){jQuery(this).dvButtonset("destroy")});jQuery(this).parent().find(".dv-color").each(function(){jQuery(this).minicolors("destroy")})},buttons:h}).parent().draggable("option","containment",jQuery(a.dom.mainArea))},l10n:null,cache:{Annots:null,AnnotsComments:null,
Pages:null,canvas:null,emptyCanvas:function(){a.dom.SelectedTextRegions.clear();if(a.dom.viewerArea.hasChildNodes())for(var b=a.dom.viewerArea.children.length-1;0<=b;b--)a.dom.viewerArea.removeChild(a.dom.viewerArea.children[b]);if(null!=this.Pages)for(b=0;b<this.Pages.length;b++)this.Pages[b].drawn=!1},getPageCanvas:function(a){if(null!=this.canvas)for(var b=0;b<this.canvas.length;b++)if(this.canvas[b].pageNo==a)return this.canvas[b];return null},getPageObject:function(a){if(null!=this.Pages)for(var b=
0;b<this.Pages.length;b++)if(this.Pages[b].pageNo==a)return this.Pages[b];return null},clearCachedPages:function(){this.Pages=null;a.ajax.pendingPageViewRequestes=null},clearCachedBitmap:function(){if(null!=this.Pages)for(var b=0;b<this.Pages.length;b++)this.Pages[b].bitmap=null,this.Pages[b].drawn=!1;a.ajax.pendingPageViewRequestes=null},clearPage:function(b){if(null!=this.Pages)for(var c=0;c<this.Pages.length;c++)if(this.Pages[c].pageNo==b){this.Pages[c].bitmap=null;this.Pages[c].drawn=!1;break}c=
this.getPageCanvas(b);if(null!=c)for(var d=0;d<c.canvas.length;d++){var g=c.canvas[d].tile;null!=g&&(g.style.backgroundColor="white",g.getContext("2d").clearRect(0,0,g.width,g.height))}a.Internal.Annotations.removePageAnnots(b);a.Internal.FormFields.removePageFormFields(b);a.dom.thumbnailArea&&(b=a.Internal.Thumbnails.getThumbnailFromPageNo(b),null!=b&&(b.attr("data-loaded","false"),b.attr("data-loading","false")))},cachePage:function(a){null==this.Pages&&(this.Pages=[]);this.Pages.push(a)},cachePageBitmap:function(a,
b,c,d,e){var g=new Image;g.src="data:"+b+";base64,"+c;if(null!=this.Pages)for(b=0;b<this.Pages.length;b++)if(this.Pages[b].pageNo==a){this.Pages[b].drawn=!1;this.attachImageToPage(this.Pages[b],g,d,e);return}a={pageNo:a,drawn:!1};this.attachImageToPage(a,g,d,e);this.cachePage(a)},attachImageToPage:function(a,b,c,d){a.bitmap=b;a.scale=c;a.hasTransparency=d}},ajax:{sessionID:f,requestNo:0,pageViewRequestNo:0,thumbnailRequestNo:0,transferID:0,downloading:!1,pendingRequestes:0,pendingPageViewRequestes:null,
pendingRequestesWithIndicator:0,latestSelectedPage:0,contextID:m,hasPendingPageViewRequestes:function(){return null!=this.pendingPageViewRequestes&&0<this.pendingPageViewRequestes.length},SetNewServerCtx:function(b,c,d){var g=a.GetCurrentPage(),e=a.GetCurrentZoom(),l=a.ajax.contextID,f=a.serverCtx.documentLoaded;null==b?(a.resetServerCtx(),a.ajax.contextID=""):(a.serverCtx=b,a.ajax.contextID=b.contextID);var h=null!=b&&b.documentLoaded&&l!=a.ajax.contextID||null!=b&&b.reloadDocument,l=f&&a.ajax.contextID!=
l,f=a.dom.selectedSnapin;(l||a.serverCtx.reloadDocument)&&a.ClearUI();if(l&&(h||(null!=a.dom.pageNavBox&&(a.dom.pageNavBox.style.width="36px"),null!=a.dom.pageNavBoxMobile&&(a.dom.pageNavBoxMobile.style.width="36px"),a.dom.UIconfig.collapseSnapinOnDocumentClosed&&a.SetSnapinsPanelVisibility(!1)),a.callbacks.onDocumentClosed))a.callbacks.onDocumentClosed();a.UpdateUI(h,d,null!=b,l);h&&a.IsSnapinsPanelVisible()&&(null!=a.dom.selectedSnapin&&a.SelectSnapIn(f)==DocuViewareAPI.Status.OK||a.SelectFirstAvailableSnapin(null));
b=g!=a.GetCurrentPage();if(h||b)a.Internal.Annotations.unselectAll(),a.dom.pageCountBox&&a.dom.pageNavBox&&(a.dom.pageCountBox.innerHTML=a.GetPageCount(),a.dom.pageNavBox.value=a.GetCurrentPage()),a.dom.pageCountBoxMobile&&a.dom.pageNavBoxMobile&&(a.dom.pageCountBoxMobile.innerHTML=a.GetPageCount(),a.dom.pageNavBoxMobile.value=a.GetCurrentPage());if(!c){if(h&&(a.dom.adjustPageNavBoxWidthForMaxPages(a.GetPageCount()),a.callbacks.onNewDocumentLoaded))a.callbacks.onNewDocumentLoaded();if(b&&a.callbacks.onPageChanged)a.callbacks.onPageChanged();
if(e!=a.GetCurrentZoom()&&a.callbacks.onZoomChanged)a.callbacks.onZoomChanged()}null!=a.dom.zoomInButton&&(a.GetCurrentZoom()>=a.serverCtx.zoomMax?(a.dom.updateHoverBordersOnDisableToggle(a.dom.zoomInButton),a.dom.zoomInButton.disabled=!0):(a.dom.zoomInButton.disabled=!1,a.dom.updateHoverBordersOnDisableToggle(a.dom.zoomInButton)));null!=a.dom.zoomOutButton&&(a.GetCurrentZoom()<=a.serverCtx.zoomMin?(a.dom.updateHoverBordersOnDisableToggle(a.dom.zoomOutButton),a.dom.zoomOutButton.disabled=!0):(a.dom.zoomOutButton.disabled=
!1,a.dom.updateHoverBordersOnDisableToggle(a.dom.zoomOutButton)))},PostCustomServerAction:function(b,c,d,e,f){if(a.waitForInit)return setTimeout(function(){a.ajax.PostCustomServerAction(b,c,d,e,f)},100),DocuViewareAPI.Status.OK;if(a.hasPendingAction())return DocuViewareAPI.Status.GenericError;var g={url:a.appControllerPath+"/customaction"+(a.useIdInRoot?"/1":""),data:{actionName:c,args:d,clientConfiguration:a.getConfig()},success:function(b){a.ajax.HandleServerContextResponse(b,!1,!0);e&&e(b.result)},
error:function(){f&&f()}};return a.ajax.PostBaseRequest(g,!b,!0)},PostAjaxRequestForCrossDomainApp:function(a){a.cache=!1;a.processData=!1;a.timeout||(a.timeout=DocuViewareConstants.SERVER_SESSION_LOCK_TIMEOUT+1E4);a.crossDomain=!0;a.type="POST";a.contentType="application/json";a.dataType="json";jQuery.ajax(a)},PostAjaxRequestForDocuViewareAction:function(a){null==a.error&&alert("Please specify an error object!");a.cache=!1;a.processData=!1;a.timeout||(a.timeout=DocuViewareConstants.SERVER_SESSION_LOCK_TIMEOUT+
1E4);a.type="POST";a.contentType="application/json";a.dataType="json";jQuery.ajax(a)},PostBaseRequest:function(b,c,d){if(!d&&a.hasPendingAction(!0))return DocuViewareAPI.Status.GenericError;null!=b.beforeStart&&b.beforeStart();this.pendingRequestes+=1;this.requestNo+=1;null==b.data&&(b.data={});b.data.vScrollbarVal=a.Internal.Coordinates.getViewerScrollTop();b.data.vScrollbarMax=a.serverCtx.vScrollbarMax;b.data.hScrollbarVal=a.Internal.Coordinates.getViewerScrollLeft();b.data.hScrollbarMax=a.serverCtx.hScrollbarMax;
b.data.sessionID=this.sessionID;b.data.contextID=this.contextID;b.data.requestNo=this.requestNo;a.DisplayPendingActionNotification();a.ajax.PostAjaxRequestForDocuViewareAction({url:b.url,async:!c,data:JSON.stringify(b.data),success:function(c){--a.ajax.pendingRequestes;a.HidePendingActionNotification();a.ExitAnnotationDrawingMode();b.success&&b.success(c)},error:function(c){a.ajax.HandleError(c);--a.ajax.pendingRequestes;null!=b.error&&b.error()}});return DocuViewareAPI.Status.OK},HandleError:function(b){if(b){if(null!=
b.responseType&&"DocuVieware"==b.responseType){var c="";null!=b.action&&""!=b.action&&(c+=b.action+": ");c+=b.message;console.log("DocuVieware: "+c);b.throwError&&a.DisplayError(c)}else null!=b.readyState&&null!=b.statusText&&(c="DocuVieware XMLHttpRequest error."+("\nStatus: "+b.status+"."),c+="\nReadyState: ",c=0==b.readyState?c+"uninitialized.":1==b.readyState?c+"loading.":2==b.readyState?c+"loaded.":3==b.readyState?c+"interactive.":4==b.readyState?c+"completed.":c+(b.readyState+"."),c+="\nDescription: "+
b.statusText+".",null!=b.responseText&&""!=b.responseText&&(c+="\nResponse text: "+b.responseText),"timeout"!=b.statusText&&null!=b.status&&"0"==b.status&&null!=b.readyState&&0==b.readyState?a.debug&&console.log(c):(console.log(c),a.debug&&alert(c))),jQuery(a.dom.mainSpinner).hide(),a.HidePendingActionNotification();b.resetClientUI&&a.ClearUI();if(1==b.reloadServerContext)a.events.onLoad(!0)}},HandleServerContextResponse:function(b,c,d,e){if(b&&b.status==DocuViewareAPI.Status.OK){var g=a.GetCurrentPage();
b.message&&a.ShowMessage(b.message);if(b.contextID<a.ajax.contextID)return;a.ajax.SetNewServerCtx(b,e,c);!d||g==a.GetCurrentPage()&&a.GetCurrentPage()==a.GetLastPageNoRequest()||(a.ajax.latestSelectedPage=a.GetCurrentPage(),a.EnsureCurrentPageVisibility());return!0}a.ajax.HandleError(b);return!1}},callbacks:{onFileOpenSuccess:null,onFileOpenError:null,onURIOpenSuccess:null,onURIOpenError:null,onPageChanged:null,onAnnotationSelectedStateChanged:null,onAnnotationAdded:null,onAnnotationEdited:null,onAnnotationDeleted:null,
onCommentAdded:null,onCommentEdited:null,onCommentDeleted:null,onFormFieldChanged:null,onZoomChanged:null,onNewDocumentLoaded:null,onDocumentClosed:null,onDocumentPrinted:null,onDocumentSaved:null,onTwainAcquisitionDialogAcquireButtonClick:null,onTwainAcquisitionDialogCancelButtonClick:null,onThumbnailsOrderChanged:null,onTextSelected:null,onAreaSelected:null},serverCtx:{},dom:{visibleToolbar:DocuViewareAPI.Toolbar.None,enableAnnotEditionOnDblClick:!0,selectedAnnotation:null,selectedSnapin:null,isLoadFromUriDialogVisible:!1,
sbWidth:DocuViewareUtilities.getScrollbarWidth(),toolbarLogo:document.getElementById("docuViewareLogo"+c),mobileToolbarArea:document.getElementById("mobileToolbar"+c),mobileToolbarTop:document.getElementById("mobileToolbarTop"+c),mobileToolbarContainer:document.getElementById("mobileToolbarContainer"+c),subMenuZoomModeMobile:document.getElementById("subMenuZoomModeMobile"+c),subMenuMouseModeMobile:document.getElementById("subMenuMouseModeMobile"+c),pageNavBoxMobile:document.getElementById("pageNavBoxMobile"+
c),pageCountBoxMobile:document.getElementById("pageCountBoxMobile"+c),openFromFileButtonMobile:document.getElementById("openFromFileButtonMobile"+c),twainAcquisitionButtonMobile:document.getElementById("twainAcquisitionButtonMobile"+c),fullscreenButtonMobile:document.getElementById("fullscreenButtonMobile"+c),singlePageModeButtonMobile:document.getElementById("singlePageModeButtonMobile"+c),panMouseModeButtonMobile:document.getElementById("panMouseModeButtonMobile"+c),selectMouseModeButtonMobile:document.getElementById("selectMouseModeButtonMobile"+
c),zoomAreaMouseModeButtonMobile:document.getElementById("zoomAreaMouseModeButtonMobile"+c),openfile:document.getElementById("openfile"+c),twainAcquisitionButton:document.getElementById("twainAcquisitionButton"+c),openFromFileButton:document.getElementById("openFromFileButton"+c),zoomInButton:document.getElementById("zoomInButton"+c),zoomOutButton:document.getElementById("zoomOutButton"+c),subMenuZoomMode:document.getElementById("subMenuZoomMode"+c),subMenuMouseMode:document.getElementById("subMenuMouseMode"+
c),pendingActionDiv:document.getElementById("pendingActionDiv"+c),openFromUriArea:document.getElementById("openuri"+c),openFromUriButton:document.getElementById("openFromUriButton"+c),singlePageModeButton:document.getElementById("singlePageModeButton"+c),fullscreenButton:document.getElementById("fullscreenButton"+c),panMouseModeButton:document.getElementById("panMouseModeButton"+c),selectMouseModeButton:document.getElementById("selectMouseModeButton"+c),zoomAreaMouseModeButton:document.getElementById("zoomAreaMouseModeButton"+
c),infoDiv:document.getElementById("infoDiv"+c),infoMessage:document.getElementById("infoMessage"+c),addressBar:document.getElementById("openuriinput"+c),mainArea:document.getElementById("main"+c),mainSpinner:document.getElementById("mainSpinner"+c),mainSpinnerContent:document.getElementById("mainSpinnerContent"+c),leftSideArea:document.getElementById("leftside"+c),leftSideResizeBar:document.getElementById("leftSideResizeBar"+c),snapinButtonStrip:document.getElementById("snapinButtonStrip"+c),leftsideContainer:document.getElementById("leftsideContainer"+
c),leftSideContainerPanelsArea:document.getElementById("leftsideContainerPanels"+c),snapinsHeader:document.getElementById("snapinsHeader"+c),snapinTabControl:document.getElementById("leftsidePanels"+c),snapinsHeaderLabel:document.getElementById("snapinsHeaderLabel"+c),thumbnailArea:document.getElementById("thumbnailsPanel"+c),commentsArea:document.getElementById("commentsPanel"+c),commentsAuthorInput:document.getElementById("commentAuthorInput"+c),commentsSearchArea:document.getElementById("commentsContainer"+
c),commentsSearchValueInput:document.getElementById("commentsSearchValueInput"+c),commentsSearchClearResultsButton:document.getElementById("commentsSearchClearResultsButton"+c),commentsSortBySelect:document.getElementById("commentsSortBySelect"+c),commentsSearchActionContainerOverlayDisable:document.getElementById("commentsSearchActionContainerOverlayDisable"+c),commentsSortBySelectContainer:document.getElementById("commentsSortBySelectContainer"+c),bookmarksArea:document.getElementById("bookmarksPanel"+
c),bookmarksTree:document.getElementById("bookmarksTree"+c),searchArea:document.getElementById("searchPanel"+c),searchPanelForm:document.getElementById("searchPanelForm"+c),searchValueInput:document.getElementById("searchValueInput"+c),searchCaseSensitiveInput:document.getElementById("searchCaseSensitiveInput"+c),searchAnyWordInput:document.getElementById("searchAnyWordInput"+c),searchPageSelect:document.getElementsByName("searchPageSelect"+c),searchWholeWordInput:document.getElementById("searchWholeWordInput"+
c),searchResultsContainer:document.getElementById("searchResultsContainer"+c),searchClearResultsButton:document.getElementById("searchClearResultsButton"+c),annotationsArea:document.getElementById("annotationsPanel"+c),searchResults:document.getElementById("searchResults"+c),viewerArea:document.getElementById("viewer"+c),controlArea:document.getElementById("control"+c),toolBarArea:document.getElementById("toolbar"+c),pageNavBox:document.getElementById("pageNavBox"+c),pageCountBox:document.getElementById("pageCountBox"+
c),annotationsActionButtons:document.getElementById("annotationActionButtons"+c),annotationDialogFormContainer:document.getElementById("annotationDialogFormContainer"+c),annotationDialogForm:document.getElementById("annotationDialogForm"+c),annotationActionRemoveConfirm:document.getElementById("annotationActionRemoveConfirm"+c),drawingModeArea:document.getElementById("drawingMode"+c),modalOverlayArea:document.getElementById("modalOverlayDiv"+c),commentDialogModalOverlay:document.getElementById("commentDialogModalOverlayDiv"+
c),saveDialog:document.getElementById("saveDialog"+c),twainAcquisitionDialog:document.getElementById("twainAcquisitionDialog"+c),twainAcquisitionDialogPanel:document.getElementById("twainAcquisitionDialogPanel"+c),commentDialog:document.getElementById("commentDialog"+c),printDialog:document.getElementById("printDialog"+c),printPageRangeInput:document.getElementById("printPageRangeInput"+c),copyDialog:document.getElementById("copyDialog"+c),copyTextInput:document.getElementById("copy_text_input"+c),
viewerContextMenu:document.getElementById("viewerContextMenu"+c),faderArea:document.getElementById("label-fader__"+c),maxUploadSize:h,packetSize:q,UIconfig:eval("("+M+")"),singlePageView:null,thumbnailSelectBox:null,thumbnailSelectBoxOrigin:{left:0,top:0},checkLinkAt:function(b,c){if(0==a.Internal.Annotations.selected.length&&!a.Internal.Annotations.mouseOverAnnot){var d=a.Internal.Pages.getVisiblePageNumbers();if(null!=d)for(var g=0;g<d.length;g++){var e=d[g];if(a.Internal.Pages.isPageRendered(e)){var l=
a.cache.getPageObject(e);if(null!=l&&null!=l.links)for(var e=a.Internal.Pages.getRenderingState(e),f=0;f<l.links.length;f++){var h={left:96*l.links[f].x,top:96*l.links[f].y,width:96*l.links[f].width,height:96*l.links[f].height};a.Internal.Matrix.transformBBox(e.contentMatrix,0,h);h.left+=e.pageLeft;h.top+=e.pageTop;var k=a.dom.viewerArea.getBoundingClientRect(),m=b-k.left+a.Internal.Coordinates.getViewerScrollLeft(),k=c-k.top+a.Internal.Coordinates.getViewerScrollTop();if(m>=h.left&&m<=h.left+h.width&&
k>=h.top&&k<=h.top+h.height)return a.dom.rlink.style.height=h.height+"px",a.dom.rlink.style.width=h.width+"px",a.dom.rlink.style.left=h.left+"px",a.dom.rlink.style.top=h.top+"px",a.events.overLink=l.links[f],!0}}}}return!1},handleLinkRectVisibility:function(){a.events.overLink?"none"==a.dom.rlink.style.display&&(a.dom.rlink.style.display="block",a.events.setCursor()):"block"==a.dom.rlink.style.display&&(a.dom.rlink.style.display="none",a.events.setCursor())},adjustPageNavBoxWidthForMaxPages:function(b){null!=
a.dom.pageNavBox&&(a.dom.pageNavBox.style.width=(12*b.toString().length).toString()+"px")},updateSelectedPageFader:function(b,c){if(0!=a.dom.viewerArea.offsetWidth&&0!=a.dom.viewerArea.offsetHeight){var d=jQuery(a.dom.faderArea),g=a.Localize("_label__fader_page"),g=g.replace("#",c),e=g=g.replace("@",a.serverCtx.pageCount);d.find("div:first-child").text()!=e&&(d.find("div:first-child").text(e),g=100,e=e.length,15<e&&(g=100/15*e),d.width()!=g&&d.width(g),d.finish().animate({opacity:1},{duration:b,start:function(){d.css("z-index",
16777270)}}).delay(1E3).animate({opacity:0},{duration:800,complete:function(){d.css("z-index","")}}))}},ensureSelectedThumbnailVisibility:function(b){if(a.serverCtx.documentLoaded&&a.dom.thumbnailArea){var c=document.getElementById(a.FindSnapIn("thumbnails").snapInID),d=a.GetLastPageNoRequest(),d=a.Internal.Thumbnails.getThumbnailFromPageNo(d);null!=d&&(d=c.scrollTop+Math.floor(d.position().top),d!=c.scrollTop?c.scrollTop=d:b&&a.showVisibleThumbnails())}},updateThumbsStyle:function(b,c){if(c){if(a.dom.thumbnailArea){a.Internal.Thumbnails.lastUpdatedPageThumbnail=
a.GetLastPageNoRequest();for(var d=0;d<a.dom.thumbnailArea.childElementCount;d++){var g=a.dom.thumbnailArea.children[d],e=jQuery(g),g=a.Internal.Thumbnails.getThumbnailPage(g);0!=g&&this.resetThumbStyle(e,g==a.GetLastPageNoRequest())}}}else a.Internal.Thumbnails.lastUpdatedPageThumbnail!=a.GetLastPageNoRequest()&&(0<a.Internal.Thumbnails.lastUpdatedPageThumbnail&&a.dom.thumbnailArea&&this.updateThumbStyle(a.Internal.Thumbnails.lastUpdatedPageThumbnail),0<a.GetLastPageNoRequest()&&a.dom.thumbnailArea&&
this.updateThumbStyle(a.GetLastPageNoRequest()),a.Internal.Thumbnails.lastUpdatedPageThumbnail=a.GetLastPageNoRequest());b&&this.ensureSelectedThumbnailVisibility(!1)},resetThumbStyle:function(b,c){b.css({display:"inline-block","border-style":c?"dotted":"solid","border-width":"1px",margin:"8px 8px 8px 8px",padding:"5px 5px 0px 5px","text-align":"center",position:"relative","border-color":c?a.dom.UIconfig.strokeColor:"transparent","background-color":"transparent"})},updateThumbStyle:function(b){if(a.dom.thumbnailArea){var c=
a.Internal.Thumbnails.getThumbnailFromPageNo(b);if(null!=c){var d=c[0].getAttribute("mouse-over"),d=null!=d&&"true"===d,g=a.Internal.Thumbnails.isThumbnailSelected(b);b=b==a.GetLastPageNoRequest();c.css({"border-color":d?a.dom.UIconfig.activeSelectedColor:b?a.dom.UIconfig.strokeColor:"transparent","border-style":d?"solid":"dotted","background-color":g?a.dom.UIconfig.activeSelectedBackgroundColor:"transparent"})}}},updateHoverBordersOnDisableToggle:function(a){a.style.border="1px solid transparent"},
updateSinglePageModeButton:function(){var b=a.dom.singlePageModeButton?jQuery(a.dom.singlePageModeButton):null,c=a.dom.singlePageModeButtonMobile?jQuery(a.dom.singlePageModeButtonMobile):null;this.singlePageView?(b&&b.removeClass("button_active"),c&&c.removeClass("button_active")):(b&&b.addClass("button_active"),c&&c.addClass("button_active"));this.updateButtons()},udpateMouseModeButtons:function(b){var c=a.dom.panMouseModeButton?jQuery(a.dom.panMouseModeButton):null,d=a.dom.selectMouseModeButton?
jQuery(a.dom.selectMouseModeButton):null,g=a.dom.zoomAreaMouseModeButton?jQuery(a.dom.zoomAreaMouseModeButton):null,e=a.dom.panMouseModeButtonMobile?jQuery(a.dom.panMouseModeButtonMobile):null,f=a.dom.selectMouseModeButtonMobile?jQuery(a.dom.selectMouseModeButtonMobile):null,h=a.dom.zoomAreaMouseModeButtonMobile?jQuery(a.dom.zoomAreaMouseModeButtonMobile):null;c&&c.removeClass("button_active");d&&d.removeClass("button_active");g&&g.removeClass("button_active");e&&e.removeClass("button_active");f&&
f.removeClass("button_active");h&&h.removeClass("button_active");switch(b){case 0:case 1:c&&c.addClass("button_active");e&&e.addClass("button_active");break;case 3:d&&d.addClass("button_active");f&&f.addClass("button_active");break;case 4:g&&g.addClass("button_active"),h&&h.addClass("button_active")}},updateButtons:function(){jQuery(a.dom.mainArea).find(".dv-button").each(function(b){jQuery(this).css("background-color","transparent");jQuery(this).css("border","1px solid transparent");jQuery(this).css("background-image",
"none");jQuery(this).css("fill",a.dom.UIconfig.strokeColor)});jQuery(a.dom.mainArea).find(".dv-button.button_active").each(function(b){jQuery(this).css("border","1px solid "+a.dom.UIconfig.miscBorderColor);jQuery(this).css("background-image","-moz-linear-gradient(top, "+a.dom.UIconfig.buttonActiveGradientColorStart+","+a.dom.UIconfig.buttonActiveGradientColorEnd+")");jQuery(this).css("background-image","-webkit-linear-gradient(top, "+a.dom.UIconfig.buttonActiveGradientColorStart+","+a.dom.UIconfig.buttonActiveGradientColorEnd+
")");jQuery(this).css("background-image","-ms-linear-gradient(top, "+a.dom.UIconfig.buttonActiveGradientColorStart+" 0%,"+a.dom.UIconfig.buttonActiveGradientColorEnd+" 100%)");jQuery(this).css("background-image","-o-linear-gradient(top, "+a.dom.UIconfig.buttonActiveGradientColorStart+","+a.dom.UIconfig.buttonActiveGradientColorEnd+")");jQuery(this).css("background-image","linear-gradient(to bottom, "+a.dom.UIconfig.buttonActiveGradientColorStart+","+a.dom.UIconfig.buttonActiveGradientColorEnd+")");
jQuery(this).css("background-repeat","repeat-x");jQuery(this).css("fill",a.dom.UIconfig.activeSelectedColor)});jQuery(a.dom.mainArea).find(".dv-button.button_hover").each(function(b){jQuery(this).css("border","1px solid");jQuery(this).css("-webkit-border-radius","2px");jQuery(this).css("-moz-border-radius","2px");jQuery(this).css("border-radius","2px");jQuery(this).css("border-color",a.dom.UIconfig.miscBorderColor);jQuery(this).css("background-color","transparent");jQuery(this).css("background-image",
"none")})},autoSelectToolbar:function(){if(a.dom.mobileToolbarArea&&0!==jQuery(a.dom.toolBarArea).find(".dv-toolbar-buttons").length){var b=0;jQuery(a.dom.toolBarArea).find(".dv-toolbar-buttons").children(".dv-buttons-container").each(function(){b+=jQuery(this).outerWidth()});var c=jQuery(a.dom.mainArea).width();jQuery(a.dom.toolbarLogo)&&(c-=jQuery(a.dom.toolbarLogo).width());b>c?(jQuery(a.dom.toolBarArea).css({position:"absolute",left:"-300%"}),jQuery(a.dom.mobileToolbarArea).css("display","block"),
jQuery(a.dom.mobileToolbarTop).css("display","block"),a.dom.visibleToolbar=DocuViewareAPI.Toolbar.Mobile):(jQuery(a.dom.mobileToolbarArea).css("display","none"),jQuery(a.dom.mobileToolbarTop).css("display","none"),jQuery(a.dom.toolBarArea).css({position:"relative",left:""}),a.dom.visibleToolbar=DocuViewareAPI.Toolbar.Standard)}else a.dom.visibleToolbar=DocuViewareAPI.Toolbar.None},resizeControlArea:function(){a.dom.autoSelectToolbar();var b=a.dom.mainArea.offsetHeight;a.dom.visibleToolbar===DocuViewareAPI.Toolbar.Mobile?
b-=jQuery(a.dom.mobileToolbarTop).height()+a.dom.mobileToolbarArea.clientHeight:a.dom.visibleToolbar===DocuViewareAPI.Toolbar.Standard&&(b-=a.dom.toolBarArea.offsetHeight);b!==a.dom.controlArea.offsetHeight&&(a.dom.controlArea.style.height=b+"px");a.dom.mobileToolbarContainer&&a.dom.resizeMobileToolbarMenu()},resizeMobileToolbarMenu:function(){var b=0;jQuery(a.dom.mobileToolbarContainer).children(".dv-button").each(function(){b+=jQuery(this).height();b+=parseInt(jQuery(this).css("padding-top"),10);
b+=parseInt(jQuery(this).css("padding-bottom"),10);b+=parseInt(jQuery(this).css("border-top"),10);b+=parseInt(jQuery(this).css("border-bottom"),10);b+=parseInt(jQuery(this).css("margin-top"),10);b+=parseInt(jQuery(this).css("margin-bottom"),10)});b>=jQuery(a.dom.controlArea).height()?jQuery(a.dom.mobileToolbarContainer).width()===DocuViewareAPI.Constants.SINGLE_COLUMN_MOBILE_MENU_WIDTH&&jQuery(a.dom.mobileToolbarContainer).width(DocuViewareAPI.Constants.TWO_COLUMNS_MOBILE_MENU_WIDTH):jQuery(a.dom.mobileToolbarContainer).width()===
DocuViewareAPI.Constants.TWO_COLUMNS_MOBILE_MENU_WIDTH&&jQuery(a.dom.mobileToolbarContainer).width(DocuViewareAPI.Constants.SINGLE_COLUMN_MOBILE_MENU_WIDTH)},SelectedTextRegions:{_cache:[],count:function(a){if(a){for(var b=0,c=0;c<this._cache.length;c++)this._cache[c].category==a&&b++;return b}return this._cache.length},addNew:function(b,c,d,e,f,h,k,m,n){var g=document.createElement("div");g.category=m;g.pageNo=b;g.style.display="block";g.style.position="absolute";g.style.padding="0px";g.style.margin=
"0px";g.style.outline="0";g.style.left=c+"px";g.style.top=d+"px";g.style.width=e+"px";g.style.height=f+"px";g.style.backgroundColor=h;k&&(g.style.borderColor=k,g.style.borderWidth="1px",g.style.borderStyle="solid");a.events.forwardMouseEventsToViewer(g);n?n.appendChild(g):a.dom.viewerArea.appendChild(g);this._cache.push(g)},clear:function(b,c){if(0<this._cache.length)if(b||c)for(var d=0;d<this._cache.length;d++)b&&this._cache[d].category!=b||c&&this._cache[d].pageNo!=c||(a.dom.viewerArea.removeChild(this._cache[d]),
this._cache.splice(d--,1));else{for(d=0;d<this._cache.length;d++)a.dom.viewerArea.removeChild(this._cache[d]);this._cache=[]}}},createBookmarkNode:function(b,c){if(c){var d=document.createElement("li");d.bookmarkID=c.bookmarkID;if(c.hasChildren){d.className="hasChildren";var g=document.createElement("div");g.className="hitarea collapsed";g.bookmarkID=c.bookmarkID;g.onclick=a.events.onBookmarkTogglerClickHandler;g.onmouseover=a.events.onBookmarkItemMouseOverHandler;g.onmouseout=a.events.onBookmarkItemMouseOutHandler;
jQuery(d).append(g)}g=document.createElement("span");g.action=c.action;g.onmouseover=a.events.onBookmarkItemMouseOverHandler;g.onmouseout=a.events.onBookmarkItemMouseOutHandler;c.action&&-1<c.action.indexOf("PdfPageDest")&&(g.className="internal");g.onclick=a.events.onBookmarkItemClickHandler;g.innerHTML=c.text;c.foreColor&&(g.style.color=c.foreColor);if(1==c.textAttribute||3==c.textAttribute)g.style.fontStyle="italic";if(2==c.textAttribute||3==c.textAttribute)g.style.fontWeight="bold";jQuery(d).append(g);
c.hasChildren&&jQuery(d).append('<ul><li><span class="placeholder">&nbsp;</span></li></ul>');b.append(d)}},setBookmarkOverStyle:function(a,b){jQuery(a).parent().find("span:first").css("text-decoration",b?"underline":"none")},selectBoomark:function(b){this.resetBookmarkStyle();jQuery(b).css("background-color",a.dom.UIconfig.activeSelectedBackgroundColor).addClass("selected")},resetBookmarkStyle:function(){a.dom.bookmarksTree&&jQuery(a.dom.bookmarksTree).find("span.selected").removeClass("selected").css("background-color",
"transparent")},createCommentItem:function(b,c){if(b&&b.annotApp.visible){var d=document.createElement("div");d.className="dvcomment";var g=document.createElement("div");g.className="dvcomment-wrapper";g.id="dvcomment-"+b.annotApp.id;var e=this.generateCommentHeaderMarkup(b);g.appendChild(e);e=this.generateCommentContentMarkup(b);if(null!=c)for(var l=0;l<c.length;l++){var f=c[l];if(f.annotApp.visible){var h=document.createElement("div");h.className="dvcomment-wrapper dvanswer";h.id="dvcomment-"+f.annotApp.id;
var k=this.generateCommentHeaderMarkup(f),f=this.generateCommentContentMarkup(f);h.appendChild(k);h.appendChild(f);e.appendChild(h)}}g.appendChild(e);d.appendChild(g);jQuery(a.dom.commentsArea).find("#commentsContainer"+a.uniqueID).append(d)}},generateCommentHeaderMarkup:function(b){var c=document.createElement("div");c.className="dvcomment-header";c.addEventListener("click",function(c){c.stopPropagation();(c=document.getElementById(a.uniqueID))&&c.control.CommentHeader_Click(b.annotApp.id)});b.annotApp.canEdit&&
c.addEventListener("dblclick",function(c){c.stopPropagation();(c=document.getElementById(a.uniqueID))&&c.control.CommentProperties_Click(b.annotApp.id)});c.addEventListener("mouseover",function(){jQuery(this).css("cursor","pointer")});c.addEventListener("mouseout",function(){jQuery(this).css("cursor","default")});switch(b.annotApp.properties.reviewStatus){case 0:c.className+=" status-none";break;case 1:c.className+=" status-approved";break;case 2:c.className+=" status-canceled";break;case 3:c.className+=
" status-finished";break;case 4:c.className+=" status-rejected"}var d=document.createElement("div");d.className="dvcomment-user";var g=document.createElement("span");g.className="dvtoggle";d.appendChild(g);g=document.createElement("span");g.innerText=b.annotApp.author;d.appendChild(g);g=document.createElement("div");g.className="dvcomment-date";var e=document.createElement("span");e.innerText=b.annotApp.creationTime.split("T")[0]+" "+b.annotApp.creationTime.split("T")[1].split(".")[0];g.appendChild(e);
c.appendChild(d);c.appendChild(g);return c},generateCommentContentMarkup:function(b){var c=document.createElement("div");c.className="dvcomment-content";c.addEventListener("click",function(c){c.stopPropagation();(c=document.getElementById(a.uniqueID))&&c.control.CommentHeader_Click(b.annotApp.id)});b.annotApp.canEdit&&c.addEventListener("dblclick",function(c){c.stopPropagation();(c=document.getElementById(a.uniqueID))&&c.control.CommentProperties_Click(b.annotApp.id)});c.addEventListener("mouseover",
function(){jQuery(this).css("cursor","pointer")});c.addEventListener("mouseout",function(){jQuery(this).css("cursor","default")});var d=document.createElement("div");d.className="dvcomment-message";b.annotApp.properties.fill&&null!=b.annotApp.properties.fillColor&&(d.style.backgroundColor=b.annotApp.properties.fillColor);var g=document.createElement("p");g.style.color=b.annotApp.properties.foreColor;g.style.fontFamily=b.annotApp.properties.fontName;switch(b.annotApp.properties.fontStyle){case 0:g.style.fontStyle=
"normal";g.style.fontWeight="normal";g.style.textDecoration="none";break;case 1:g.style.fontStyle="normal";g.style.fontWeight="bold";g.style.textDecoration="none";break;case 2:g.style.fontStyle="italic";g.style.fontWeight="normal";g.style.textDecoration="none";break;case 3:g.style.fontStyle="italic";g.style.fontWeight="bold";g.style.textDecoration="none";break;case 4:g.style.fontStyle="normal";g.style.fontWeight="normal";g.style.textDecoration="underline";break;case 5:g.style.fontStyle="normal";g.style.fontWeight=
"bold";g.style.textDecoration="underline";break;case 6:g.style.fontStyle="italic";g.style.fontWeight="normal";g.style.textDecoration="underline";break;case 7:g.style.fontStyle="italic";g.style.fontWeight="bold";g.style.textDecoration="underline";break;case 8:g.style.fontStyle="normal";g.style.fontWeight="normal";g.style.textDecoration="line-through";break;case 9:g.style.fontStyle="normal";g.style.fontWeight="bold";g.style.textDecoration="line-through";break;case 10:g.style.fontStyle="italic";g.style.fontWeight=
"normal";g.style.textDecoration="line-through";break;case 11:g.style.fontStyle="italic";g.style.fontWeight="bold";g.style.textDecoration="line-through";break;case 12:g.style.fontStyle="normal";g.style.fontWeight="normal";g.style.textDecoration="none";break;case 13:g.style.fontStyle="normal";g.style.fontWeight="normal";g.style.textDecoration="none";break;case 14:g.style.fontStyle="normal";g.style.fontWeight="normal";g.style.textDecoration="none";break;case 15:g.style.fontStyle="normal",g.style.fontWeight=
"normal",g.style.textDecoration="none"}g.style.fontSize=b.annotApp.properties.fontSize+"pt";g.innerText=b.annotApp.properties.text;d.appendChild(g);g=document.createElement("div");g.className="dvcomment-options";g.style.borderTop="1px solid"+a.dom.UIconfig.strokeColor;g.style.paddingTop="10px";g.style.height="20px";g.style.lineHeight="18px";g.style.display="inline-block";g.style.width="100%";g.style.fill=a.dom.UIconfig.strokeColor;var e=document.createElement("div");e.style.height="20px";e.style.width=
"16px";e.style.display="inline-block";e.style["float"]="left";e.style.marginRight="5px";switch(b.ownerAnnotType){case 0:e.title=a.Localize("annotation_rubberstamp");e.innerHTML='<svg viewBox="0 0 512 512" width="100%" height="100%"><g><path d="M502.17,471.293C498.894,479.536,491.698,485,482.614,485H29.392c-9.074,0-16.275-5.452-19.557-13.681l-1.611,11.991C6.007,499.252,15.508,512,29.392,512h453.223c13.883,0,23.357-12.748,21.168-28.689L502.17,471.293z"></path><path d="M29.392,459h453.223c13.883,0,23.357-13.272,21.168-29.215L485.65,293.901C483.802,280.073,472.189,268,459.705,268H312.91c-9.316-21.166-19.587-46.501-19.587-78.786c0-65.296,33.704-94.909,33.704-124.417c0-34.522-30.432-62.552-71.975-64.558c-41.648,2.006-74.72,30.035-74.72,64.558c0,29.507,32.359,59.12,32.359,124.417c0,32.285-9.665,57.621-18.431,78.786H52.3c-12.484,0-24.07,12.073-25.918,25.901L8.224,429.785C6.007,445.728,15.508,459,29.392,459z"></path></g></svg>';
break;case 1:e.title=a.Localize("annotation_rectangle");e.innerHTML='<svg viewBox="0 0 512 512" width="100%" height="100%"><path d="M500.984,475H12.015C5.58,475,1,470.943,1,464.485V45.368C1,38.955,5.58,32,12.015,32h488.97C507.42,32,512,38.955,512,45.368v419.117C512,470.943,507.42,475,500.984,475z M23,451h467V56H23V451z"></path></svg>';break;case 2:e.title=a.Localize("annotation_highlighter");e.innerHTML='<svg viewBox="0 0 512 512" width="100%" height="100%"><g><rect y="460" width="511" height="22"></rect><path d="M171.273,360.939l66.635,66.652l31.584-31.587l38.585,37.878l147.65-50.41l-77.51-96.199l32.437-32.439l-66.608-66.643l22.511-22.507L253.862,29.357L236.748,43.5l99.789,120.753l-187.28,187.29L38.114,236.169L21,250.333l126.696,134.18L171.273,360.939z M379.246,254.834L237.909,396.184l-50.928-50.948l141.364-141.343L379.246,254.834z"></path></g></svg>';
break;case 3:e.title=a.Localize("annotation_line");e.innerHTML='<svg viewBox="0 0 512 512" width="100%" height="100%"><path d="M18.027,508.886c-3.465,0-6.93-1.322-9.574-3.968c-5.29-5.289-5.29-13.858,0-19.147L484.646,9.604c5.289-5.29,13.858-5.29,19.147,0c5.289,5.289,5.289,13.858,0,19.148L27.601,504.918C24.956,507.563,21.491,508.886,18.027,508.886z"></path></svg>';break;case 4:e.title=a.Localize("annotation_arrow");e.innerHTML='<svg viewBox="0 0 512 512" width="100%" height="100%"><path d="M505.772,5.964L274.419,56.371l74.596,85.702L6.272,484.867c-5.689,5.689-5.689,14.906,0,20.596c2.844,2.845,6.571,4.267,10.297,4.267c3.726,0,7.453-1.422,10.297-4.267l341.316-341.369l70.939,81.502L505.772,5.964z"></path></svg>';
break;case 5:e.title=a.Localize("annotation_connectedline");e.innerHTML='<svg viewBox="0 0 512 512" width="100%" height="100%"><polygon points="423.454,318 239,85.713 239,1 145,1 145,95 162.2,95 67.761,414 17,414 17,509 112,509 112,414 100.812,414 195.267,95 208.079,95 398,337.304 398,414 494,414 494,318 "></polygon></svg>';break;case 6:e.title=a.Localize("annotation_ellipse");e.innerHTML='<svg viewBox="0 0 512 512" width="100%" height="100%"><path d="M256,475C114.579,475-0.474,375.635-0.474,253.5S114.579,32,256,32c141.42,0,256.475,99.365,256.475,221.5S397.42,475,256,475z M256,55.315c-128.567,0-233.158,88.914-233.158,198.185c0,109.293,104.591,198.185,233.158,198.185c128.555,0,233.157-88.892,233.157-198.185C489.156,144.229,384.555,55.315,256,55.315z"></path></svg>';
break;case 7:e.title=a.Localize("annotation_image");e.innerHTML='<svg viewBox="0 0 16 16" width="100%" height="100%"><g><g><g><path d="M2.1,16c-0.2,0-0.4-0.2-0.4-0.4V4c0-0.1,0-0.2,0.1-0.3l3.6-3.7C5.4,0,5.5,0,5.6,0h8.3 c0.2,0,0.4,0.2,0.4,0.4v15.2c0,0.2-0.2,0.4-0.4,0.4H2.1z M13.5,15.2V0.8H5.8L2.4,4.2l0,11H13.5z"/></g><g><path d="M2.3,4.4C2.1,4.4,2,4.3,2,4.1c0-0.2,0.2-0.4,0.4-0.4h3.1v-3c0-0.2,0.2-0.4,0.4-0.4s0.4,0.2,0.4,0.4v3.4\tc0,0.2-0.2,0.4-0.4,0.4H2.3z"/></g></g><g><path d="M11.8,13.8H4.2c-0.1,0-0.3-0.1-0.3-0.3V6.2C4,6,4.1,5.9,4.2,5.9h7.5C11.9,5.9,12,6,12,6.2v7.4\tC12,13.7,11.9,13.8,11.8,13.8z M4.5,13.3h7V6.4h-7V13.3z"/></g><g><path d="M10.6,12.2C10.6,12.2,10.6,12.2,10.6,12.2H5.3c-0.1,0-0.3-0.1-0.3-0.2c-0.1-0.1,0-0.3,0.1-0.4l1.4-1.5 C6.6,10,6.8,10,6.9,10l0.8,0.4L8.9,9C9,8.9,9.1,8.9,9.2,8.9c0.1,0,0.2,0.1,0.3,0.2l1.4,2.6c0,0.1,0.1,0.1,0.1,0.2 C10.9,12,10.8,12.2,10.6,12.2z M6.1,11.5H10L9.1,9.8L8.1,11c-0.1,0.1-0.3,0.1-0.4,0.1l-0.8-0.4L6.1,11.5z"/></g><g><path d="M6.4,9.7c-0.7,0-1.2-0.5-1.2-1.2s0.5-1.2,1.2-1.2s1.2,0.5,1.2,1.2S7.1,9.7,6.4,9.7z M6.4,8 C6.1,8,5.9,8.2,5.9,8.5C5.9,8.8,6.1,9,6.4,9s0.5-0.2,0.5-0.5C6.9,8.2,6.7,8,6.4,8z"/></g></g></svg>';
break;case 8:e.title=a.Localize("annotation_text");e.innerHTML='<svg viewBox="0 0 512 512" width="100%" height="100%"><g><path d="M43.419,109l-2.444,88h30.453l3.074-27.874c0.604-4.992,1.576-9.444,2.995-13.384c1.394-3.995,3.521-7.271,6.385-10.003c2.864-2.732,6.595-4.948,11.14-6.418c4.573-1.472,10.221-2.32,17-2.32H149v241.824c0,6.463-0.991,11.612-2.174,15.448c-1.182,3.836-2.992,6.727-5.041,8.829c-2.075,2.049-4.596,3.343-7.38,3.973c-2.811,0.683-5.99,0.926-9.378,0.926H107v24h155v-24h-18.951c-3.258,0-6.252-0.243-9.063-0.926c-2.785-0.63-5.256-1.961-7.384-4.009c-2.128-2.103-3.721-4.976-4.903-8.812c-1.182-3.836-1.698-8.967-1.698-15.43V137h36.056c6.751,0,12.428,0.865,16.973,2.337c4.572,1.471,8.275,3.638,11.142,6.371c2.889,2.733,5.018,6.075,6.41,10.069c1.392,3.94,2.391,8.342,2.968,13.333L296.86,197h30.215l-2.208-88H43.419z"></path><polygon points="471,28 471,0 416.925,0 389.875,0 336,0 336,28 390,28 390,485 336,485 336,512 471,512 471,485 417,485 417,28 \t"></polygon></g></svg>';
break;case 9:e.title=a.Localize("annotation_stickynote");e.innerHTML='<svg viewBox="0 0 512 512" width="100%" height="100%"><g><g><path d="M469.819,482.76c-0.163-0.056-0.352,0-0.541,0H43.514c-4.457,0-8.656-2.167-11.256-5.8c-55.361-76.884-28.135-152.522-1.788-225.654c24.992-69.462,48.614-135.05,1.788-200.095c-3.047-4.227-3.468-9.78-1.084-14.413c2.371-4.633,7.138-7.558,12.34-7.558h425.765c4.444,0,8.668,2.14,11.269,5.77c55.348,76.884,28.121,152.523,1.787,225.669c-24.706,68.581-48.004,133.383-3.573,197.589c3.033,2.547,4.931,6.339,4.931,10.619C483.691,476.529,477.487,482.76,469.819,482.76z M50.801,455.018h393.552c-36.519-69.354-11.947-137.568,11.867-203.711c24.272-67.403,47.245-131.176,5.771-194.326H68.438c36.505,69.327,11.948,137.542-11.88,203.699C32.298,328.068,9.338,391.842,50.801,455.018z"></path></g></g><g><path d="M156.769,256.182c-6.678,0-12.571-4.821-13.681-11.649c-1.232-7.559,3.901-14.684,11.459-15.903c43.698-7.125,109.436-5.336,162.288-3.901c28.148,0.732,59.953,1.653,68.245-0.027c5.038-3.007,11.593-2.574,16.253,1.49c5.744,5.065,6.338,13.817,1.247,19.587c-7.206,8.208-18.587,8.534-86.503,6.664c-51.635-1.408-115.963-3.115-157.061,3.55C158.258,256.128,157.513,256.182,156.769,256.182z"></path></g><g><path d="M156.769,187.371c-6.678,0-12.557-4.823-13.681-11.623c-1.232-7.558,3.901-14.71,11.459-15.93c43.711-7.152,109.504-5.363,162.343-3.927c28.147,0.758,59.926,1.652,68.19-0.027c5.038-3.008,11.593-2.575,16.253,1.49c5.744,5.066,6.338,13.815,1.247,19.587c-7.206,8.236-18.531,8.561-86.449,6.664c-51.675-1.354-115.977-3.142-157.114,3.576C158.258,187.316,157.513,187.371,156.769,187.371z"></path></g><g><path d="M121.306,334.896c-6.678,0-12.557-4.822-13.681-11.65c-1.233-7.531,3.901-14.683,11.459-15.93c43.752-7.152,109.583-5.31,162.452-3.9c28.119,0.812,59.816,1.625,68.054,0c5.039-3.034,11.648-2.602,16.254,1.516c5.742,5.039,6.312,13.817,1.246,19.561c-7.205,8.181-18.638,8.398-86.312,6.665c-51.703-1.409-116.044-3.197-157.223,3.521C122.795,334.842,122.051,334.896,121.306,334.896z"></path></g></svg>';
break;case 10:e.title=a.Localize("annotation_freehand");e.innerHTML='<svg viewBox="0 0 512 512" width="100%" height="100%"><path d="M499.492,181.467c-11.96,44.414-34.563,117.339-89.42,65.275c-34.057-32.322-42.199-91.157-80.909-117.183c-73.542-49.445-91.639,63.943-102.845,115.369c-3.438,16.144-8.056,72.668-23.494,85.512c-25.722,21.399-39.179-22.3-49.779-43.835c-17.208-34.958-52.154-79.916-97.267-55.696C-6.626,264.413,16.887,361.838,0.465,415.423C17.113,386.214,22.62,255.181,75.526,255.69c33.803-3.687,41.408,45.87,50.069,68.527c20.406,53.379,83.937,75.822,116.963,24.443c34.052-52.975,24.004-126.769,51.01-182.784c11.182-23.193,70.538,81.331,79.993,90.828c23.427,22.811,63.715,51.87,96.841,28.584c42.556-29.914,32.615-97.03,42.144-140.822C507.233,156.46,502.883,168.794,499.492,181.467C496.096,194.08,502.778,168.854,499.492,181.467z M203.761,328.545l-0.014,0.027C203.998,328.008,204.119,327.738,203.761,328.545zM202.883,330.527l-0.015,0.046C202.837,330.637,202.848,330.609,202.883,330.527z M297.399,158.402C298.163,158.724,296.701,158.864,297.399,158.402C297.498,158.444,297.2,158.534,297.399,158.402z M297.736,158.915C297.252,159.131,297.667,158.945,297.736,158.915C297.662,158.948,297.688,158.936,297.736,158.915z M299.317,158.358C298.857,158.425,300.358,157.938,299.317,158.358C299.294,158.361,300.867,157.733,299.317,158.358z M301.544,160.298l0.002,0.002C301.514,160.271,301.506,160.264,301.544,160.298z"></path></svg>';
break;case 11:e.title=a.Localize("annotation_freehandhighlighter");e.innerHTML='<svg viewBox="0 0 512 512" width="100%" height="100%"><g><path d="M472.685,400.812c-2.421,2.721-6.351,6.44-11.314,10.836c-9.825,9.039-25.58,20.031-45.521,30.845c-39.815,21.707-98.25,41.07-158.094,46.855c-29.812,3.23-59.989,2.698-87.392-1.899c-27.469-4.519-51.906-13.823-70.315-26.18c-18.498-12.204-31.01-26.869-37.717-38.372c-3.786-5.53-5.918-10.382-7.65-13.591c-1.676-3.243-2.576-4.974-2.576-4.974s0.488,1.876,1.41,5.407c1.088,3.464,1.832,8.971,4.874,15.178c2.443,6.506,6.473,13.911,11.714,22.193c5.596,7.995,12.602,16.811,22.039,24.539c18.375,16.099,44.756,28.923,74.279,35.44c29.5,6.973,61.921,7.815,93.607,4.862c63.566-6.306,124.054-30.643,162.682-58.424c9.838-6.662,18.12-13.855,25.037-20.573c6.983-6.64,12.602-12.846,16.876-18.331c4.485-5.318,7.173-9.925,9.038-13.068c1.898-3.108,2.909-4.773,2.909-4.773S475.217,398.181,472.685,400.812z"></path><path d="M181.89,338.128l68.226,68.226l31.801-31.802l40.035,38.241l151.154-51.584l-79.351-98.495l33.208-33.208l-67.064-69.36l21.908-21.905L266.448-1.324l-17.521,14.478l102.17,123.62L159.36,328.499L49.557,211.623l-17.521,14.5l125.726,136.129L181.89,338.128z M394.809,229.506L250.116,374.199l-52.148-52.146L342.692,177.35L394.809,229.506z"></path></g></svg>';
break;case 12:e.title=a.Localize("annotation_freehandpolygon");e.innerHTML='<svg viewBox="0 0 16 16" width="100%" height="100%"><g><path d="M3.4,16c-0.2,0-0.3-0.1-0.4-0.2l-3-5.6C-0.1,10,0,9.7,0.2,9.6l4-2.8l0-6.4c0-0.2,0.1-0.3,0.2-0.4 C4.5,0,4.6,0,4.7,0c0.1,0,0.1,0,0.2,0.1l10.9,6.1C16,6.2,16,6.4,16,6.7l-2.9,9C13,15.9,12.8,16,12.7,16H3.4z M12.3,15.1L15,6.7l-10-5.5l0,5.9C5,7.2,5,7.4,4.9,7.4L1,10.1l2.7,5H12.3z"/></g></svg>';break;case 13:e.title=a.Localize("annotation_link");e.innerHTML='<svg viewBox="0 0 16 16" width="100%" height="100%"><g><g><path d="M6,10.3c-0.1,0.1-0.4,0.1-0.5,0c-0.1-0.1-0.1-0.4,0-0.5l4-4c0.1-0.1,0.4-0.1,0.5,0c0.1,0.1,0.1,0.4,0,0.5 L6,10.3z"/></g><g><path d="M13,7.6c-1,1-2.4,1.2-3.6,0.6C9.3,8.2,9.2,8.1,9.2,8c0-0.1,0-0.2,0-0.3c0,0,0-0.1,0.1-0.1 c0.1-0.1,0.3-0.1,0.4-0.1c0.9,0.5,2.1,0.3,2.8-0.5l2.1-2.1c1-1,1-2.5,0-3.5l-0.2-0.2c-1-1-2.5-1-3.5,0L8.9,3.5 C8.2,4.2,8,5.2,8.3,6.2c0.1,0.1,0,0.3-0.1,0.4c0,0-0.1,0.1-0.1,0.1C8,6.7,7.8,6.6,7.7,6.4C7.2,5.3,7.5,3.9,8.4,3l2.1-2.1 c1.2-1.2,3.2-1.2,4.5,0l0.2,0.2c1.2,1.2,1.2,3.2,0,4.5L13,7.6z"/></g><g><path d="M5.6,15.1c-1.2,1.2-3.2,1.2-4.5,0l-0.2-0.2c-1.2-1.2-1.2-3.2,0-4.5L3,8.4c0.9-0.9,2.3-1.2,3.5-0.7 C6.6,7.8,6.7,8,6.6,8.2c0,0,0,0.1-0.1,0.1C6.5,8.4,6.3,8.4,6.2,8.3C5.2,8,4.2,8.2,3.5,8.9l-2.1,2.1c-1,1-1,2.5,0,3.5l0.2,0.2 c1,1,2.5,1,3.5,0l2.1-2.1c0.7-0.7,0.9-1.9,0.5-2.8c-0.1-0.1,0-0.3,0.1-0.4c0,0,0.1-0.1,0.1-0.1c0.1,0,0.2,0,0.3,0 c0.1,0,0.2,0.1,0.2,0.2c0.6,1.2,0.3,2.7-0.6,3.6L5.6,15.1z"/></g></g></svg>';
break;case 14:e.title=a.Localize("annotation_polygon");e.innerHTML='<svg viewBox="0 0 16 16" width="100%" height="100%"><path d="M4.2,15.2c-0.2,0-0.3-0.1-0.3-0.2L0.1,8.2C0,8.1,0,7.9,0.1,7.8L3.9,1c0.1-0.1,0.2-0.2,0.3-0.2h7.6 c0.1,0,0.3,0.1,0.3,0.2l3.8,6.8c0.1,0.1,0.1,0.3,0,0.4L12.1,15c-0.1,0.1-0.2,0.2-0.3,0.2H4.2z M11.6,14.6L15.1,8l-3.6-6.6H4.4L0.9,8 l3.6,6.6H11.6z"/></svg>';break;case 15:e.title=a.Localize("annotation_ruler");e.innerHTML='<svg viewBox="0 0 512 512" width="100%" height="100%"><path d="M210.091,479.958 M499.701,177.36c4.492-4.675,4.693-12.183,0.004-16.689L344.134,11.188 c-4.69-4.506-15.696-7.381-20.188-2.708l-7.533,7.842L197.22,140.381L33.748,310.516l-21.75,22.641l-7.971,8.295l11.851,11.387 l147.033,141.279l8.538,8.202c4.689,4.508,11.782,4.424,16.305-0.285 M209.507,479.395 M180.333,157.957L99.611,241.97 L49.96,293.643 M179.123,477.244L40.627,344.169l13.848-14.415l15.874-16.52l16.169,15.536l17.576,16.888l16.874,16.212 l16.873,16.214l16.886-17.578l-16.872-16.213l-16.873-16.211l-17.577-16.888l-16.168-15.536l15.537-16.17l16.168,15.537 l17.578,16.888l16.873,16.212l16.888-17.577l-16.874-16.212l-17.577-16.887l-16.169-15.537l16.213-16.873l16.168,15.537 l17.577,16.888l16.873,16.212l16.212-16.873l-50.619-48.636l16.212-16.873l67.491,64.849l16.887-17.575l-67.491-64.85l15.535-16.169 l50.62,48.636l16.888-17.575l-50.618-48.637l16.211-16.874l50.618,48.637l16.213-16.873l-50.618-48.637l16.212-16.873l67.491,64.849 l16.888-17.575l-67.49-64.849l15.534-16.171l50.619,48.638l16.889-17.577l-50.619-48.637l20.903-21.766l138.499,133.077 L356.444,292.697l-16.889,17.576l-64.848,67.49l-65.525,68.195l-16.212,16.872L179.123,477.244z M356.089,326.837 M226.304,463.085"></path> path d="M798.922,450.447 M797.895,20.84c-0.002-6.649-5.19-12.344-11.861-12.34L568.746,8.593 c-6.672,0.003-12.854,5.703-12.851,12.351l0.005,11.154l0.084,176.454l0.104,242l0.017,32.201l0.005,11.799l12.856-0.007 l205.143-0.088l12.144-0.006c6.672-0.002,11.855-5.106,11.852-11.803 M798.089,450.447 M555.994,233.552l0.053,119.499l0.031,73.501  M774.099,470.458l-193,0.083l-0.011-20.501l-0.01-23.5l23-0.009l25-0.011l24-0.012l24.001-0.009l-0.013-25l-24,0.01l-23.999,0.011 l-25.001,0.012l-22.998,0.009l-0.01-23l22.999-0.009l25.001-0.012l23.999-0.011l-0.011-25.001l-24,0.012l-25,0.012l-23,0.009 l-0.01-24.001l22.999-0.008l25-0.012l24-0.011l-0.01-24l-72,0.031l-0.011-24l96-0.042l-0.011-25l-96,0.042l-0.01-23l72-0.031 l-0.011-25l-72,0.03l-0.012-24l72.001-0.031l-0.01-24l-72.001,0.031l-0.01-24l96-0.042l-0.01-25l-96,0.041l-0.011-23l72.001-0.03 l-0.013-25l-71.999,0.031l-0.021-30.953l193.001-0.084l0.083,175.454l0.011,25l0.041,96l0.041,97l0.011,24L774.099,470.458z  M797.995,233.448 M798.911,426.446"/&gt;</svg>';
break;case 16:e.title=a.Localize("annotation_polyruler"),e.innerHTML='<svg viewBox="0 0 512 512" width="100%" height="100%"><path d="M497.429,220H461V15.345C461,8.696,455.814,3,449.143,3H231.856C225.185,3,219,8.696,219,15.345V26.5V220H14.571C7.899,220,2,225.982,2,232.631V244.5v205.416V462h12.571H219v36.202V510h12.856H437h12.143c6.672,0,11.857-5.102,11.857-11.798V462h24h12.429c6.672,0,11.571-5.388,11.571-12.084V232.631C509,225.982,504.101,220,497.429,220z M195,438v-73h-24v73h-24v-97h-25v97H99v-73H74v73H26V245h193v119.5V438H195z M437,486H244v-24.5V438h23h25h24h24v-25h-24h-24h-25h-23v-23h23h25h24v-25h-24h-25h-23v-24h23h25h24v-24h-72v-24h96v-25h-96v-23h72v-25h-72v-24h72v-24h-72v-24h96v-25h-96v-23h72V75h-72V27h193v192.5v25v96v97v24V486zM485,438h-24V245h24V438z"></path></svg>'}g.appendChild(e);
e=document.createElement("div");e.style.fontSize="smaller";e.style.lineHeight="20px";e.style.display="inline-block";e.innerText=a.Localize("label_page")+" "+b.annotApp.pageNo;g.appendChild(e);b.annotApp.canEdit&&(e=document.createElement("div"),e.title=a.Localize("annotation_action_edit"),e.style.height="20px",e.style.width="16px",e.style.marginLeft="15px",e.style.display="inline-block",e.style["float"]="right",e.addEventListener("click",function(){var c=document.getElementById(a.uniqueID);c&&c.control.CommentProperties_Click(b.annotApp.id)}),
e.addEventListener("mouseover",function(){jQuery(this).css("cursor","pointer");jQuery(this).css("fill",a.dom.UIconfig.hoverColor)}),e.addEventListener("mouseout",function(){jQuery(this).css("cursor","default");jQuery(this).css("fill",a.dom.UIconfig.strokeColor)}),e.innerHTML="<svg viewBox='0 0 16 16' width='100%' height='100%'><path d='M14.59 9.535c-0.839-1.454-0.335-3.317 1.127-4.164l-1.572-2.723c-0.449 0.263-0.972 0.414-1.529 0.414-1.68 0-3.042-1.371-3.042-3.062h-3.145c0.004 0.522-0.126 1.051-0.406 1.535-0.839 1.454-2.706 1.948-4.17 1.106l-1.572 2.723c0.453 0.257 0.845 0.634 1.123 1.117 0.838 1.452 0.336 3.311-1.12 4.16l1.572 2.723c0.448-0.261 0.967-0.41 1.522-0.41 1.675 0 3.033 1.362 3.042 3.046h3.145c-0.001-0.517 0.129-1.040 0.406-1.519 0.838-1.452 2.7-1.947 4.163-1.11l1.572-2.723c-0.45-0.257-0.839-0.633-1.116-1.113zM8 11.24c-1.789 0-3.24-1.45-3.24-3.24s1.45-3.24 3.24-3.24c1.789 0 3.24 1.45 3.24 3.24s-1.45 3.24-3.24 3.24z'></path></svg>",
g.appendChild(e));var e=a.Internal.Annotations.getLastAnnotationCommentAnswerOfDiscussion(b.annotApp.id).annotApp.id===b.annotApp.id,f=a.Internal.Annotations.getFirstAnnotationCommentOfDiscussion(b.annotApp.id).annotApp.id===b.annotApp.id;(e||f)&&b.annotApp.properties.allowAnswer&&(e=document.createElement("div"),e.title=a.Localize("label_comment_answer"),e.style.height="20px",e.style.width="16px",e.style.display="inline-block",e.style["float"]="right",e.addEventListener("click",function(){var c=
document.getElementById(a.uniqueID);c&&(f?c.control.CommentAnswer_Click(a.Internal.Annotations.getLastAnnotationCommentAnswerOfDiscussion(b.annotApp.id).annotApp.id):c.control.CommentAnswer_Click(b.annotApp.id))}),e.addEventListener("mouseover",function(){jQuery(this).css("cursor","pointer");jQuery(this).css("fill",a.dom.UIconfig.hoverColor)}),e.addEventListener("mouseout",function(){jQuery(this).css("cursor","default");jQuery(this).css("fill",a.dom.UIconfig.strokeColor)}),e.innerHTML="<svg viewBox='0 0 16 16' width='100%' height='100%'><path d='M7 12.119v3.881l-6-6 6-6v3.966c6.98 0.164 6.681-4.747 4.904-7.966 4.386 4.741 3.455 12.337-4.904 12.119z'></path></svg>",
g.appendChild(e));e=document.createElement("div");e.style.height="20px";e.style.width="16px";e.style.display="inline-block";e.style.marginRight="15px";e.style["float"]="right";if(0!==b.annotApp.properties.reviewStatus)switch(b.annotApp.properties.reviewStatus){case 1:e.title=a.Localize("label_comment_status_approved");e.innerHTML='<svg viewBox="0 0 16 16" width="100%" height="100%" class="icon-approved"><path d="M8,16c4.4,0,8-3.6,8-8s-3.6-8-8-8S0,3.6,0,8S3.6,16,8,16z M8,1.5c3.6,0,6.5,2.9,6.5,6.5s-2.9,6.5-6.5,6.5S1.5,11.6,1.5,8\tS4.4,1.5,8,1.5z"/><path d="M6.8,11h3.6c0.3,0,0.6-0.2,0.7-0.5l1.2-2.8c0-0.1,0.1-0.2,0.1-0.3V6.6l0,0l0,0c0-0.4-0.4-0.8-0.8-0.8H9.1 L9.4,4l0-0.1c0-0.2-0.1-0.3-0.2-0.4L8.9,3L6.2,5.6C6.1,5.8,6,6,6,6.2v4C6,10.6,6.4,11,6.8,11z M5.2,11V6.2H3.6V11H5.2z"/></svg>';
break;case 2:e.title=a.Localize("label_comment_status_canceled");e.innerHTML='<svg viewBox="0 0 16 16" width="100%" height="100%" class="icon-canceled"><path d="M8,0C3.6,0,0,3.6,0,8s3.6,8,8,8s8-3.6,8-8S12.4,0,8,0z M8,14.5c-3.6,0-6.5-2.9-6.5-6.5S4.4,1.5,8,1.5s6.5,2.9,6.5,6.5 S11.6,14.5,8,14.5z"/><polygon points="10.6,4 8,6.6 5.4,4 4,5.4 6.6,8 4,10.6 5.4,12 8,9.4 10.6,12 12,10.6 9.4,8 12,5.4 "/></svg>';break;case 3:e.title=a.Localize("label_comment_status_finished");e.innerHTML='<svg viewBox="0 0 16 16" width="100%" height="100%" class="icon-finished"><path d="M8,0C3.6,0,0,3.6,0,8s3.6,8,8,8s8-3.6,8-8S12.4,0,8,0z M8,14.5c-3.6,0-6.5-2.9-6.5-6.5S4.4,1.5,8,1.5s6.5,2.9,6.5,6.5 S11.6,14.5,8,14.5z"/><g transform="translate(256 352)"><path d="M-244.9-347.5l-4.2,4.2l-2-2l-1.4,1.4l3.4,3.4l5.7-5.7L-244.9-347.5z"/></g></svg>';
break;case 4:e.title=a.Localize("label_comment_status_rejected"),e.innerHTML='<svg viewBox="0 0 16 16" width="100%" height="100%" class="icon-rejected"><path d="M8,0C3.6,0,0,3.6,0,8s3.6,8,8,8s8-3.6,8-8S12.4,0,8,0z M8,14.5c-3.6,0-6.5-2.9-6.5-6.5S4.4,1.5,8,1.5s6.5,2.9,6.5,6.5 S11.6,14.5,8,14.5z"/><path d="M9.2,5H5.6C5.3,5,5,5.2,4.9,5.5L3.7,8.3c0,0.1-0.1,0.2-0.1,0.3v0.8l0,0l0,0c0,0.4,0.4,0.8,0.8,0.8h2.5 L6.6,12l0,0.1c0,0.2,0.1,0.3,0.2,0.4L7.1,13l2.6-2.6C9.9,10.2,10,10,10,9.8v-4C10,5.4,9.6,5,9.2,5z M10.8,5v4.8h1.6V5H10.8z"/></svg>'}g.appendChild(e);
d.appendChild(g);c.appendChild(d);return c}},events:{ownMouseEvents:!1,overLink:null,overPageText:null,overAnnotEditable:!1,mouseMode:0,mouseX:0,mouseY:0,mouseDownX:0,mouseDownY:0,mouseDownViewerScrollLeft:0,mouseDownViewerScrollTop:0,mouseDownClientX:0,mouseDownClientY:0,isDrawingPath:!1,isMouseDown:!1,pathPoints:null,isPanning:!1,canPan:!1,isResizingUI:!1,isSelectingText:!1,isDragMultipleSelecting:!1,onNewViewerSize:function(){a.NewViewerSizeTimeout&&(clearTimeout(a.NewViewerSizeTimeout),a.NewViewerSizeTimeout=
null);a.dom.resizeControlArea();a.dom.searchArea&&jQuery(a.dom.searchArea.parentElement).hasClass("active")&&(a.dom.searchResultsContainer.style.height=jQuery(a.dom.searchArea).outerHeight(!0)-jQuery(a.dom.searchPanelForm).outerHeight(!0)+"px");var b={sessionID:a.ajax.sessionID,reuseSessionContext:!0,clientConfiguration:a.getConfig(),newViewerSize:!0};if(a.viewerWidth!=b.clientConfiguration.viewerWidth||a.viewerHeight!=b.clientConfiguration.viewerHeight)a.NewViewerSizeTimeout=setTimeout(function(){if(a.hasPendingAction(!1,
!1,!0))a.events.onNewViewerSize();else a.viewerWidth=b.clientConfiguration.viewerWidth,a.viewerHeight=b.clientConfiguration.viewerHeight,a.ajax.PostBaseRequest({url:a.appControllerPath+"/init"+(a.useIdInRoot?"/1":""),data:b,success:function(b){(b="string"===typeof b?eval("("+b+")"):b)&&b.status==DocuViewareAPI.Status.OK&&(a.ajax.SetNewServerCtx(b),a.showVisibleThumbnails());a.NewViewerSizeTimeout=null},error:function(){a.NewViewerSizeTimeout=null}},!1,!0)},300)},onLoad:function(b){if(a.isSafari||
a.isIOS||a.isIE10||a.isIE9)null!=a.dom.fullscreenButton&&jQuery(a.dom.fullscreenButton).remove(),null!=a.dom.fullscreenButtonMobile&&jQuery(a.dom.fullscreenButtonMobile).remove();a.IsTwainSupportAvailable()||(null!=a.dom.twainAcquisitionButton&&jQuery(a.dom.twainAcquisitionButton).remove(),null!=a.dom.twainAcquisitionButtonMobile&&jQuery(a.dom.twainAcquisitionButtonMobile).remove());!a.isIE||a.isIE10||a.isIE11||(null!=a.dom.openFromFileButton&&jQuery(a.dom.openFromFileButton).remove(),null!=a.dom.openFromFileButtonMobile&&
jQuery(a.dom.openFromFileButtonMobile).remove());a.isIE&&!a.isIE11&&null!=a.dom.snapinTabControl&&(a.dom.snapinTabControl.style.position="static");a.dom.resizeControlArea();a.viewerWidth=a.dom.viewerArea.offsetWidth;a.viewerHeight=a.dom.viewerArea.offsetHeight;a.dom.mainArea.style.visibility="visible";1==b?(a.waitForInit=!0,b={sessionID:a.ajax.sessionID,contextID:a.ajax.contextID,clientConfiguration:a.getConfig(),reuseSessionContext:!1,newViewerSize:!1},a.DisplayPendingActionNotification(),a.ajax.PostAjaxRequestForDocuViewareAction({url:a.appControllerPath+
"/init"+(a.useIdInRoot?"/1":""),async:!0,data:JSON.stringify(b),success:function(b){a.waitForInit=!1;a.HidePendingActionNotification();(b="string"===typeof b?eval("("+b+")"):b)&&b.status==DocuViewareAPI.Status.OK&&(a.ajax.SetNewServerCtx(b),b.documentLoaded&&!a.dom.singlePageView&&(b=a.GetCurrentPage(),a.Internal.Pages.isPageVisible(b)||a.EnsureCurrentPageVisibility()))},error:function(b){a.ajax.HandleError(b)}})):2==b&&a.LoadFromUri("","");a.SetMouseMode(0)},onResize:function(){a.events.onNewViewerSize();
jQuery(a.dom.mainArea).find(" .dvUi-dialog:visible").find(".dvUi-dialog-content").dvDialog("refresh",jQuery(a.dom.controlArea).height())},forwardMouseEventsToViewer:function(b){b.onmouseup=function(b){a.events.mouseup(b)};b.onmousedown=function(b){a.events.mousedown(b)};b.onmousemove=function(b){a.events.mousemove(b)};b.onmouseleave=function(b){a.events.mouseleave(b)};b.onmouseenter=function(b){a.events.mouseenter(b)};b.ondblclick=function(b){a.events.dblclick(b)};b.ontouchstart=function(b){1==b.changedTouches.length&&
a.events.mousedown(b.changedTouches[0],!0)};b.ontouchmove=function(b){1==b.changedTouches.length&&a.events.mousemove(b.changedTouches[0],!0)&&b.preventDefault()};b.ontouchend=function(b){1==b.changedTouches.length&&(a.events.mouseup(b.changedTouches[0]),b.preventDefault())}},dblclick:function(b){a.ExitAnnotationDrawingMode();if(this.overPageText&&0==a.dom.SelectedTextRegions.count(1)&&(b=a.Internal.Text.captureSelectedText(this.mouseDownClientX,this.mouseDownClientY,this.mouseDownClientX,this.mouseDownClientY,
!0,!1))&&0<b.length){for(var c=0;c<b.length;c++)for(var d=0;d<b[c].regions.length;d++){var g={left:b[c].regions[d].Left/b[c].scale,top:b[c].regions[d].Top/b[c].scale,width:b[c].regions[d].Width/b[c].scale,height:b[c].regions[d].Height/b[c].scale};a.Internal.Coordinates.documentToViewerBox(b[c].pageNo,g);a.dom.SelectedTextRegions.addNew(b[c].pageNo,g.left,g.top,g.width,g.height,"rgba(0,0,201,0.3)",null,1)}if(a.callbacks.onTextSelected)a.callbacks.onTextSelected()}},mousedown:function(b,c){if(3!=b.which){this.isMouseDown=
!0;this.mouseX=b.clientX;this.mouseY=b.clientY;this.mouseDownViewerScrollLeft=a.Internal.Coordinates.getViewerScrollLeft();this.mouseDownViewerScrollTop=a.Internal.Coordinates.getViewerScrollTop();this.mouseDownX=b.clientX+this.mouseDownViewerScrollLeft;this.mouseDownY=b.clientY+this.mouseDownViewerScrollTop;this.mouseDownClientX=b.clientX;this.mouseDownClientY=b.clientY;var d=a.dom.viewerArea.getBoundingClientRect();if(1==this.mouseMode)a.Internal.Selection.selectionArea.startNewAnnotBox(this.mouseDownX-
d.left,this.mouseDownY-d.top);else if(2==this.mouseMode){d={x:b.clientX+a.Internal.Coordinates.getViewerScrollLeft()-d.left,y:b.clientY+a.Internal.Coordinates.getViewerScrollTop()-d.top};if(5==a.Internal.Annotations.currentAnnotProperties.type||16==a.Internal.Annotations.currentAnnotProperties.type||a.dom.UIconfig.freeHandContinuousDrawingMode&&10==a.Internal.Annotations.currentAnnotProperties.type)if(!a.disableAnnotationDrawingModePanel||a.isIOS)a.dom.drawingModeArea.style.display="block",a.dom.modalOverlayArea.style.display=
"block",a.dom.viewerArea.style.overflow="hidden";if(null==this.pathPoints){var g=a.Internal.Pages.getRenderingState(a.GetCurrentPage());a.dom.freehandCan.style.left=g.pageLeft+"px";a.dom.freehandCan.style.top=g.pageTop+"px";a.dom.freehandCan.width=g.pageWidth;a.dom.freehandCan.height=g.pageHeight;a.dom.freehandCan.getContext("2d").clearRect(0,0,a.dom.freehandCan.width,a.dom.freehandCan.height);a.dom.freehandCan.style.display="block";this.pathPoints=[d]}else 5!=a.Internal.Annotations.currentAnnotProperties.type&&
16!=a.Internal.Annotations.currentAnnotProperties.type&&this.pathPoints.push({x:131072,y:131072}),this.pathPoints.push(d);this.isDrawingPath=!0}else if(3==this.mouseMode||4==this.mouseMode)a.Internal.Selection.selectionArea.startNewSelectionBox(this.mouseDownX-d.left,this.mouseDownY-d.top);else{a.Internal.Annotations.unselectAll();a.Internal.Text.clearSelection();a.dom.SelectedTextRegions.clear(1);if(!c&&(this.overPageText=a.Internal.Text.anyWordHitTest(b.clientX,b.clientY,5),null!=this.overPageText)){this.isSelectingText=
!0;this.setCursor();return}this.overLink||(1==this.canPan&&(this.isPanning=!0,a.dom.viewerArea.cursorMgr.setCustomCursorClass("closedHandCursor")),c&&(this.overLink=!1,a.dom.checkLinkAt(b.clientX,b.clientY)),a.dom.handleLinkRectVisibility())}}},mouseup:function(b){var c=this.isSelectingText;this.isPanning=this.isSelectingText=this.isMouseDown=!1;if(c&&0<a.dom.SelectedTextRegions.count(1)){if(this.setCursor(),a.callbacks.onTextSelected)a.callbacks.onTextSelected()}else if(this.overLink)3!=b.which&&
(b=this.overLink.destPage,c=this.overLink.destUri,this.overLink=null,a.dom.handleLinkRectVisibility(),"unknown"!==c&&0===b?window.open(c,"_blank"):a.SelectPageEx(b,!0,!0,!0,!1),this.setCursor());else if(1!=this.mouseMode&&3!=this.mouseMode&&4!=this.mouseMode||!a.Internal.Selection.selectionArea.mouseUp(b))if(2==this.mouseMode&&this.isDrawingPath)a.dom.UIconfig.freeHandContinuousDrawingMode&&10==a.Internal.Annotations.currentAnnotProperties.type||5==a.Internal.Annotations.currentAnnotProperties.type||
16==a.Internal.Annotations.currentAnnotProperties.type||(a.dom.freehandCan.style.display="none",this.isDrawingPath=!1,a.Internal.Annotations.addAnnotInteractive());else if(0<a.Internal.Annotations.selected.length)for(b=a.Internal.Annotations.selected.length-1;0<=b;b--)a.Internal.Annotations.selected[b].stopEditing(),a.Internal.Annotations.selected[b].updateCursor();else this.overPageText||0==this.mouseMode&&1==this.canPan&&a.dom.viewerArea.cursorMgr.setCustomCursorClass("openHandCursor")},mousemove:function(b,
c){if(this.isSelectingText){a.dom.SelectedTextRegions.clear(1);var d=this.mouseDownViewerScrollLeft-a.Internal.Coordinates.getViewerScrollLeft(),g=this.mouseDownViewerScrollTop-a.Internal.Coordinates.getViewerScrollTop();if(this.mouseDownClientX+d!=b.clientX||this.mouseDownClientY+g!=b.clientY){var e=a.Internal.Text.captureSelectedText(this.mouseDownClientX+d,this.mouseDownClientY+g,b.clientX,b.clientY,!1,b.altKey);if(e&&0<e.length){for(var f=document.createDocumentFragment(),d=0;d<e.length;d++)for(var l=
0;l<e[d].regions.length;l++)g={left:e[d].regions[l].Left/e[d].scale,top:e[d].regions[l].Top/e[d].scale,width:e[d].regions[l].Width/e[d].scale,height:e[d].regions[l].Height/e[d].scale},a.Internal.Coordinates.documentToViewerBox(e[d].pageNo,g),a.dom.SelectedTextRegions.addNew(e[d].pageNo,g.left,g.top,g.width,g.height,"rgba(0,0,201,0.3)",null,1,f);a.dom.viewerArea.appendChild(f)}}}else{e=!1;this.overPageText=null;if(1==this.mouseMode||3==this.mouseMode||4==this.mouseMode)e=a.Internal.Selection.selectionArea.mouseMove(b,
c);if(2==this.mouseMode&&this.isDrawingPath){l=a.dom.viewerArea.getBoundingClientRect();e=5==a.Internal.Annotations.currentAnnotProperties.type||16==a.Internal.Annotations.currentAnnotProperties.type;f={x:b.clientX+a.Internal.Coordinates.getViewerScrollLeft()-l.left,y:b.clientY+a.Internal.Coordinates.getViewerScrollTop()-l.top};l=!1;if(this.isMouseDown&&!e){g=l=!0;d=this.pathPoints.length;if(1<d)var g=this.pathPoints[d-2],h=this.pathPoints[d-1],g=1.5<=Math.sqrt(Math.abs((g.y-h.y)*(g.x-f.x)-(g.y-f.y)*
(g.x-h.x)));g?this.pathPoints.push(f):this.pathPoints[d-1]=f}else e&&(l=!0);if(l){g=parseFloat(a.dom.freehandCan.style.top);d=parseFloat(a.dom.freehandCan.style.left);h=a.dom.freehandCan.getContext("2d");h.clearRect(0,0,a.dom.freehandCan.width,a.dom.freehandCan.height);h.lineWidth=96*a.Internal.Annotations.currentAnnotProperties.borderWidth*a.GetCurrentZoom();h.strokeStyle=a.Internal.Annotations.currentAnnotProperties.strokeColor;h.globalAlpha=11==a.Internal.Annotations.currentAnnotProperties.type?
.5:a.Internal.Annotations.currentAnnotProperties.opacity;h.beginPath();e||(h.lineJoin="round",h.lineCap="round");for(l=0;l<this.pathPoints.length;l++)131072==this.pathPoints[l].x&&131072==this.pathPoints[l].y?(h.stroke(),h.beginPath(),e||(h.lineJoin="round",h.lineCap="round")):h.lineTo(this.pathPoints[l].x-d,this.pathPoints[l].y-g);e&&h.lineTo(f.x-d,f.y-g);h.stroke()}e=!0}if(!e&&0<a.Internal.Annotations.selected.length)for(d=b.clientX-this.mouseX,g=b.clientY-this.mouseY,l=a.Internal.Annotations.selected.length-
1;0<=l;l--){f=a.Internal.Annotations.selected[l];e|=f.isEditing();if(f.isMoving)f.annotrectNew.left+=d,f.annotrectNew.top+=g,f.render(!0);else if(f.isRotating)f.annotApp.rotation=a.Internal.Utilities.normalizeRotation(f.annotApp.rotation+d),f.render(!1);else if(-1!=f.resizingMode)switch(f.resizingMode){case 0:0<f.annotrectNew.width-d&&(f.annotrectNew.left+=d,f.addWidth(-d));0<f.annotrectNew.height-g&&(f.annotrectNew.top+=g,f.addHeight(-g));f.render(!1);break;case 1:0<f.annotrectNew.width+d&&f.addWidth(d);
0<f.annotrectNew.height-g&&(f.annotrectNew.top+=g,f.addHeight(-g));f.render(!1);break;case 2:0<f.annotrectNew.width+d&&f.addWidth(d);0<f.annotrectNew.height+g&&f.addHeight(g);f.render(!1);break;case 3:0<f.annotrectNew.width-d&&(f.annotrectNew.left+=d,f.addWidth(-d));0<f.annotrectNew.height+g&&f.addHeight(g);f.render(!1);break;case 4:0<f.annotrectNew.width-d&&(f.annotrectNew.left+=d,f.addWidth(-d));f.render(!1);break;case 5:0<f.annotrectNew.height-g&&(f.annotrectNew.top+=g,f.addHeight(-g));f.render(!1);
break;case 6:0<f.annotrectNew.width+d&&f.addWidth(d);f.render(!1);break;case 7:0<f.annotrectNew.height+g&&f.addHeight(g),f.render(!1)}f.updateCursor()}e||0!=this.mouseMode||c||1!=this.canPan||1!=this.isPanning||(e=!0,a.serverCtx.hScrollbarVisible&&jQuery(a.dom.viewerArea).scrollLeft(this.mouseDownViewerScrollLeft-(b.clientX-this.mouseDownClientX)),a.serverCtx.vScrollbarVisible&&jQuery(a.dom.viewerArea).scrollTop(this.mouseDownViewerScrollTop-(b.clientY-this.mouseDownClientY)));this.overLink=!1;3!=
this.mouseMode&&4!=this.mouseMode&&(e||(a.dom.checkLinkAt(b.clientX,b.clientY)||(this.overPageText=a.Internal.Text.anyWordHitTest(b.clientX,b.clientY,5)),this.setCursor()),a.dom.handleLinkRectVisibility());this.mouseX=b.clientX;this.mouseY=b.clientY;return e}},mouseleave:function(b){this.isResizingUI||this.isSelectingText||(this.isPanning=!1,0==this.mouseMode&&a.dom.viewerArea.cursorMgr.setStdCursor("default"),this.overLink=null,a.dom.handleLinkRectVisibility())},mouseenter:function(a){this.isResizingUI||
this.isSelectingText||this.setCursor()},setCursor:function(){if(this.isResizingUI)a.dom.viewerArea.cursorMgr.setStdCursor("col-resize");else switch(this.mouseMode){case 0:if(null!=this.overPageText){var b=a.Internal.Rotations.getRotateFlipTypeAngle(a.Internal.Pages.getRenderRotation(this.overPageText.page)),c=a.Internal.Rotations.getRotateFlipTypeAngle(this.overPageText.textRotate),b=b+c;360<b&&(b-=360);90==b||270==b?a.dom.viewerArea.cursorMgr.setStdCursor("vertical-text"):a.dom.viewerArea.cursorMgr.setStdCursor("text");
break}if(this.overLink){a.dom.viewerArea.cursorMgr.setStdCursor("pointer");break}1==this.canPan?1==!this.isPanning&&a.dom.viewerArea.cursorMgr.setCustomCursorClass("openHandCursor"):a.dom.viewerArea.cursorMgr.setStdCursor("default");break;case 1:a.dom.viewerArea.cursorMgr.setStdCursor("crosshair");break;case 2:a.dom.viewerArea.cursorMgr.setCustomCursorClass("pencilCursor");break;case 3:case 4:a.dom.viewerArea.cursorMgr.setStdCursor("crosshair")}},onSnapInButtonMouseEnter:function(b){jQuery(b).hasClass("active")||
(b.style.backgroundColor=a.dom.UIconfig.snapInButtonBorderBottom,b.style.borderTopColor=a.dom.UIconfig.snapInButtonBorderBottom,b.style.cursor="pointer")},onSnapInButtonMouseLeave:function(b){jQuery(b).hasClass("active")||(b.style.backgroundColor=a.dom.UIconfig.headerColor,b.style.borderTopColor=a.dom.UIconfig.snapInButtonBorderTop,b.style.cursor="default")},onThumbnailAreaMouseDownHandler:function(b){if(b.target==document.getElementById(a.FindSnapIn("thumbnails").snapInID)||b.target==a.dom.thumbnailArea){var c=
document.getElementById(a.FindSnapIn("thumbnails").snapInID),c=jQuery(c).offset().left+jQuery(c).width()-a.dom.sbWidth;b.pageX>c||(b.ctrlKey||(a.Internal.Thumbnails.reinitThumbnailsSelection(),a.dom.updateThumbsStyle(!1,!0)),a.dom.thumbnailSelectBox&&(a.dom.thumbnailSelectBoxOrigin.left=b.pageX-jQuery(a.dom.thumbnailArea).offset().left+a.dom.thumbnailArea.scrollLeft,a.dom.thumbnailSelectBoxOrigin.top=b.pageY-jQuery(a.dom.thumbnailArea).offset().top+a.dom.thumbnailArea.scrollTop,b={display:"block",
left:a.dom.thumbnailSelectBoxOrigin.left+"px",top:a.dom.thumbnailSelectBoxOrigin.top+"px",width:"1px",height:"1px"},a.dom.thumbnailSelectBox.addClass("active").css(b),a.events.isDragMultipleSelecting=!0))}},onThumbnailAreaMouseMoveHandler:function(b){if(a.dom.thumbnailSelectBox.is(".active")){var c=b.pageX-jQuery(a.dom.thumbnailArea).offset().left+a.dom.thumbnailArea.scrollLeft,d=b.pageY-jQuery(a.dom.thumbnailArea).offset().top+a.dom.thumbnailArea.scrollTop,g=c,e=d,f=a.dom.thumbnailSelectBoxOrigin.left-
g,h=a.dom.thumbnailSelectBoxOrigin.top-e;c>a.dom.thumbnailSelectBoxOrigin.left&&(g=a.dom.thumbnailSelectBoxOrigin.left,f=c-a.dom.thumbnailSelectBoxOrigin.left);d>a.dom.thumbnailSelectBoxOrigin.top&&(e=a.dom.thumbnailSelectBoxOrigin.top,h=d-a.dom.thumbnailSelectBoxOrigin.top);a.dom.thumbnailSelectBox.css({left:g+"px",top:e+"px",width:f+"px",height:h+"px"});c=a.getVisibleThumbnails(!1);f=jQuery(a.dom.thumbnailSelectBox).position();d=f.left;g=f.top;e=f.left+jQuery(a.dom.thumbnailSelectBox).width();f=
f.top+jQuery(a.dom.thumbnailSelectBox).height();for(h=0;h<c.length;h++){var k=jQuery(a.dom.thumbnailArea.children[c[h]-1]),m=k.position(),n=m.left,q=m.top,r=m.left+k.width(),m=m.top+k.height();(k=a.Internal.Thumbnails.getThumbnailPage(k.get(0)))&&(a.Internal.Coordinates.hasIntersection(d,g,e,f,n,q,r,m)?a.Internal.Thumbnails.selectThumbnail(k):b.ctrlKey||a.Internal.Thumbnails.unselectThumbnail(k))}c=document.getElementById(a.FindSnapIn("thumbnails").snapInID);b.pageY+20>jQuery(c).offset().top+jQuery(c).height()&&
(c.scrollTop+=20);b.pageY-20<jQuery(c).offset().top&&(c.scrollTop-=20);b.preventDefault()}},onThumbnailAreaMouseUpHandler:function(b){a.dom.thumbnailSelectBox.is(".active")&&(a.dom.thumbnailSelectBox.removeClass("active").css("display","none"),a.events.isDragMultipleSelecting=!1);b.preventDefault()},onThumbnailItemClickHandler:function(b){if(!a.events.isResizingUI&&(b.stopImmediatePropagation(),b&&b.target)){var c=a.Internal.Thumbnails.getThumbnailPage(b.target);c&&a.serverCtx.documentLoaded&&0<c&&
c<=a.serverCtx.pageCount&&(a.dom.UIconfig.enableMultipleThumbnailSelection&&b.ctrlKey?a.Internal.Thumbnails.toggleThumbnailSelection(c):0==a.dom.viewerArea.offsetWidth||0==a.dom.viewerArea.offsetHeight?(a.ajax.latestSelectedPage=c,a.dom.updateThumbsStyle(!1,!1)):a.SelectPageEx(c,!1,!0,!0,!0))}},onThumbnailItemMouseOverHandler:function(b){!a.events.isResizingUI&&!a.events.isDragMultipleSelecting&&b&&b.target&&(b=a.Internal.Thumbnails.getThumbnailPage(b.target))&&(a.Internal.Thumbnails.getThumbnailFromPageNo(b)[0].setAttribute("mouse-over",
"true"),a.dom.updateThumbStyle(b))},onThumbnailItemMouseOutHandler:function(b){!a.events.isResizingUI&&!a.events.isDragMultipleSelecting&&b&&b.target&&(b=a.Internal.Thumbnails.getThumbnailPage(b.target))&&(a.Internal.Thumbnails.getThumbnailFromPageNo(b)[0].setAttribute("mouse-over","false"),a.dom.updateThumbStyle(b))},onBookmarkItemClickHandler:function(b){!a.events.isResizingUI&&b&&b.target&&(a.dom.selectBoomark(b.target),b.target.action&&(-1<b.target.action.indexOf("PdfPageDest")?a.Internal.Pages.selectByDestination(b.target.action):
-1<b.target.action.indexOf("uri")&&window.open(b.target.action.replace("uri:","").trim(),"_blank")))},onBookmarkItemMouseOverHandler:function(b){a.events.isResizingUI||(b.stopPropagation(),b&&b.currentTarget&&a.dom.setBookmarkOverStyle(b.currentTarget,!0))},onBookmarkItemMouseOutHandler:function(b){a.events.isResizingUI||b&&b.currentTarget&&a.dom.setBookmarkOverStyle(b.currentTarget,!1)},onBookmarkTogglerClickHandler:function(b){if(!a.events.isResizingUI&&b&&b.target){var c=jQuery(b.target).parent().find("ul");
jQuery(b.target).hasClass("collapsed")?(jQuery(b.target).removeClass("collapsed").addClass("expanded"),c.show(),0!=jQuery(b.target).parent().children("ul").children("li").children("span.placeholder").length&&b.target.bookmarkID&&(b={url:a.appControllerPath+"/bookmarks"+(a.useIdInRoot?"/1":""),data:JSON.stringify({sessionID:a.ajax.sessionID,contextID:a.ajax.contextID,bookmarkID:b.target.bookmarkID}),success:function(b){if((b="string"===typeof b?eval("("+b+")"):b)&&b.status==DocuViewareAPI.Status.OK&&
(c.empty(),b.bookmarks))for(var d=0;d<b.bookmarks.length;d++)a.dom.createBookmarkNode(c,b.bookmarks[d])},error:function(b){a.ajax.HandleError(b)}},a.ajax.PostAjaxRequestForDocuViewareAction(b,!1,!0))):(jQuery(b.target).removeClass("expanded").addClass("collapsed"),c.hide())}}},doNextPageViewProcess:function(){if(!this.serverCtx.documentLoaded||!this.cache.canvas)return DocuViewareAPI.Status.GenericError;var b=0;this.serverCtx.singlePageView||(b=this.showVisiblePages(a.GetCurrentPage()));if(0==b&&
1==(this.serverCtx.pagePreload&1)){var c=this.Internal.Pages.getVisiblePageNumbers(),d=[];if(0<c.length){var e=c[c.length-1]+1,f=c[0]-1,h=0==f,k=e==this.serverCtx.pageCount+1;if(null!=a.cache.Pages)for(c=0;c<a.cache.Pages.length&&(0==h&&a.cache.Pages[c].pageNo==f?(a.cache.Pages[c].bitmap||a.cache.Pages[c].renderStatus==DocuViewareAPI.Status.OK&&d.push(f),h=!0):a.cache.Pages[c].pageNo==e&&(a.cache.Pages[c].bitmap||a.cache.Pages[c].renderStatus==DocuViewareAPI.Status.OK&&d.push(e),k=!0),!h||!k);c++);
h||d.push(f);k||d.push(e);0<d.length&&(b=this.Internal.Pages.pageView(d,!1,!1))}}if(0==b&&2==(this.serverCtx.pagePreload&2))for(d=1;d<=this.serverCtx.pageCount;d++)if(e=!1,(c=a.Internal.Pages.getPage(d))&&(c.bitmap||c.renderStatus!=DocuViewareAPI.Status.OK)&&(e=!0),!e)return this.Internal.Pages.pageView([d],!1,!1);if(0==b&&!this.serverCtx.singlePageView&&null!=a.cache.Pages&&!a.serverCtx.enableSmoothing)for(c=d=0;c<a.cache.Pages.length&&(!a.cache.Pages[c].bitmap||a.cache.Pages[c].drawing||a.cache.Pages[c].drawn||
(a.DrawPage(a.cache.Pages[c]),d++,10!=d));c++);return b},showVisiblePages:function(a){var b=this.Internal.Pages.getVisiblePageNumbers();if(null!=a)for(var c=0;c<b.length;c++)if(b[c]==a){b.splice(c,1);break}return this.Internal.Pages.pageView(b,!0,!1)},showVisibleThumbnails:function(){this.Internal.Files.uploading||this.ajax.downloading||a.events.isResizingUI||this.dom.thumbnailArea&&1==this.serverCtx.documentLoaded&&this.updateThumbnails(a.getVisibleThumbnails(!0))},getVisibleThumbnails:function(b){for(var c=
this.dom.thumbnailArea,d=this.dom.thumbnailArea.scrollLeft,g=this.dom.thumbnailArea.scrollTop,e=d+jQuery(c).innerWidth(),c=g+jQuery(c).innerHeight(),f=this.dom.thumbnailArea.childElementCount,h=[],k=!1,m=0;m<f;m++){var n=this.dom.thumbnailArea.children[m];if(0!=a.Internal.Thumbnails.getThumbnailPage(n)){var q=jQuery(n).position().left,r=jQuery(n).position().top,t=q+jQuery(n).innerWidth(),v=r+jQuery(n).innerHeight();if(a.Internal.Coordinates.hasIntersection(d,g,e,c,q,r,t,v))b?"false"==n.getAttribute("data-moving")&&
"false"==n.getAttribute("data-loaded")&&"false"==n.getAttribute("data-loading")&&h.push(m+1):h.push(m+1),k=!0;else if(k)break}}return h},sortCommentsBy:function(b){var c=function(a,b,c,d){var g=function(a,b){if(b){b=b.split(".");for(var c=0,d=b.length-1;c<d;c++)a=a[b[c]];return a[b[d]]}return a},e=function(b){return c?c(g(b,a)):g(b,a)};return function(a,c){var g=e(a),f=e(c);return(g<f?-1:g>f?1:"function"===typeof d?d(a,c):0)*[1,-1][+!!b]}};switch(jQuery(a.dom.commentsSortBySelect).find("option:selected").val()){case "page":b.sort(c("comment.annotApp.pageNo",
!1,null,c("comment.annotApp.zorder",!1,parseFloat)));break;case "author":b.sort(c("comment.annotApp.author",!1,function(a){return a.toUpperCase()}));break;case "date":b.sort(c("comment.annotApp.creationTime",!1,function(a){return new Date(a)}))}},refreshCommentsPanel:function(){0<a.cache.AnnotsComments.length?(jQuery(a.dom.commentsSearchActionContainerOverlayDisable).css("display","none"),jQuery(a.dom.commentsSortBySelectContainer).css("opacity","1")):(jQuery(a.dom.commentsSearchActionContainerOverlayDisable).css("display",
"block"),jQuery(a.dom.commentsSortBySelectContainer).css("opacity","0.5"));jQuery(a.dom.commentsArea).find("#commentsContainer"+a.uniqueID).empty();for(var b=a.Internal.Annotations.getAllFirstAnnotationComments(a.sortCommentsBy),c=0;c<b.length;c++)for(var d=a.Internal.Annotations.getFirstAnnotationCommentAnswerOfDiscussion(b[c].comment.annotApp.id);null!=d;)null==b[c].answers?b[c].answers=[d]:b[c].answers.push(d),d=a.Internal.Annotations.getAnnotationCommentFromId(d.annotApp.properties.nextGuid);
for(c=0;c<b.length;c++)a.dom.createCommentItem(b[c].comment,b[c].answers);jQuery(function(){jQuery(".dvtoggle").click(function(a){a.stopPropagation();jQuery(this).parents(".dvcomment-header").next(".dvcomment-content").slideToggle();jQuery(this).toggleClass("dvcolapsed")})});a.SetSnapInVisibility("comments",!0)},updateThumbnails:function(b,c){if(0!=b.length&&a.dom.thumbnailArea&&a.dom.thumbnailArea.children){if(c){for(var d=0;d<b.length;d++){var g=a.Internal.Thumbnails.getThumbnailFromPageNo(b[d]);
if(null==g||null!=g&&("false"==g.attr("data-loaded")||"true"==g.attr("data-loading")))b.splice(d,1),d--}if(0==b.length)return}for(d=0;d<b.length;d++)g=a.Internal.Thumbnails.getThumbnailFromPageNo(b[d]),null!=g&&g.attr("data-loading","true");var e=function(){if(a.dom.thumbnailArea&&a.dom.thumbnailArea.children)for(var c=0;c<b.length;c++){var d=a.Internal.Thumbnails.getThumbnailFromPageNo(b[c]);null!=d&&(d.attr("data-loaded","false"),d.attr("data-loading","false"))}};a.debug&&console.log("DocuVieware: showing visible thumbnails: "+
JSON.stringify(b)+"onlyIfLoaded "+(c?"true":"false"));this.ajax.thumbnailRequestNo+=1;a.ajax.PostAjaxRequestForDocuViewareAction({url:a.appControllerPath+"/thumbnails"+(a.useIdInRoot?"/1":""),async:!0,data:JSON.stringify({sessionID:this.ajax.sessionID,contextID:this.ajax.contextID,entries:b,requestNo:this.ajax.thumbnailRequestNo}),success:function(b){if((b="string"===typeof b?eval("("+b+")"):b)&&b.status==DocuViewareAPI.Status.OK){if(b.contextID==a.ajax.contextID&&a.dom.thumbnailArea&&(b=b.images)&&
0<b.length){for(var c=0;c<b.length;c++){var d=a.Internal.Thumbnails.getThumbnailFromPageNo(b[c].pageNo);if(null!=d){d.attr("data-loaded","true");d.attr("data-loading","false");d=d.children("canvas");d.removeClass("spinner-thumb");d.css("backgroundColor","rgba(0,0,0,0)");var g=new Image;g.owner=d.get(0);g.setAttribute("data-pageNo",b[c].pageNo);g.src="data:"+b[c].mime+";base64,"+b[c].data;var f=b[c].scale;g.onload=function(){var b=this.owner.getContext("2d");b.clearRect(0,0,this.owner.width,this.owner.height);
b.save();1==f?(b.mozImageSmoothingEnabled=!1,b.msImageSmoothingEnabled=!1,b.imageSmoothingEnabled=!1):b.transform(1/f,0,0,1/f,0,0);b.shadowColor=a.Internal.Thumbnails.THUMBNAIL_SHADOW_COLOR;b.shadowBlur=a.Internal.Thumbnails.THUMBNAIL_SHADOW_BLUR;b.shadowOffsetX=a.Internal.Thumbnails.THUMBNAIL_SHADOW_OFFSET;b.shadowOffsetY=a.Internal.Thumbnails.THUMBNAIL_SHADOW_OFFSET;if(a.isIE9){var c=this;window.setTimeout(function(){b.drawImage(c,0,0);b.restore();b=null},100)}else b.drawImage(this,0,0),b.restore(),
b=null}}}a.dom.updateThumbsStyle(!1,!1)}}else e()},error:function(b){a.ajax.HandleError(b);e()}})}},ResetScrollConfig:function(){a.isIOS&&(a.dom.viewerArea.style.overflow="auto");a.serverCtx.vScrollbarVisible&&a.serverCtx.hScrollbarVisible?a.isIOS||(a.dom.viewerArea.style.overflow="auto",a.dom.viewerArea.style.overflowY="scroll",a.dom.viewerArea.style.overflowX="scroll"):a.serverCtx.vScrollbarVisible?a.isIOS||(a.dom.viewerArea.style.overflowX="hidden",a.dom.viewerArea.style.overflowY="scroll"):a.serverCtx.hScrollbarVisible?
a.isIOS||(a.dom.viewerArea.style.overflowY="hidden",a.dom.viewerArea.style.overflowX="scroll"):a.isIOS||(a.dom.viewerArea.style.overflowY="hidden",a.dom.viewerArea.style.overflowX="hidden")},ClearUI:function(){a.cache.emptyCanvas();a.Internal.Thumbnails.removeAllThumbnails();a.dom.bookmarksArea&&jQuery(a.dom.bookmarksTree).empty();a.Internal.Text.clearSelection();a.ClearSearch();a.Internal.FormFields.removeAll();a.Internal.Annotations.removeAll()},UpdateUI:function(b,c,d,e,f,h){function g(){var b=
a.isIOS?1024:2048;a.cache.canvas=[];var c=a.dom.viewerArea.offsetHeight,d=a.dom.viewerArea.offsetWidth;a.serverCtx.vScrollbarVisible&&(d-=a.dom.sbWidth);a.serverCtx.hScrollbarVisible&&(c-=a.dom.sbWidth);for(var g=document.createDocumentFragment(),e=0;e<a.serverCtx.pageCanvasSize.length;e++){var f=a.serverCtx.pageCanvasSize[e].OffsetX,l=a.serverCtx.pageCanvasSize[e].OffsetY,h=a.serverCtx.pageCanvasSize[e].Width+f,k=a.serverCtx.pageCanvasSize[e].Height+l;k>c&&(c=k);h>d&&(d=h);var p=[],m=Math.ceil(a.serverCtx.pageCanvasSize[e].Width/
b),n=Math.ceil(a.serverCtx.pageCanvasSize[e].Height/b),y=a.serverCtx.pageCanvasSize[e].Width*a.serverCtx.pageCanvasSize[e].Height>b*b,q=DocuViewareUtilities.getDevicePixelRatio();if(y&&(1<m||1<n))for(var C=y=0,H=0;H<n;H++){C+=b;C-1>a.serverCtx.pageCanvasSize[e].Height&&(C=a.serverCtx.pageCanvasSize[e].Height-1);for(var r=C-y,t=0,u=0,L=0;L<m;L++){u+=b;u-1>a.serverCtx.pageCanvasSize[e].Width&&(u=a.serverCtx.pageCanvasSize[e].Width-1);var v=u-t,w=document.createElement("canvas");w.width=v*q;w.height=
r*q;w.style.width=v+"px";w.style.height=r+"px";w.style.display="block";w.style.position="absolute";w.style.left=f+t+"px";w.style.top=l+y+"px";w.style.padding="0px";w.style.margin="0px";w.style.backgroundColor="white";g.appendChild(w);p.push({tile:w,tx:-(t*q),ty:-(y*q)});t+=v}y+=r}else w=document.createElement("canvas"),w.width=Math.ceil(a.serverCtx.pageCanvasSize[e].Width*q),w.height=Math.ceil(a.serverCtx.pageCanvasSize[e].Height*q),w.style.width=Math.ceil(a.serverCtx.pageCanvasSize[e].Width)+"px",
w.style.height=Math.ceil(a.serverCtx.pageCanvasSize[e].Height)+"px",w.style.display="block",w.style.position="absolute",w.style.left=f+"px",w.style.top=l+"px",w.style.padding="0px",w.style.margin="0px",w.style.backgroundColor="white",g.appendChild(w),p.push({tile:w,tx:0,ty:0});a.cache.canvas.push({canvas:p,top:l,left:f,right:h,bottom:k,pageNo:a.serverCtx.pageCanvasSize[e].PageNo})}a.dom.viewerArea.appendChild(g);a.serverCtx.pageCanvasSize=null;b=document.createElement("div");b.style.display="block";
b.style.position="absolute";b.style.height=c+"px";b.style.width=d+"px";b.style.left="0px";b.style.top="0px";b.style.padding="0px";b.style.margin="0px";a.isIE&&(b.style.backgroundColor="rgba(255,255,255,0.01)");a.events.forwardMouseEventsToViewer(b);a.dom.viewerArea.appendChild(b);!a.dom.singlePageView&&1<a.GetPageCount()&&(a.dom.pageBoundsDiv=document.createElement("div"),a.dom.pageBoundsDiv.style.display="block",a.dom.pageBoundsDiv.style.position="absolute",a.dom.pageBoundsDiv.style.padding="0px",
a.dom.pageBoundsDiv.style.margin="0px",a.dom.pageBoundsDiv.style.display="none",a.dom.pageBoundsDiv.style.borderStyle="solid",a.dom.pageBoundsDiv.style.borderColor=a.dom.UIconfig.strokeColor,a.dom.pageBoundsDiv.style.borderWidth="2px",b.appendChild(a.dom.pageBoundsDiv));a.Internal.Selection.selectionArea.init(b);a.SetMouseMode(a.events.mouseMode);a.dom.rlink=document.createElement("canvas");a.dom.rlink.style.zIndex=16E6-1;a.dom.rlink.style.position="absolute";a.dom.rlink.style.height="0px";a.dom.rlink.style.width=
"0px";a.dom.rlink.style.left="0px";a.dom.rlink.style.top="0px";a.dom.rlink.style.padding="0px";a.dom.rlink.style.margin="0px";a.dom.rlink.style.borderStyle="solid";a.dom.rlink.style.borderColor="red";a.dom.rlink.style.borderWidth="1px";a.dom.rlink.style.display="none";b.appendChild(a.dom.rlink);a.dom.freehandCan||(a.dom.freehandCan=document.createElement("canvas"));a.dom.freehandCan.style.position="absolute";a.dom.freehandCan.style.padding="0px";a.dom.freehandCan.style.margin="0px";a.dom.freehandCan.style.display=
"none";a.dom.freehandCan.style.zIndex=16777271;a.dom.freehandCan.onmouseup=function(b){a.events.mouseup(b)};a.dom.freehandCan.onmousedown=function(b){a.events.mousedown(b)};a.dom.freehandCan.onmousemove=function(b){a.events.mousemove(b)};a.dom.freehandCan.onmouseleave=function(b){a.events.mouseleave(b)};a.dom.freehandCan.onmouseenter=function(b){a.events.mouseenter(b)};a.dom.freehandCan.ondblclick=function(b){a.events.dblclick(b)};a.dom.freehandCan.ontouchstart=function(b){1==b.changedTouches.length&&
a.events.mousedown(b.changedTouches[0])};a.dom.freehandCan.ontouchmove=function(b){1==b.changedTouches.length&&(b.preventDefault(),a.events.mousemove(b.changedTouches[0],!0))};a.dom.freehandCan.ontouchend=function(b){1==b.changedTouches.length&&a.events.mouseup(b.changedTouches[0])};a.dom.viewerArea.appendChild(a.dom.freehandCan);null!=a.dom.annotationsActionButtons&&a.dom.viewerArea.appendChild(a.dom.annotationsActionButtons);a.serverCtx.vScrollbarVisible?jQuery(a.dom.infoDiv).width(a.dom.viewerArea.offsetWidth-
a.dom.sbWidth):jQuery(a.dom.infoDiv).width(a.dom.viewerArea.offsetWidth)}var l=null!=a.serverCtx&&a.serverCtx.documentLoaded;b&&(this.ajax.latestSelectedPage=this.serverCtx.selectedPage);this.dom.singlePageView!=this.serverCtx.singlePageView&&(this.dom.singlePageView=this.serverCtx.singlePageView,this.dom.updateSinglePageModeButton());f||!a.serverCtx.clearCachedBitmap&&!a.serverCtx.clearCachedPages||(a.serverCtx.clearCachedPages?(a.debug&&console.log("DocuVieware: Cached pages removed. zoom: "+a.serverCtx.zoom),
a.cache.clearCachedPages()):a.serverCtx.clearCachedBitmap&&(a.debug&&console.log("DocuVieware: Cached bitmap removed. zoom: "+a.serverCtx.zoom),a.cache.clearCachedBitmap()),a.serverCtx.clearCachedBitmap=!1,a.serverCtx.clearCachedPages=!1);if(l){null!=a.serverCtx.pageCanvasSize&&(a.cache.emptyCanvas(),g());if(a.serverCtx.pagesReset){for(var k=0;k<a.serverCtx.pagesReset.length;k++)a.cache.clearPage(a.serverCtx.pagesReset[k]);a.serverCtx.pagesReset=null}c||(a.debug&&console.log("DocuVieware: Setting scrollbar values of page: "+
a.GetCurrentPage()+" / "+a.GetLastPageNoRequest()),this.ResetScrollConfig(),a.serverCtx.vScrollbarVisible&&a.serverCtx.hScrollbarVisible?(a.Internal.Coordinates.setViewerScrollTop(a.serverCtx.vScrollbarVal),a.Internal.Coordinates.setViewerScrollLeft(a.serverCtx.hScrollbarVal)):a.serverCtx.vScrollbarVisible?a.Internal.Coordinates.setViewerScrollTop(a.serverCtx.vScrollbarVal):a.serverCtx.hScrollbarVisible&&a.Internal.Coordinates.setViewerScrollLeft(a.serverCtx.hScrollbarVal),a.events.canPan=a.serverCtx.vScrollbarVisible||
a.serverCtx.hScrollbarVisible);null!=a.serverCtx.annotsComments&&a.dom.commentsArea&&(a.Internal.Annotations.setAnnotationsComments(a.serverCtx.annotsComments),a.refreshCommentsPanel());if(null!=a.serverCtx.page)for(k=0;k<a.serverCtx.page.length;k++){var m=!1;c=a.serverCtx.page[k].pageNo;var p=a.Internal.Pages.getPage(c);p&&(m=!0,!f&&a.serverCtx.page[k].data&&(p.bitmap=null));m||(p={pageNo:c,drawn:!1,drawing:!1},a.cache.cachePage(p));p.renderStatus=a.serverCtx.page[k].renderStatus;f||(h||(p.renderRotation=
a.serverCtx.page[k].renderRotation,p.viewRotation=a.serverCtx.page[k].viewRotation,p.drawn&&!a.Internal.Matrix.equal(p.matrix,a.serverCtx.page[k].matrix)&&(p.drawn=!1),p.matrix=a.serverCtx.page[k].matrix,p.contentMatrix=a.serverCtx.page[k].contentMatrix,p.zoom=a.serverCtx.page[k].zoom),p.width=a.serverCtx.page[k].width,p.height=a.serverCtx.page[k].height);if(a.serverCtx.page[k].formFields&&(m=a.serverCtx.page[k].formFields,m.firstAccess&&a.Internal.FormFields.removePageFormFields(p.pageNo),m.formFieldsApp))for(var n=
0;n<m.formFieldsApp.length;n++)a.Internal.FormFields.newController(m.formFieldsApp[n]);if(a.serverCtx.page[k].annots&&(m=a.serverCtx.page[k].annots,m.firstAccess&&a.Internal.Annotations.removePageAnnots(p.pageNo),m.annotsApp))for(var n=a.cache.getPageCanvas(p.pageNo),y=0;y<m.annotsApp.length;y++)a.Internal.Annotations.newController(m.annotsApp[y],n.left,n.top,p.contentMatrix);a.serverCtx.page[k].text&&(p.text=a.serverCtx.page[k].text);a.serverCtx.page[k].links&&(p.links=a.serverCtx.page[k].links);
f||(a.serverCtx.page[k].data?(m=new Image,m.src="data:"+a.serverCtx.page[k].mime+";base64,"+a.serverCtx.page[k].data,a.cache.attachImageToPage(p,m,a.serverCtx.page[k].scale,a.serverCtx.page[k].hasTransparency),p.drawn=!1,m.setAttribute("data-pageNo",c),d&&(p.drawing=!0,m.onload=function(b){b=parseInt(this.getAttribute("data-pageNo"));a.DrawPage(a.cache.getPageObject(b))})):d&&(null!=p.bitmap?a.Internal.Pages.isPageVisible(p.pageNo)&&(p.drawing=!0,a.DrawPage(p)):(a.debug&&console.log("DocuVieware: draw page request without attached bitmap "+
c+". render status: "+p.renderStatus),p.renderStatus==DocuViewareAPI.Status.OK&&(p.renderStatus=DocuViewareAPI.Status.GenericError))),a.serverCtx.page[k].updateThumbnail&&a.updateThumbnails([c],!0));a.serverCtx.page[k]=null;null==p.bitmap&&(p.TransferRetries||(p.TransferRetries=0),p.TransferRetries++<DocuViewareConstants.MAX_PAGE_TRANSFER_RETRIES&&(a.debug&&console.log("DocuVieware: new page content received without attached bitmap "+c+". Total retries: "+parseFloat(p.TransferRetries)),a.Internal.Pages.pageView([p.pageNo],
!1,!0)))}}if(b){if(0<a.serverCtx.pageCount&&a.dom.thumbnailArea){k=document.createDocumentFragment();for(d=0;d<a.serverCtx.pageCount;d++)k.appendChild(a.Internal.Thumbnails.createThumbnail(d+1));a.dom.thumbnailArea.appendChild(k);a.dom.updateThumbsStyle(!0,!0)}if(null!=a.serverCtx.bookmarks&&a.dom.bookmarksArea){for(k=0;k<a.serverCtx.bookmarks.length;k++)d=a.serverCtx.bookmarks[k],a.dom.createBookmarkNode(jQuery(a.dom.bookmarksTree),d);a.SetSnapInVisibility("bookmarks",!0)}}if(!l||b||e)a.SetSnapInVisibility("annotations",
l&&a.serverCtx.annotationEditorMode),a.SetSnapInVisibility("comments",l&&a.serverCtx.annotationEditorMode),a.SetSnapInVisibility("thumbnails",l),a.SetSnapInVisibility("bookmarks",l&&0<jQuery(a.dom.bookmarksTree).children().length),a.SetSnapInVisibility("search",l&&a.serverCtx.enableTextSearch);a.dom.leftSideArea&&(a.isIE9||a.isIE10)&&jQuery(a.dom.leftSideContainerPanelsArea).height(jQuery(a.dom.controlArea).height()-jQuery(a.dom.snapinsHeader).height());l&&(a.isIE&&!a.serverCtx.singlePageView&&a.serverCtx.vScrollbarMax>
DocuViewareConstants.IE_MAX_SCROLL_TOP_LIMIT?a.ToggleSinglePageViewMode():(a.showVisibleThumbnails(),a.doNextPageViewProcess()))},DrawPage:function(b){if(null!=b&&null!=b.matrix){var c=a.cache.getPageCanvas(b.pageNo);b.drawing=!1;if(null!=c){if(!a.dom.singlePageView&&1<a.GetPageCount()&&a.GetCurrentPage()==b.pageNo){var d=parseFloat(a.dom.pageBoundsDiv.style.borderWidth),g=a.Internal.Pages.getRenderingState(b.pageNo);a.dom.pageBoundsDiv.style.left=g.pageLeft+"px";a.dom.pageBoundsDiv.style.top=g.pageTop+
"px";a.dom.pageBoundsDiv.style.width=g.pageWidth-2*d+"px";a.dom.pageBoundsDiv.style.height=g.pageHeight-2*d+"px";a.dom.pageBoundsDiv.style.display="block"}if(!b.drawn)try{a.debug&&console.log("DocuVieware: drawing page: "+b.pageNo+". mat: "+JSON.stringify(b.matrix));var e=null,f=b.matrix,h=DocuViewareUtilities.getDevicePixelRatio();1!=h&&a.Internal.Matrix.isRotatedOrFlipped(f)&&(f=a.Internal.Matrix.combine({a:1/h,b:0,c:0,d:1/h,e:0,f:0},f),f=a.Internal.Matrix.combine(f,{a:h,b:0,c:0,d:h,e:0,f:0}));
var k=b.scale;1!=k&&(f=a.Internal.Matrix.combine({a:1/k,b:0,c:0,d:1/k,e:0,f:0},f));var m=Math.abs(f.a)+Math.abs(f.c),n=Math.abs(f.b)+Math.abs(f.d),q;q=a.serverCtx.enableSmoothing?.15>=Math.min(m,n)?3:.5>=Math.min(m,n)?2:1:1;if(1!=q){var r=b.bitmap.width,t=b.bitmap.height;if(a.attachedDebugger&&a.isIE)if(9437184>b.bitmap.width*b.bitmap.height)if(f={a:f.a*Math.pow(2,q-1),b:f.b*Math.pow(2,q-1),c:f.c*Math.pow(2,q-1),d:f.d*Math.pow(2,q-1),e:f.e,f:f.f},b.hasTransparency)if(2==q)z=document.createElement("canvas"),
z.width=r/2,z.height=t/2,v=z.getContext("2d"),v.drawImage(b.bitmap,0,0,r/2,t/2),v=null,e=z;else{z=document.createElement("canvas");z.width=r/2;z.height=t/2;v=z.getContext("2d");v.drawImage(b.bitmap,0,0,r/2,t/2);var v=null,w=document.createElement("canvas");w.width=r/4;w.height=t/4;var A=w.getContext("2d");A.drawImage(z,0,0,r/4,t/4);A=null;e=w}else{var z=document.createElement("canvas");z.width=r/2;z.height=t/2;for(var v=z.getContext("2d"),x=0;x<q-1;x++)v.drawImage(0==x?b.bitmap:z,0,0,r/Math.pow(2,
x+1),t/Math.pow(2,x+1));e=z}else e=b.bitmap;else{var E=document.createElement("canvas");E.width=r;E.height=t;var F=E.getContext("2d");F.mozImageSmoothingEnabled=!1;F.msImageSmoothingEnabled=!1;F.imageSmoothingEnabled=!1;F.drawImage(b.bitmap,0,0,r,t);var G=document.createElement("canvas");G.width=Math.ceil(r*m);G.height=Math.ceil(t*n);var M=G.getContext("2d"),O=M.getImageData(0,0,G.width,G.height),f=a.Internal.Matrix.combine({a:1/m,b:0,c:0,d:1/n,e:0,f:0},f),P=F.getImageData(0,0,E.width,E.height).data,
F=null;a.Internal.Libs.pica.resize({src:P,dest:O.data,width:E.width,height:E.height,toWidth:G.width,toHeight:G.height,alpha:b.hasTransparency,quality:q-2});M.putImageData(O,0,0);P=E=M=O=null;e=G}}else e=b.bitmap;if(e){for(x=0;x<c.canvas.length;x++){var D=c.canvas[x].tile;if(null!=D){D.style.backgroundColor="transparent";var I=D.getContext("2d");I.save();I.clearRect(0,0,D.width,D.height);I.mozImageSmoothingEnabled=a.serverCtx.enableSmoothing;I.msImageSmoothingEnabled=a.serverCtx.enableSmoothing;I.imageSmoothingEnabled=
a.serverCtx.enableSmoothing;1==f.a&&0==f.b&&0==f.c&&1==f.d&&0==f.e+c.canvas[x].tx&&0==f.f+c.canvas[x].ty||I.transform(f.a,f.b,f.c,f.d,f.e+c.canvas[x].tx,f.f+c.canvas[x].ty);if(a.isIE9)window.setTimeout(function(){if(9437184<e.width*e.height){var a=Math.round(e.width/2),b=Math.round(e.height/2),c=1/m,d=1/n;I.drawImage(e,0,0,a,b,0,0,a,b);I.drawImage(e,a,0,a,b,a-c,0,a,b);I.drawImage(e,0,b,a,b,0,b-d,a,b);I.drawImage(e,a,b,a,b,a-c,b-d,a,b)}else I.drawImage(e,0,0);I.restore();I=null},100);else{if(9437184<=
e.width*e.height){var J=Math.round(e.width/2),Q=Math.round(e.height/2),d=1/m,g=1/n;I.drawImage(e,0,0,J,Q,0,0,J,Q);I.drawImage(e,J,0,J,Q,J-d,0,J,Q);I.drawImage(e,0,Q,J,Q,0,Q-g,J,Q);I.drawImage(e,J,Q,J,Q,J-d,Q-g,J,Q)}else I.drawImage(e,0,0);I.restore();I=null}}}a.isIE9||(e=null);b.drawn=!0}}catch(K){alert("DocuVieware page drawing exception: "+K.message)}if(null!=a.cache.FormFields)for(x=0;x<a.cache.FormFields.length;x++)f=a.cache.FormFields[x],f.control&&f.formFieldApp.pageNo==b.pageNo&&(a.Internal.FormFields.existFormField(f)||
a.dom.viewerArea.appendChild(f.control),f.render());if(null!=a.cache.Annots)for(x=0;x<a.cache.Annots.length;x++)if(f=a.cache.Annots[x],f.annotApp.pageNo==b.pageNo&&(f.updatePageInfo(c.left,c.top,b.contentMatrix),f.annotApp.visible)){D=!0;if(a.dom.viewerArea.hasChildNodes())for(J=a.dom.viewerArea.children.length-1;0<=J;J--)if(a.dom.viewerArea.children[J]===f.canvas){D=!1;break}D&&a.dom.viewerArea.appendChild(f.canvas);f.render()}a.Internal.Search.highlightResults(b.pageNo)}}},resetServerCtx:function(){this.serverCtx=
{zoomMode:0,zoom:0,documentLoaded:!1,pageCount:0,selectedPage:0,imageCanvasSize:null,enableSmoothing:!1,hScrollbarVal:0,hScrollbarMax:0,hScrollbarVisible:!1,vScrollbarVal:0,vScrollbarMax:0,vScrollbarVisible:!1,image:null}},setDialogAnnotationFontNamePropertiesPreview:function(){jQuery("#annotation_text_input"+this.uniqueID).css("font-family",jQuery("select[name='annotation_font_name_select"+a.uniqueID+"']").find("option:selected").val());this.setDialogAnnotationLineAlignmentPropertiesPreview()},setDialogAnnotationFontSizePropertiesPreview:function(){jQuery("#annotation_text_input"+
this.uniqueID).css("font-size",jQuery("#annotation_font_size_input"+this.uniqueID).val()+"px");this.setDialogAnnotationLineAlignmentPropertiesPreview()},setDialogAnnotationFontColorPropertiesPreview:function(){jQuery("#annotation_text_input"+this.uniqueID).css("color",jQuery(jQuery("#annotation_fore_color_input"+this.uniqueID)).minicolors("rgbaString"))},setDialogAnnotationFontStylePropertiesPreview:function(){jQuery("#annotation_text_input"+this.uniqueID).css("text-decoration","none");jQuery("#annotation_text_input"+
this.uniqueID).css("font-style","normal");jQuery("#annotation_text_input"+this.uniqueID).css("font-weight","normal");switch(parseInt(jQuery("select[name='annotation_font_style_select"+a.uniqueID+"']").find("option:selected").val())){case 0:jQuery("#annotation_text_input"+this.uniqueID).css("text-decoration","none");break;case 1:jQuery("#annotation_text_input"+this.uniqueID).css("font-weight","bold");break;case 2:jQuery("#annotation_text_input"+this.uniqueID).css("font-style","italic");break;case 4:jQuery("#annotation_text_input"+
this.uniqueID).css("text-decoration","underline");break;case 8:jQuery("#annotation_text_input"+this.uniqueID).css("text-decoration","line-through")}},setDialogAnnotationAlignmentPropertiesPreview:function(){var b;switch(parseInt(jQuery("[name='annotation_alignment_select"+a.uniqueID+"']:checked").val())){case 0:b="left";break;case 1:b="center";break;case 2:b="right";break;default:b="left"}jQuery("#annotation_text_input"+this.uniqueID).css("text-align",b)},setDialogAnnotationLineAlignmentPropertiesPreview:function(){var b=
jQuery("<div>");b.css("width",jQuery("#annotation_text_input"+this.uniqueID).width());b.css("font-size",jQuery("#annotation_text_input"+this.uniqueID).css("font-size"));b.css("font-family",jQuery("#annotation_text_input"+this.uniqueID).css("font-family"));b.css("font-weight",jQuery("#annotation_text_input"+this.uniqueID).css("font-weight"));b.css("text-decoration",jQuery("#annotation_text_input"+this.uniqueID).css("text-decoration"));b.css("text-align",jQuery("#annotation_text_input"+this.uniqueID).css("text-align"));
b.css("display","none");var c=jQuery("#annotation_text_input"+this.uniqueID).val();b.html((c+"").replace(/([^>\r\n]?)(\r\n|\n\r|\r|\n)/g,"$1<br />$2"));jQuery(a.dom.annotationDialogForm).append(b);switch(parseInt(jQuery("[name='annotation_line_alignment_select"+a.uniqueID+"']:checked").val())){case 0:c=0;break;case 1:c=Math.max(0,(jQuery("#annotation_text_input"+this.uniqueID).attr("data-original-height")-b.height())/2);break;case 2:c=Math.max(0,jQuery("#annotation_text_input"+this.uniqueID).attr("data-original-height")-
b.height()-1);break;default:c=0}jQuery("#annotation_text_input"+this.uniqueID).css("height",jQuery("#annotation_text_input"+this.uniqueID).attr("data-original-height")-c+"px");jQuery("#annotation_text_input"+this.uniqueID).css("padding-top",c+"px");b.remove()},inputControl:function(a,b,c,d){var g=a.val().split(""),e="",f="";if("int"==b)l=/^([0-9])$/,h=/^([0-9][0-9]*)$/;else if("float"==b)var l=/(^\d+$)|(^\d+\.\d+$)|[,\.]/,h=/^([0-9][0-9]*[,\.]?\d{0,3})$/;for(var k in g)1==l.test(g[k])&&""!=g[k]&&
(f+=""+g[k].replace(",","."),1==h.test(f)&&(e+=""+g[k].replace(",",".")));"undefined"!==typeof c&&null!==c&&e<c&&(e=c);"undefined"!==typeof d&&null!==d&&e>d&&(e=d);a.val(e)},inputPageRangeControl:function(a){var b=a.value.split(""),c=/^([0-9|;-])$/,d="",e;for(e in b)1==c.test(b[e])&&(d+=b[e]);a.value=d},ToggleSinglePageViewMode_Click:function(){this.ToggleSinglePageViewMode()},pageRangeSelection:function(b,c){switch(parseInt(b)){case 0:c.value="1-"+a.GetPageCount();c.disabled=!0;break;case 1:c.value=
a.GetCurrentPage();c.disabled=!0;break;case 2:c.disabled=!1}},SelectFirstPage_Click:function(){this.serverCtx.documentLoaded&&(this.dom.updateSelectedPageFader(0,1),this.EnsurePageVisibility(1),a.SelectPage(1))},SelectNextPage_Click:function(){if(this.serverCtx.documentLoaded){this.selectNextPageTimeout&&(clearTimeout(this.selectNextPageTimeout),this.selectNextPageTimeout=null);this.selectNextPageActions?this.selectNextPageActions++:this.selectNextPageActions=1;var b=Math.min(this.GetLastPageNoRequest()+
this.selectNextPageActions,this.serverCtx.pageCount);this.dom.updateSelectedPageFader(0,b);this.EnsurePageVisibility(b);this.selectNextPageTimeout=setTimeout(function(){a.GetLastPageNoRequest()+1<=a.serverCtx.pageCount&&a.SelectPageEx(b,!0,!1,!0,!0);a.selectNextPageActions=0},300)}},SelectPreviousPage_Click:function(){if(this.serverCtx.documentLoaded){this.selectPreviousPageTimeout&&(clearTimeout(this.selectPreviousPageTimeout),this.selectPreviousPageTimeout=null);this.selectPreviousPageActions?this.selectPreviousPageActions++:
this.selectPreviousPageActions=1;var b=Math.max(this.GetLastPageNoRequest()-this.selectPreviousPageActions,1);this.dom.updateSelectedPageFader(0,b);this.EnsurePageVisibility(b);this.selectPreviousPageTimeout=setTimeout(function(){1<a.GetLastPageNoRequest()&&a.SelectPageEx(b,!0,!1,!0,!0);a.selectPreviousPageActions=0},300)}},SelectLastPage_Click:function(){this.serverCtx.documentLoaded&&(this.dom.updateSelectedPageFader(0,a.serverCtx.pageCount),this.EnsurePageVisibility(a.serverCtx.pageCount),a.SelectPage(a.serverCtx.pageCount))},
ToggleMobileToolbar_Click:function(){a.dom.mobileToolbarContainer&&jQuery(a.dom.mobileToolbarContainer).slideToggle("fast")},ZoomMode_Click:function(){a.dom.subMenuZoomMode&&(a.dom.subMenuMouseMode&&jQuery(a.dom.subMenuMouseMode).hide(),jQuery(a.dom.subMenuZoomMode).show().position({my:"left top",at:"left bottom",of:jQuery("#zoomModeButton"+a.uniqueID)}),jQuery(document).on("click",function(){jQuery(a.dom.subMenuZoomMode).hide()}));a.dom.mobileToolbarContainer&&a.dom.subMenuZoomModeMobile&&(jQuery(a.dom.mobileToolbarContainer).find("#zoomModeButtonMobile"+
a.uniqueID).addClass("button_active"),jQuery(a.dom.mobileToolbarContainer).find("#mouseModeButtonMobile"+a.uniqueID).removeClass("button_active"),"-60px"===jQuery(a.dom.mobileToolbarContainer).css("margin-right")?(jQuery(a.dom.subMenuZoomModeMobile).show(),jQuery(a.dom.subMenuMouseModeMobile).hide(),jQuery(a.dom.mobileToolbarContainer).css("margin-right","")):"none"!==jQuery(a.dom.subMenuZoomModeMobile).css("display")?(jQuery(a.dom.mobileToolbarContainer).css("margin-right","-60px"),jQuery(a.dom.subMenuZoomModeMobile).hide(),
jQuery(a.dom.subMenuMouseModeMobile).hide(),jQuery(a.dom.mobileToolbarContainer).find("#zoomModeButtonMobile"+a.uniqueID).removeClass("button_active"),jQuery(a.dom.mobileToolbarContainer).find("#mouseModeButtonMobile"+a.uniqueID).removeClass("button_active")):(jQuery(a.dom.subMenuZoomModeMobile).show(),jQuery(a.dom.subMenuMouseModeMobile).hide()),a.dom.updateButtons())},MouseMode_Click:function(){a.dom.subMenuMouseMode&&(a.dom.subMenuZoomMode&&jQuery(a.dom.subMenuZoomMode).hide(),jQuery(a.dom.subMenuMouseMode).show().position({my:"left top",
at:"left bottom",of:jQuery("#mouseModeButton"+a.uniqueID)}),jQuery(document).on("click",function(){jQuery(a.dom.subMenuMouseMode).hide()}));a.dom.mobileToolbarContainer&&a.dom.subMenuMouseModeMobile&&(jQuery(a.dom.mobileToolbarContainer).find("#mouseModeButtonMobile"+a.uniqueID).addClass("button_active"),jQuery(a.dom.mobileToolbarContainer).find("#zoomModeButtonMobile"+a.uniqueID).removeClass("button_active"),"-60px"===jQuery(a.dom.mobileToolbarContainer).css("margin-right")?(jQuery(a.dom.subMenuMouseModeMobile).show(),
jQuery(a.dom.subMenuZoomModeMobile).hide(),jQuery(a.dom.mobileToolbarContainer).css("margin-right","")):"none"!==jQuery(a.dom.subMenuMouseModeMobile).css("display")?(jQuery(a.dom.mobileToolbarContainer).css("margin-right","-60px"),jQuery(a.dom.subMenuZoomModeMobile).hide(),jQuery(a.dom.subMenuMouseModeMobile).hide(),jQuery(a.dom.mobileToolbarContainer).find("#zoomModeButtonMobile"+a.uniqueID).removeClass("button_active"),jQuery(a.dom.mobileToolbarContainer).find("#mouseModeButtonMobile"+a.uniqueID).removeClass("button_active")):
(jQuery(a.dom.subMenuMouseModeMobile).show(),jQuery(a.dom.subMenuZoomModeMobile).hide()),a.dom.updateButtons())},ZoomIN_Click:function(b){this.zoomInTimeout&&(clearTimeout(this.zoomInTimeout),this.zoomInTimeout=null);this.zoomInActions?this.zoomInActions++:this.zoomInActions=1;this.zoomInTimeout=setTimeout(function(){a.ZoomIN(a.zoomInActions);a.zoomInActions=0},300)},ZoomOUT_Click:function(b){this.zoomOutTimeout&&(clearTimeout(this.zoomOutTimeout),this.zoomOutTimeout=null);this.zoomOutActions?this.zoomOutActions++:
this.zoomOutActions=1;this.zoomOutTimeout=setTimeout(function(){a.ZoomOUT(a.zoomOutActions);a.zoomOutActions=0},300)},Rotate90_Click:function(){this.rotate90Timeout&&(clearTimeout(this.rotate90Timeout),this.rotate90Timeout=null);this.rotate90Actions?this.rotate90Actions++:this.rotate90Actions=1;this.rotate90Timeout=setTimeout(function(){var b=a.rotate90Actions%4;0!=b%4&&a.Rotate(b%4,-1);a.rotate90Actions=0},300)},Rotate270_Click:function(){this.rotate270Timeout&&(clearTimeout(this.rotate270Timeout),
this.rotate270Timeout=null);this.rotate270Actions?this.rotate270Actions++:this.rotate270Actions=1;this.rotate270Timeout=setTimeout(function(){var b=a.rotate270Actions%4;0!=b%4&&a.Rotate(4-b%4,-1);a.rotate270Actions=0},300)},Print_Click:function(){this.TogglePrintDialog(null,null)},LoadFromFile_Click:function(){this.LoadFromFile(null,null)},LoadFromUriDialog_Click:function(){this.ToggleLoadFromUriDialog()},SaveDialog_Click:function(){this.ToggleSaveDialog(null,null)},TwainAcquisitionDialog_Click:function(){this.TwainToggleAcquisitionDialog(null,
null)},CopyDialog_Click:function(){this.CopySelectedTextToClipboard()},LoadFromUri_Click:function(){this.LoadFromUri(jQuery(this.dom.addressBar).val(),"",null,null)},ExitDrawingMode_Click:function(){this.ExitAnnotationDrawingMode()},AnnotationActionEditButton_Click:function(){this.Internal.Annotations.editSelectedAnnotation()},AnnotationActionRemoveButton_Click:function(){this.Internal.Annotations.removeSelectedAnnotation()},AnnotationActionCommentButton_Click:function(){this.ToggleCommentDialog("comment")},
CommentAnswer_Click:function(a){this.ToggleCommentDialog("answer",a)},CommentProperties_Click:function(a){this.ToggleCommentDialog("edit",a)},ZoomWidth_Click:function(){this.SetZoomMode(3)},ZoomFit_Click:function(){this.SetZoomMode(2)},Fullscreen_Click:function(){this.ToggleFullscreen()},PanMouseMode_Click:function(){this.SetMouseMode(0)},SelectMouseMode_Click:function(){this.SetMouseMode(3)},MarqueeZoomMouseMode_Click:function(){this.SetMouseMode(4)},AddRubberStampAnnot_Click:function(){this.AddAnnotInteractive(0)},
AddRectangleAnnot_Click:function(){this.AddAnnotInteractive(1)},AddRectangleHighlighterAnnot_Click:function(){this.AddAnnotInteractive(2)},AddLineAnnot_Click:function(){this.AddAnnotInteractive(3)},AddConnectedLineAnnot_Click:function(){this.AddAnnotInteractive(5)},AddLineArrowAnnot_Click:function(){this.AddAnnotInteractive(4)},AddEllipseAnnot_Click:function(){this.AddAnnotInteractive(6)},AddTextAnnot_Click:function(){this.AddAnnotInteractive(8)},AddStickyNoteAnnot_Click:function(){this.AddAnnotInteractive(9)},
AddFreeHandAnnot_Click:function(){this.AddAnnotInteractive(10)},AddFreeHandHighlighterAnnot_Click:function(){this.AddAnnotInteractive(11)},AddLinkAnnot_Click:function(){this.AddAnnotInteractive(13)},AddRulerAnnot_Click:function(){this.AddAnnotInteractive(15)},AddPolyRulerAnnot_Click:function(){this.AddAnnotInteractive(16)},ClosePanelButton_Click:function(){this.SetSnapinsPanelVisibility(!1)},SearchSubmit_Click:function(){var a=this.dom.searchValueInput.value,b=this.dom.searchWholeWordInput.checked,
c=this.dom.searchCaseSensitiveInput.checked,d=this.dom.searchAnyWordInput.checked,e=jQuery(this.dom.searchPageSelect).filter(":checked").val();this.SubmitSearch(a,b,c,d,e)},TwainAcquisitionSubmit_Click:function(){if(a.callbacks.onTwainAcquisitionDialogAcquireButtonClick)a.callbacks.onTwainAcquisitionDialogAcquireButtonClick();var b=jQuery(this.dom.twainAcquisitionSourceNameSelect).find("option:selected").val();0==jQuery(a.dom.twainAcquisitionPanelForm).find("input[name='twainAcquisitionDestinationInput"+
a.uniqueID+"']:checked").val()?this.TwainAcquireToNewDocument(b):this.TwainAcquireToCurrentDocument(b,jQuery(a.dom.twainAcquisitionPanelForm).find("select[name='twainAcquisitionDestinationAppendSelect"+a.uniqueID+"']").find("option:selected").val())},DownloadTwainServiceSetup_Click:function(){this.DownloadTwainServiceSetup();jQuery(a.dom.twainAcquisitionDialog).dvDialog("close")},SearchClearResult_Click:function(){this.ClearSearch()},CommentHeader_Click:function(b){a.Internal.Annotations.selectAnnotationCommentById(b,
!0);if(null!=a.cache.AnnotsComments)for(var c=0;c<a.cache.AnnotsComments.length;c++){var d=a.cache.AnnotsComments[c];if(d.annotApp.id===b){a.SelectPage(d.annotApp.pageNo,function(){var b=a.Internal.Annotations.getAnnotationCommentOwnerAnnotApp(d.annotApp,!0);null!=b&&b.visible&&a.Internal.Annotations.selectById(b.id)});break}}},CommentsSearchClearResult_Click:function(){this.CommentsClearSearch()},CommentsSearchSubmit_Click:function(){this.SubmitCommentsSearch(this.dom.commentsSearchValueInput.value)},
CommentsExpandCollapseAll_Click:function(){this.CommentsExpandCollapseAll()},CommentsSortBySelect_Change:function(){this.refreshCommentsPanel()},SnapInButton_Click:function(a){this.SelectSnapIn(a)},IsTwainSupportAvailable:function(){return this.isWindows&&5.1<this.windowsVersion},ToggleSinglePageViewMode:function(){return this.ajax.PostBaseRequest({url:a.appControllerPath+"/singlepageviewmode"+(a.useIdInRoot?"/1":""),data:{enabled:this.serverCtx.singlePageView},success:function(b){a.ajax.HandleServerContextResponse("string"===
typeof b?eval("("+b+")"):b,!1)}},!0)},RegisterOnAnnotationSelectedStateChanged:function(a){this.callbacks.onAnnotationSelectedStateChanged=a;return DocuViewareAPI.Status.OK},RegisterOnAnnotationAdded:function(a){this.callbacks.onAnnotationAdded=a;return DocuViewareAPI.Status.OK},RegisterOnAnnotationEdited:function(a){this.callbacks.onAnnotationEdited=a;return DocuViewareAPI.Status.OK},RegisterOnAnnotationDeleted:function(a){this.callbacks.onAnnotationDeleted=a;return DocuViewareAPI.Status.OK},RegisterOnCommentAdded:function(a){this.callbacks.onCommentAdded=
a;return DocuViewareAPI.Status.OK},RegisterOnCommentEdited:function(a){this.callbacks.onCommentEdited=a;return DocuViewareAPI.Status.OK},RegisterOnCommentDeleted:function(a){this.callbacks.onCommentDeleted=a;return DocuViewareAPI.Status.OK},RegisterOnFormFieldChanged:function(a){this.callbacks.onFormFieldChanged=a;return DocuViewareAPI.Status.OK},RegisterOnPageChanged:function(a){this.callbacks.onPageChanged=a;return DocuViewareAPI.Status.OK},RegisterOnZoomChanged:function(a){this.callbacks.onZoomChanged=
a;return DocuViewareAPI.Status.OK},RegisterOnNewDocumentLoaded:function(a){this.callbacks.onNewDocumentLoaded=a;return DocuViewareAPI.Status.OK},RegisterOnDocumentClosed:function(a){this.callbacks.onDocumentClosed=a;return DocuViewareAPI.Status.OK},RegisterOnDocumentPrinted:function(a){this.callbacks.onDocumentPrinted=a;return DocuViewareAPI.Status.OK},RegisterOnDocumentSaved:function(a){this.callbacks.onDocumentSaved=a;return DocuViewareAPI.Status.OK},RegisterOnTwainAcquisitionDialogAcquireButtonClick:function(a){this.callbacks.onTwainAcquisitionDialogAcquireButtonClick=
a;return DocuViewareAPI.Status.OK},RegisterOnTwainAcquisitionDialogCancelButtonClick:function(a){this.callbacks.onTwainAcquisitionDialogCancelButtonClick=a;return DocuViewareAPI.Status.OK},RegisterOnThumbnailsOrderChanged:function(a){this.callbacks.onThumbnailsOrderChanged=a;return DocuViewareAPI.Status.OK},RegisterOnTextSelected:function(a){this.callbacks.onTextSelected=a;return DocuViewareAPI.Status.OK},RegisterOnAreaSelected:function(a){this.callbacks.onAreaSelected=a;return DocuViewareAPI.Status.OK},
PostCustomServerAction:function(a,b,c,d,e){return this.ajax.PostCustomServerAction(a,b,c,d,e)},LoadFromFile:function(a,b){if(this.hasPendingAction())return DocuViewareAPI.Status.GenericError;this.SetLoadFromUriDialogVisibility(!1);this.callbacks.onFileOpenError=b;this.callbacks.onFileOpenSuccess=a;jQuery(this.dom.openfile).click();return DocuViewareAPI.Status.OK},GetDocumentType:function(){return this.serverCtx?this.serverCtx.documentType:0},GetDocumentFormat:function(){return this.serverCtx?this.serverCtx.documentFormat:
0},GetDocumentName:function(){return this.serverCtx?this.serverCtx.fileName:""},GetPageCount:function(){return this.serverCtx?this.serverCtx.pageCount:0},GetCurrentPage:function(){return this.serverCtx?this.serverCtx.selectedPage:0},GetLastPageNoRequest:function(){return this.ajax.latestSelectedPage},GetDisplayedArea:function(){if(this.serverCtx){var b=a.dom.viewerArea.getBoundingClientRect(),c=this.GetCurrentPage(),d=a.Internal.Pages.getPageWidth(c),e=a.Internal.Pages.getPageHeight(c),f=this.Internal.Coordinates.clientToDocument(c,
b.left,b.top,1),h=this.Internal.Coordinates.clientToDocument(c,b.left+b.width,b.top,1),k=this.Internal.Coordinates.clientToDocument(c,b.left+b.width,b.top+b.height,1),b=this.Internal.Coordinates.clientToDocument(c,b.left,b.top+b.height,1),c=Math.max(Math.min(f.x,Math.min(h.x,Math.min(k.x,b.x))),0),m=Math.max(Math.min(f.y,Math.min(h.y,Math.min(k.y,b.y))),0);return{left:c,top:m,width:Math.min(Math.max(f.x,Math.max(h.x,Math.max(k.x,b.x))),d)-c,height:Math.min(Math.max(f.y,Math.max(h.y,Math.max(k.y,b.y))),
e)-m}}return{left:0,top:0,width:0,height:0}},GetSelectionAreaCoordinates:function(){return this.serverCtx?this.Internal.Selection.getSelectionAreaCoordinates():{left:0,top:0,width:0,height:0}},SetSelectionAreaCoordinates:function(a){return this.serverCtx?this.Internal.Selection.setSelectionAreaCoordinates(a):DocuViewareAPI.Status.GenericError},GetViewerScrollLeft:function(){return this.Internal.Coordinates.getViewerScrollLeft()},GetViewerScrollTop:function(){return this.Internal.Coordinates.getViewerScrollTop()},
SetViewerScrollLeft:function(a){return this.Internal.Coordinates.setViewerScrollLeft(a)},SetViewerScrollTop:function(a){return this.Internal.Coordinates.setViewerScrollTop(a)},ClearSelectionArea:function(){return this.serverCtx?(this.Internal.Selection.clearSelectionArea(),DocuViewareAPI.Status.OK):DocuViewareAPI.Status.GenericError},GetSelectedThumbnailItems:function(){return this.serverCtx?this.Internal.Thumbnails.getSelectedThumbnails(!0):null},SetThumbnailSelected:function(a,b){return this.serverCtx?
this.Internal.Thumbnails.setThumbnailSelected(a,b):DocuViewareAPI.Status.GenericError},GetCurrentZoom:function(){return this.serverCtx?this.serverCtx.zoom:0},SetCurrentZoom:function(b){return a.ajax.PostBaseRequest({url:a.appControllerPath+"/zoomset"+(a.useIdInRoot?"/1":""),data:{zoom:b},success:function(b){a.ajax.HandleServerContextResponse("string"===typeof b?eval("("+b+")"):b,!1)}},!1)},GetCurrentViewRotation:function(){return this.serverCtx?this.serverCtx.viewRotation:0},GetCurrentPageRotation:function(){return this.serverCtx?
this.serverCtx.pageRotation:0},GetCurrentPageRenderRotation:function(){return this.serverCtx?this.serverCtx.renderRotation:0},ToggleLoadFromUriDialog:function(){if(this.hasPendingAction())return DocuViewareAPI.Status.GenericError;this.SetLoadFromUriDialogVisibility(!this.dom.isLoadFromUriDialogVisible);return DocuViewareAPI.Status.OK},ToggleSaveDialog:function(b,c){if(this.hasPendingAction(!0))return DocuViewareAPI.Status.GenericError;a.DisplayDialogForm(jQuery(a.dom.saveDialog),a.Localize("_title_save_dialog"),
null,function(){jQuery("[name='savePageRangeInput"+a.uniqueID+"']").val("");var b=a.GetSelectedThumbnailItems();1==b.length&&b[0]===a.GetCurrentPage()?jQuery("[name='inputSelectedPages"+a.uniqueID+"'][value=1]:radio").prop("checked",!0).trigger("change"):0<b.length?(jQuery("[name='inputSelectedPages"+a.uniqueID+"'][value=2]:radio").prop("checked",!0).trigger("change"),jQuery("[name='savePageRangeInput"+a.uniqueID+"']").val(b.join())):jQuery("[name='inputSelectedPages"+a.uniqueID+"'][value=0]:radio").prop("checked",
!0).trigger("change");jQuery(a.dom.saveDialog).find("input[name='saving_filename_input"+a.uniqueID+"']").val(a.serverCtx.fileName)},null,[{text:a.Localize("_label_cancel"),click:function(){jQuery(a.dom.saveDialog).dvDialog("close")}},{text:a.Localize("_label_save"),"class":"btn-valid",click:function(){var d=jQuery(a.dom.saveDialog).find("input[name='saving_filename_input"+a.uniqueID+"']").val(),e=jQuery(a.dom.saveDialog).find("select[name='save_extention_select"+a.uniqueID+"']").find("option:selected").val(),
g=jQuery(a.dom.saveDialog).find("input[name='savePageRangeInput"+a.uniqueID+"']").val();a.Save(d,e,g,b,c)==DocuViewareAPI.Status.OK&&jQuery(a.dom.saveDialog).dvDialog("close")}}]);this.dom.updateButtons();return DocuViewareAPI.Status.OK},TwainToggleAcquisitionDialog:function(b,c){if(this.hasPendingAction())return DocuViewareAPI.Status.GenericError;a.DisplayDialogForm(jQuery(a.dom.twainAcquisitionDialog),a.Localize("button__twain_acquisition"),null,function(){a.Internal.Twain.updateTwainAcquisitionDialogMessageBox();
jQuery(a.dom.twainAcquisitionDialog).find("#twainAcquisitionMessageBox"+a.uniqueID).css("opacity",.3).hide();jQuery(a.dom.twainAcquisitionDialogPanel).find("*").prop("disabled",!0);jQuery("#twainAcquisitionDialogAcquireButton"+a.uniqueID).prop("disabled",!0).removeClass("dvUi-state-default").addClass("dvUi-state-disabled");var b=function(b){a.Internal.Twain.updateTwainAcquisitionDialogMessageBox(b.twainStatus,b.message);jQuery(a.dom.twainAcquisitionDialog).find("#twainAcquisitionMessageBox"+a.uniqueID).css("opacity",
1).show();jQuery(a.dom.twainAcquisitionDialogPanel).find("*").prop("disabled",!0);jQuery("#twainAcquisitionDialogAcquireButton"+a.uniqueID).prop("disabled",!0).removeClass("dvUi-state-default").addClass("dvUi-state-disabled")};a.GetTwainAcquisitionServiceInfo(function(c){parseInt(c.ServiceVersionResult)>=a.twainServiceSupportedVersion?a.GetTwainAcquisitionSources(function(b){if(b.GetTwainSourcesResult&&b.GetTwainSourcesResult.sources.length){jQuery(a.dom.twainAcquisitionDialogPanel).find("*").prop("disabled",
!1);jQuery(a.dom.twainAcquisitionDialogPanel).find("*").removeClass("dvUi-state-disabled").removeClass("dvUi-dvSelectmenu-disabled").css("opacity",1);jQuery(a.dom.twainAcquisitionDialog).find("#twainAcquisitionSourceSelect"+a.uniqueID).find("option").remove().end();if(b.GetTwainSourcesResult.sources&&0<b.GetTwainSourcesResult.sources.length){for(var c=0;c<b.GetTwainSourcesResult.sources.length;c++){var d=jQuery("<option>");d.attr("value",b.GetTwainSourcesResult.sources[c].sourceName);d.html(b.GetTwainSourcesResult.sources[c].sourceName);
(!b.GetTwainSourcesResult.defaultSource&&1==c||b.GetTwainSourcesResult.defaultSource&&b.GetTwainSourcesResult.defaultSource==b.GetTwainSourcesResult.sources[c].sourceName)&&d.prop("selected",!0);jQuery(a.dom.twainAcquisitionDialog).find("#twainAcquisitionSourceSelect"+a.uniqueID).append(d)}jQuery(a.dom.twainAcquisitionDialog).find("#twainAcquisitionSourceSelect"+a.uniqueID).dvSelectmenu&&jQuery(a.dom.twainAcquisitionDialog).find("#twainAcquisitionSourceSelect"+a.uniqueID).dvSelectmenu("destroy");
jQuery(a.dom.twainAcquisitionDialog).find("#twainAcquisitionSourceSelect"+a.uniqueID).dvSelectmenu()}a.serverCtx.enablePageAppending?jQuery("[name='inputTwainAcquisitionDestination"+a.uniqueID+"'][value=1]:radio").prop("checked",!0).trigger("change"):(jQuery("[name='inputTwainAcquisitionDestination"+a.uniqueID+"'][value=0]:radio").prop("checked",!0).trigger("change"),jQuery("#twainAcquisitionDestinationAppendDocBox"+a.uniqueID).find("*").prop("disabled",!0).removeClass("dvUi-state-default").addClass("dvUi-state-disabled").css("opacity",
.3));jQuery(a.dom.twainAcquisitionDialog).find("#twainAcquisitionMessageBox"+a.uniqueID).css("opacity",1).hide();jQuery("#twainAcquisitionDialogAcquireButton"+a.uniqueID).prop("disabled",!1).addClass("dvUi-state-default").removeClass("dvUi-state-disabled")}else a.Internal.Twain.updateTwainAcquisitionDialogMessageBox(a.Internal.Twain.Status.WARNING,a.Localize("_twain_connector_no_sources")),jQuery(a.dom.twainAcquisitionDialog).find("#twainAcquisitionMessageBox"+a.uniqueID).css("opacity",1).show(),
jQuery("#twainAcquisitionDialogAcquireButton"+a.uniqueID).prop("disabled",!0).removeClass("dvUi-state-default").addClass("dvUi-state-disabled")},b):(c=a.Localize("_twain_connector_bad_version"),a.Internal.Twain.updateTwainAcquisitionDialogMessageBox(a.Internal.Twain.Status.BAD_VERSION,c),jQuery(a.dom.twainAcquisitionDialogPanel).find("*").prop("disabled",!0),jQuery(a.dom.twainAcquisitionDialog).find("#twainAcquisitionMessageBox"+a.uniqueID).css("opacity",1).show(),jQuery("#twainAcquisitionDialogAcquireButton"+
a.uniqueID).prop("disabled",!0).removeClass("dvUi-state-default").addClass("dvUi-state-disabled"))},b)!=DocuViewareAPI.Status.OK&&jQuery(a.dom.twainAcquisitionDialog).dvDialog("close")},null,[{text:a.Localize("_label_cancel"),click:function(){if(a.callbacks.onTwainAcquisitionDialogCancelButtonClick)a.callbacks.onTwainAcquisitionDialogCancelButtonClick();jQuery(a.dom.twainAcquisitionDialog).dvDialog("close")}},{id:"twainAcquisitionDialogAcquireButton"+a.uniqueID,text:a.Localize("button__twain_acquire"),
"class":"btn-valid",click:function(){var b=jQuery(a.dom.twainAcquisitionDialog).find("select[name='twainAcquisitionSourceSelect"+a.uniqueID+"']").find("option:selected").val();0==jQuery(a.dom.twainAcquisitionDialog).find("input[name='inputTwainAcquisitionDestination"+a.uniqueID+"']:checked").val()?a.TwainAcquireToNewDocument(b)==DocuViewareAPI.Status.OK&&jQuery(a.dom.twainAcquisitionDialog).dvDialog("close"):a.TwainAcquireToCurrentDocument(b,jQuery(a.dom.twainAcquisitionDialog).find("select[name='twainAcquisitionDestinationAppendSelect"+
a.uniqueID+"']").find("option:selected").val())==DocuViewareAPI.Status.OK&&jQuery(a.dom.twainAcquisitionDialog).dvDialog("close")}}]);this.dom.updateButtons();return DocuViewareAPI.Status.OK},TwainAcquireToNewDocument:function(b){return a.Internal.Twain.acquire(b,function(b){a.Internal.Files.uploadFile(DocuViewareEncodingUtilities.File.New(b.fileData,"image/tiff",b.fileName),0)})},TwainAcquireToCurrentDocument:function(b,c){return!c||0>c||2<c||!a.serverCtx.enablePageAppending?DocuViewareAPI.Status.GenericError:
a.Internal.Twain.acquire(b,function(b){a.Internal.Files.uploadFile(DocuViewareEncodingUtilities.File.New(b.fileData,"image/tiff",b.fileName),parseInt(c)+1)})},TwainSetConfig:function(b,c,d,e,f,h,k){"boolean"===typeof b&&(a.twainSourceConfig.enableCustomConfiguration=b);"boolean"===typeof c&&(a.twainSourceConfig.selectFeeder=c);Number.isInteger(d)&&(a.twainSourceConfig.resolution=d);Number.isInteger(e)&&(a.twainSourceConfig.bitDepth=e);"boolean"===typeof f&&(a.twainSourceConfig.enableDuplex=f);"boolean"===
typeof h&&(a.twainSourceConfig.hideUI=h);if(k)if(Array.isArray(k)){b=[];for(c=0;c<k.length;c++)k[c].hasOwnProperty("capability")&&k[c].hasOwnProperty("value")&&Number.isInteger(k[c].capability)&&"string"===typeof k[c].value&&b.push(k[c]);a.twainSourceConfig.extConfig=0!==b.length?b:null}else a.twainSourceConfig.extConfig=null;else a.twainSourceConfig.extConfig=null;return DocuViewareAPI.Status.OK},ToggleCommentDialog:function(b,c){if(this.hasPendingAction(!0))return DocuViewareAPI.Status.GenericError;
"comment"===b?a.DisplayDialogForm(jQuery(a.dom.commentDialog),a.Localize("_title_comment_dialog"),null,function(){var b;b=null!=a.Internal.Annotations.defaultAuthor?a.Internal.Annotations.defaultAuthor:a.Localize("label_comment_anonymous");jQuery(a.dom.commentsAuthorInput).val(b);jQuery("#commentAnswerBox"+a.uniqueID).hide();jQuery("#commentContentBox"+a.uniqueID).show();jQuery("#commentStatusBox"+a.uniqueID).hide();jQuery("#commentMessageInput"+a.uniqueID).val("").focus()},null,[{id:"commentDialogCancelButton"+
a.uniqueID,text:a.Localize("_label_cancel"),click:function(){jQuery(a.dom.commentDialog).dvDialog("close")}},{id:"commentDialogPublishButton"+a.uniqueID,text:a.Localize("_label_publish"),"class":"btn-valid",click:function(){var b=jQuery(a.dom.commentsAuthorInput).val(),c=a.Internal.Annotations.defaultProperties[2048];c.previousGuid=a.dom.selectedAnnotation.annotApp.id;c.text=jQuery("#commentMessageInput"+a.uniqueID).val();a.ajax.PostBaseRequest({url:a.appControllerPath+"/newannotationcomment"+(a.useIdInRoot?
"/1":""),data:{extProperties:{author:b},properties:c,ownerAnnotType:a.dom.selectedAnnotation.annotApp.properties.type,pageNo:a.dom.selectedAnnotation.annotApp.pageNo},success:function(b){if((b="string"===typeof b?eval("("+b+")"):b)&&null!=b.annotApp&&b.annotApp.status===DocuViewareAPI.Status.OK){if(a.Internal.Annotations.addAnnotationComment(b),a.refreshCommentsPanel(),a.SelectSnapIn("comments"),a.Internal.Annotations.selectAnnotationCommentById(b.annotApp.id,!0),a.callbacks.onCommentAdded)a.callbacks.onCommentAdded({id:b.annotApp.id,
pageNo:b.annotApp.pageNo})}else a.ajax.HandleError(b)}},!1);jQuery(a.dom.commentDialog).dvDialog("close")}}]):"edit"===b?a.DisplayDialogForm(jQuery(a.dom.commentDialog),a.Localize("_title_comment_dialog_edit"),null,function(){jQuery("#commentAnswerBox"+a.uniqueID).hide();jQuery("#commentContentBox"+a.uniqueID).show();jQuery("#commentStatusBox"+a.uniqueID).show();for(var b=0;b<a.cache.AnnotsComments.length;b++){var d=a.cache.AnnotsComments[b];if(d.annotApp.id===c){jQuery("#commentMessageInput"+a.uniqueID).val(d.annotApp.properties.text);
jQuery(a.dom.commentDialog).find("select[name='commentStatusSelect"+a.uniqueID+"']").find("option[value='"+d.annotApp.properties.reviewStatus+"']").prop("selected",!0);jQuery(a.dom.commentsAuthorInput).val(d.annotApp.author);d.annotApp.properties.allowReview?jQuery("#commentStatusSelect"+a.uniqueID).attr("disabled",!1):jQuery("#commentStatusSelect"+a.uniqueID).attr("disabled",!0);d.annotApp.canDelete?jQuery(":button:contains('"+a.Localize("_label_delete")+"')").prop("disabled",!1).removeClass("ui-state-disabled"):
jQuery(":button:contains('"+a.Localize("_label_delete")+"')").prop("disabled",!0).addClass("ui-state-disabled");break}}jQuery("#commentMessageInput"+a.uniqueID).focus()},null,[{id:"commentDialogCancelButton"+a.uniqueID,text:a.Localize("_label_cancel"),click:function(){jQuery(a.dom.commentDialog).dvDialog("close")}},{id:"commentDialogDeleteButton"+a.uniqueID,text:a.Localize("_label_delete"),click:function(){a.DisplayDialogForm(jQuery(a.dom.annotationActionRemoveConfirm),a.Localize("_title_confirm_comment_removal"),
null,function(){jQuery(a.dom.commentDialogModalOverlay).show();jQuery("#annotationRemoveConfirmMessage"+a.uniqueID).html(a.Localize("_message_confirm_comment_removal"))},function(){jQuery(a.dom.commentDialogModalOverlay).hide()},[{text:a.Localize("_label_no"),click:function(){jQuery(a.dom.commentDialogModalOverlay).hide();jQuery(a.dom.annotationActionRemoveConfirm).dvDialog("close");jQuery(a.dom.modalOverlayArea).show()}},{text:a.Localize("_label_yes"),"class":"btn-valid",click:function(){if(null!=
a.cache.AnnotsComments)for(var b=a.GetCurrentPage(),d=0;d<a.cache.AnnotsComments.length;d++)if(a.cache.AnnotsComments[d].annotApp.pageNo===b&&a.cache.AnnotsComments[d].annotApp.id===c){a.ajax.PostAjaxRequestForDocuViewareAction({url:a.appControllerPath+"/annotupdate"+(a.useIdInRoot?"/1":""),async:!0,data:JSON.stringify({annot:{properties:a.cache.AnnotsComments[d].annotApp.properties,"delete":!0,pageNo:a.cache.AnnotsComments[d].annotApp.pageNo,id:a.cache.AnnotsComments[d].annotApp.id},sessionID:a.ajax.sessionID,
contextID:a.ajax.contextID}),success:function(b){if((b="string"===typeof b?eval("("+b+")"):b)&&b.status===DocuViewareAPI.Status.OK){if(null!=b.deletedAnnotsCommentId)for(var d=0;d<b.deletedAnnotsCommentId.length;d++)a.Internal.Annotations.deleteAnnotationComment(b.deletedAnnotsCommentId[d],!1);a.Internal.Annotations.deleteAnnotationComment(c,!0);if(a.callbacks.onCommentDeleted)a.callbacks.onCommentDeleted({id:b.id,pageNo:b.pageNo})}else a.ajax.HandleError(b)},error:function(b){a.ajax.HandleError(b)}});
break}jQuery(a.dom.commentDialogModalOverlay).hide();jQuery(a.dom.annotationActionRemoveConfirm).dvDialog("close");jQuery(a.dom.commentDialog).dvDialog("close")}}])}},{id:"commentDialogPublishButton"+a.uniqueID,text:a.Localize("_label_save"),"class":"btn-valid",click:function(){var b=jQuery("#commentMessageInput"+a.uniqueID).val(),d=jQuery(a.dom.commentDialog).find("select[name='commentStatusSelect"+a.uniqueID+"']").find("option:selected").val(),e=jQuery(a.dom.commentsAuthorInput).val();if(null!=
a.cache.AnnotsComments){for(var g=a.GetCurrentPage(),f=null,h=0;h<a.cache.AnnotsComments.length;h++)if(a.cache.AnnotsComments[h].annotApp.pageNo===g&&a.cache.AnnotsComments[h].annotApp.id===c){f=a.cache.AnnotsComments[h].annotApp.properties;f.text=b;f.reviewStatus=parseInt(d);break}a.ajax.PostAjaxRequestForDocuViewareAction({url:a.appControllerPath+"/annotupdate"+(a.useIdInRoot?"/1":""),async:!0,data:JSON.stringify({annot:{extProperties:{author:e},properties:f,pageNo:g,id:c},sessionID:a.ajax.sessionID,
contextID:a.ajax.contextID}),success:function(b){if((b="string"===typeof b?eval("("+b+")"):b)&&null!=b.annotApp&&b.annotApp.status===DocuViewareAPI.Status.OK){for(var d=0;d<a.cache.AnnotsComments.length;d++)if(a.cache.AnnotsComments[d].annotApp.pageNo===g&&a.cache.AnnotsComments[d].annotApp.id===c){a.cache.AnnotsComments[d].annotApp=b.annotApp;break}a.refreshCommentsPanel();a.Internal.Annotations.selectAnnotationCommentById(b.annotApp.id,!0);if(a.callbacks.onCommentEdited)a.callbacks.onCommentEdited({id:b.annotApp.id,
pageNo:b.annotApp.pageNo})}else a.ajax.HandleError(b)},error:function(b){a.ajax.HandleError(b)}})}jQuery(a.dom.commentDialog).dvDialog("close")}}]):"answer"===b&&a.DisplayDialogForm(jQuery(a.dom.commentDialog),a.Localize("_title_comment_dialog_answer"),null,function(){var b;b=null!=a.Internal.Annotations.defaultAuthor?a.Internal.Annotations.defaultAuthor:a.Localize("label_comment_anonymous");jQuery(a.dom.commentsAuthorInput).val(b);jQuery("#commentContentBox"+a.uniqueID).hide();jQuery("#commentAnswerBox"+
a.uniqueID).show();jQuery("#commentStatusBox"+a.uniqueID).hide();jQuery("#commentAnswerInput"+a.uniqueID).val("").focus()},null,[{id:"commentDialogCancelButton"+a.uniqueID,text:a.Localize("_label_cancel"),click:function(){jQuery(a.dom.commentDialog).dvDialog("close")}},{id:"commentDialogPublishButton"+a.uniqueID,text:a.Localize("_label_publish"),"class":"btn-valid",click:function(){for(var b=1,d=-1,e=0;e<a.cache.AnnotsComments.length;e++)a.cache.AnnotsComments[e].annotApp.id===c&&(b=a.cache.AnnotsComments[e].annotApp.pageNo,
d=a.cache.AnnotsComments[e].ownerAnnotType);var e=jQuery(a.dom.commentsAuthorInput).val(),g=a.Internal.Annotations.defaultProperties[2048];g.text=jQuery("#commentAnswerInput"+a.uniqueID).val();g.pageNo=b;g.previousGuid=c;a.ajax.PostBaseRequest({url:a.appControllerPath+"/newannotationcomment"+(a.useIdInRoot?"/1":""),data:{extProperties:{author:e},properties:g,ownerAnnotType:d,pageNo:b},success:function(b){if((b="string"===typeof b?eval("("+b+")"):b)&&null!=b.annotApp&&b.annotApp.status===DocuViewareAPI.Status.OK){if(a.Internal.Annotations.addAnnotationComment(b),
a.refreshCommentsPanel(),a.Internal.Annotations.selectAnnotationCommentById(b.annotApp.id,!0),a.callbacks.onCommentAdded)a.callbacks.onCommentAdded({id:b.annotApp.id,pageNo:b.annotApp.pageNo})}else a.ajax.HandleError(b)}},!1);jQuery(a.dom.commentDialog).dvDialog("close")}}]);return DocuViewareAPI.Status.OK},TogglePrintDialog:function(b,c){if(this.hasPendingAction(!0))return DocuViewareAPI.Status.GenericError;a.DisplayDialogForm(jQuery(a.dom.printDialog),a.Localize("_title_print_dialog"),null,function(){jQuery("[name='printPageRangeInput"+
a.uniqueID+"']").val("");var b=a.GetSelectedThumbnailItems();1==b.length&&b[0]===a.GetCurrentPage()?jQuery("[name='inputPrintSelectedPages"+a.uniqueID+"'][value=1]:radio").prop("checked",!0).trigger("change"):0<b.length?(jQuery("[name='inputPrintSelectedPages"+a.uniqueID+"'][value=2]:radio").prop("checked",!0).trigger("change"),jQuery("[name='printPageRangeInput"+a.uniqueID+"']").val(b.join())):jQuery("[name='inputPrintSelectedPages"+a.uniqueID+"'][value=0]:radio").prop("checked",!0).trigger("change")},
null,[{id:"printDialogCancelButton"+a.uniqueID,text:a.Localize("_label_cancel"),click:function(){a.Internal.Print.isPrinting&&(a.Internal.Print.isPrinting=!1,jQuery("#printProgressbarDiv"+a.uniqueID).remove(),jQuery("#printProgressionText"+a.uniqueID).remove());jQuery(a.dom.printDialog).dvDialog("close")}},{id:"printDialogPrintButton"+a.uniqueID,text:a.Localize("_label_print"),"class":"btn-valid",click:function(){var d=jQuery(a.dom.printDialog).find("select[name='print_content_select"+a.uniqueID+
"']").find("option:selected").val(),e=jQuery(a.dom.printDialog).find("select[name='print_destination_select"+a.uniqueID+"']").find("option:selected").val(),g=a.dom.printPageRangeInput.value;jQuery(".dvUi-dialog-buttonset").before("<div id='printProgressionText"+a.uniqueID+"'></div>");jQuery("#printDialogPrintButton"+a.uniqueID).prop("disabled",!0).removeClass("dvUi-state-default").addClass("dvUi-state-disabled");var f=jQuery("<div>").css({width:"100%"}).attr("id","printProgressbarDiv"+a.uniqueID).append("<div>");
f.insertBefore(a.dom.printDialog);var h=new DocuViewareProgressbar({bg:"#acf",target:f.get(0),id:"printProgressbar"+a.uniqueID});h.go(0);a.Internal.Print.printPages(0==d,g,e,function(b,c){document.getElementById("printProgressionText"+a.uniqueID).innerHTML=a.Localize("label_printing_progess").replace("#",b).replace("@",c);h.go(100*b/c)},function(){f.remove();jQuery("#printProgressionText"+a.uniqueID).remove();jQuery("#printDialogPrintButton"+a.uniqueID).prop("disabled",!1).addClass("dvUi-state-default").removeClass("dvUi-state-disabled");
jQuery(a.dom.printDialog).dvDialog("close");b&&b()},function(){f.remove();jQuery("#printProgressionText"+a.uniqueID).remove();jQuery("#printDialogPrintButton"+a.uniqueID).prop("disabled",!1).addClass("dvUi-state-default").removeClass("dvUi-state-disabled");jQuery(a.dom.printDialog).dvDialog("close");c&&c()})!=DocuViewareAPI.Status.OK&&(f.remove(),jQuery("#printProgressionText"+a.uniqueID).remove(),jQuery("#printDialogPrintButton"+a.uniqueID).prop("disabled",!1).addClass("dvUi-state-default").removeClass("dvUi-state-disabled"))}}]);
this.dom.updateButtons();return DocuViewareAPI.Status.OK},CopySelectedTextToClipboard:function(){var b=this.GetSelectedText();if(null!=b&&""!=b){var c=jQuery("<textarea>");c.css({position:"absolute",left:"-1000px",top:"-1000px"});c.addClass("dvTemporaryTextToCopy"+a.uniqueID);c.text(b);jQuery(a.dom.mainArea).append(c);document.querySelector(".dvTemporaryTextToCopy"+a.uniqueID).select();try{var d=document.execCommand("copy");c.remove();if(!d)throw"failed";}catch(y){a.dom.copyTextInput.value=b,a.DisplayDialogForm(jQuery(a.dom.copyDialog),
a.Localize("_title_copy_dialog"),null,function(){a.dom.copyTextInput.focus()},null,[{text:a.Localize("_label_close"),"class":"btn-valid",click:function(){jQuery(a.dom.copyDialog).dvDialog("close")}}])}this.dom.updateButtons();return DocuViewareAPI.Status.OK}},GetSelectedText:function(){return a.Internal.Text.getSelectedText()},ShowThumbnailsSnapIn:function(){return this.dom.thumbnailArea?this.SelectSnapIn("thumbnails"):DocuViewareAPI.Status.GenericError},ShowBookmarksSnapIn:function(){return this.dom.bookmarksArea?
this.SelectSnapIn("bookmarks"):DocuViewareAPI.Status.GenericError},ShowSearchSnapIn:function(){if(this.dom.searchArea){var b=this.SelectSnapIn("search");b==DocuViewareAPI.Status.OK&&(a.dom.searchResultsContainer.style.height=jQuery(a.dom.searchArea).outerHeight(!0)-jQuery(a.dom.searchPanelForm).outerHeight(!0)+"px");return b}return DocuViewareAPI.Status.GenericError},ShowAnnotationsSnapIn:function(){return this.dom.annotationsArea?this.SelectSnapIn("annotations"):DocuViewareAPI.Status.GenericError},
ShowCommentsSnapIn:function(){return this.dom.commentsArea?this.SelectSnapIn("comments"):DocuViewareAPI.Status.GenericError},IsSnapinsPanelVisible:function(){return this.dom.leftSideArea?"none"!=this.dom.leftSideContainerPanelsArea.style.display:!1},SetSnapinsPanelVisibility:function(b,c,d){if(!this.dom.leftSideArea)return DocuViewareAPI.Status.GenericError;var e=this.dom.leftSideContainerPanelsArea.style.display;if(b){if(!this.IsSnapinsPanelVisible()||c)c&&(c=Math.max(c,jQuery(a.dom.leftsideContainer).width()-
jQuery(a.dom.leftSideContainerPanelsArea).width())),jQuery(a.dom.leftSideArea).animate({width:c?c:a.dom.leftSideArea.oldWidth},100,"linear",function(){jQuery(a.dom.leftsideContainer).css("width","");jQuery(a.dom.leftSideContainerPanelsArea).show(0,function(){if(e!=a.dom.leftSideContainerPanelsArea.style.display||d)a.events.onNewViewerSize(),a.dom.ensureSelectedThumbnailVisibility(!1)});jQuery(a.dom.leftSideArea).resizable("enable")})}else this.IsSnapinsPanelVisible()&&(this.UnselectSelectedSnapin(),
a.dom.leftSideArea.oldWidth=c?c+"px":a.dom.leftSideArea.style.width,jQuery(a.dom.leftSideArea).animate({width:jQuery(a.dom.leftsideContainer).width()-jQuery(a.dom.leftSideContainerPanelsArea).width()},100,"linear",function(){jQuery(a.dom.leftsideContainer).css("width",jQuery(a.dom.leftsideContainer).width()-jQuery(a.dom.leftSideContainerPanelsArea).width());jQuery(a.dom.leftSideContainerPanelsArea).hide(0,function(){if(e!=a.dom.leftSideContainerPanelsArea.style.display||d)a.events.onNewViewerSize()});
jQuery(a.dom.leftSideArea).resizable("disable")}));return DocuViewareAPI.Status.OK},GetSnapInPanelWidth:function(){return this.IsSnapinsPanelVisible()?parseInt(a.dom.leftSideArea.style.width.replace("px","")):0},SetSnapInPanelWidth:function(b){return this.dom.leftSideArea&&b===parseInt(b)?null==a.dom.selectedSnapin?(a.dom.leftSideArea.oldWidth=Math.max(b,jQuery(a.dom.leftsideContainer).width()-jQuery(a.dom.leftSideContainerPanelsArea).width()),this.SelectFirstAvailableSnapin()):this.SetSnapinsPanelVisibility(!0,
b,!0):DocuViewareAPI.Status.GenericError},FindSnapIn:function(b){if(null!=a.snapIns)for(var c=0;c<a.snapIns.length;c++)if(a.snapIns[c].name==b)return a.snapIns[c];return null},UnselectSelectedSnapin:function(){if(this.dom.selectedSnapin){var a=this.FindSnapIn(this.dom.selectedSnapin);if(a){var b=document.getElementById(a.snapInID),a=document.getElementById(a.buttonID);if(b&&a)return this.dom.selectedSnapin=null,null!=this.dom.snapinsHeaderLabel&&(this.dom.snapinsHeaderLabel.innerHTML=""),jQuery(b).removeClass("active"),
jQuery(a).removeClass("active"),a.style.fill="",a.style.backgroundColor="",a.style.borderBottomColor=this.dom.UIconfig.snapInButtonBorderBottom,a.style.borderTopColor=this.dom.UIconfig.snapInButtonBorderTop,DocuViewareAPI.Status.OK}this.dom.selectedSnapin=null}return DocuViewareAPI.Status.GenericError},SelectFirstAvailableSnapin:function(b){if(null!=a.snapIns)for(b=0;b<a.snapIns.length;b++){var c=document.getElementById(a.snapIns[b].snapInID),d=document.getElementById(a.snapIns[b].buttonID);if(c&&
d&&"none"!=d.style.display)return this.SelectSnapIn(a.snapIns[b].name)}return DocuViewareAPI.Status.GenericError},SelectSnapIn:function(a){if(this.dom.selectedSnapin==a)return DocuViewareAPI.Status.OK;var b=this.SetSnapInVisibility(a,!0);if(b==DocuViewareAPI.Status.OK){if(b=this.FindSnapIn(a)){var c=document.getElementById(b.buttonID),d=document.getElementById(b.snapInID);if(c&&d&&"none"!=c.style.display)return this.UnselectSelectedSnapin(),null!=this.dom.snapinsHeaderLabel&&(this.dom.snapinsHeaderLabel.innerHTML=
b.label),jQuery(c).addClass("active"),c.style.fill=this.dom.UIconfig.headerColor,c.style.backgroundColor=this.dom.UIconfig.panelBackColor,c.style.borderBottomColor=this.dom.UIconfig.panelBackColor,c.style.borderTopColor=this.dom.UIconfig.panelBackColor,jQuery(d).addClass("active"),b.onSelection&&eval(b.onSelection),this.SetSnapinsPanelVisibility(!0),this.dom.selectedSnapin=a,DocuViewareAPI.Status.OK}return DocuViewareAPI.Status.GenericError}return b},SetSnapInVisibility:function(a,b){if(b&&"annotations"==
a&&0==this.serverCtx.annotationEditorMode)return DocuViewareAPI.Status.GenericError;var c=this.FindSnapIn(a);if(c){this.dom.selectedSnapin!=a||b||this.UnselectSelectedSnapin();var d=document.getElementById(c.buttonID),c=document.getElementById(c.snapInID);if(d&&c)return"none"!=d.style.display!=b&&(d.style.display=b?"":"none",c.style.display=b?"":"none"),DocuViewareAPI.Status.OK}return DocuViewareAPI.Status.GenericError},Search:function(a,b,c,d,e){this.ClearSearch();this.SubmitSearch(a,b,c,d,e);this.dom.searchArea&&
(this.dom.searchValueInput.value=a,this.dom.searchWholeWordInput.checked=b,this.dom.searchCaseSensitiveInput.checked=c,this.dom.searchAnyWordInput.checked=d,jQuery(this.dom.searchPageSelect).filter("[value='"+e+"']").prop("checked",!0),jQuery(this.dom.searchPageSelect).dvButton("refresh"));return DocuViewareAPI.Status.OK},SetSearchSettings:function(a,b,c,d){this.dom.searchWholeWordInput.checked=a;this.dom.searchCaseSensitiveInput.checked=b;this.dom.searchAnyWordInput.checked=c;jQuery(this.dom.searchPageSelect).filter("[value='"+
d+"']").prop("checked",!0);jQuery(this.dom.searchPageSelect).dvButton("refresh");return DocuViewareAPI.Status.OK},SubmitSearch:function(b,c,d,e,f){this.ShowSearchSnapIn();if(b){var g=[];g.push(0==f?a.GetCurrentPage():-1);return this.ajax.PostBaseRequest({url:a.appControllerPath+"/textsearch"+(a.useIdInRoot?"/1":""),data:{text:b,pages:g,wholeWord:c,caseSensitive:d,anyWord:e},success:function(c){(c="string"===typeof c?eval("("+c+")"):c)&&c.status==DocuViewareAPI.Status.OK?(a.Internal.Search.addResults(b,
c.occurences),0==c.occurences.length?alert(a.Localize("no_result")):(a.Internal.Search.navigateToFirstResult(),a.dom.searchArea&&(a.dom.searchClearResultsButton.style.display="block"))):(alert(a.Localize("no_result")),a.Internal.Search.addResults(null,null),a.ajax.HandleError(c))}},!1)}return DocuViewareAPI.Status.GenericError},UpdateLayout:function(){this.events.onResize();return DocuViewareAPI.Status.OK},ClearSearch:function(){this.Internal.Search.clearResults();this.dom.searchArea&&(this.dom.searchValueInput.value=
"",this.dom.searchClearResultsButton.style.display="none");return DocuViewareAPI.Status.OK},CommentsClearSearch:function(){this.dom.commentsSearchArea&&(this.dom.commentsSearchValueInput.value="",this.dom.commentsSearchClearResultsButton.style.display="none");a.refreshCommentsPanel();return DocuViewareAPI.Status.OK},SubmitCommentsSearch:function(a){this.ShowCommentsSnapIn();if(!a)return DocuViewareAPI.Status.GenericError},CommentsExpandCollapseAll:function(){jQuery(".dvtoggle").toggleClass("dvcolapsed").parents(".dvcomment-header").next(".dvcomment-content").slideToggle();
jQuery(".dvtoggle").hasClass("dvcolapsed")?jQuery("#commentsCollapseExpandAllButton"+a.uniqueID).html('<svg viewBox="0 0 16 16" width="100%" height="100%" style="height:16px;width:16px;"><path d="M0,4v12h12V4H0z M11,15H1V5h10V15z"/><polygon points="13,3 13,13.5 14,14.5 14,2 1.5,2 2.5,3 "/><polygon points="15,1 15,11.5 16,12.5 16,0 3.5,0 4.5,1 "/><polygon points="3.2,8.5 2.7,9 6,12.4 9.3,9 8.7,8.5 6,11.3 "/></svg>'):jQuery("#commentsCollapseExpandAllButton"+a.uniqueID).html('<svg viewBox="0 0 16 16" width="100%" height="100%" style="height:16px;width:16px;"><path d="M16,16H0V0h16V16z M0.9,15.1h14.1V0.9H0.9V15.1z"/><polygon points="6.1,10.8 6.6,11.3 9.9,8 6.6,4.7 6.1,5.2 8.8,8 "/></svg>')},
SetLoadFromUriDialogVisibility:function(b){this.dom.isLoadFromUriDialogVisible!=b&&(b?(jQuery(this.dom.openFromUriArea).slideDown({complete:function(){jQuery(document).on("click.toggleOpenUriEvent",function(b){jQuery(a.dom.openFromUriArea).is(jQuery(b.target))||0!=jQuery(a.dom.openFromUriArea).has(jQuery(b.target)).length||a.ToggleLoadFromUriDialog()});jQuery(a.dom.addressBar).focus()}}),jQuery(this.dom.openFromUriButton).addClass("button_active")):(jQuery(document).unbind("click.toggleOpenUriEvent"),
jQuery(this.dom.openFromUriArea).slideUp(),jQuery(this.dom.openFromUriButton).removeClass("button_active")),this.dom.isLoadFromUriDialogVisible=b,this.dom.updateButtons())},LoadFromUri:function(b,c,d,e){function g(b){a.ajax.downloading=!1;0!=a.dom.progressbar.value()&&a.dom.progressbar.go(100);jQuery(a.dom.mainSpinner).hide();a.SetLoadFromUriDialogVisibility(!1);if(b){if(a.callbacks.onURIOpenSuccess)a.callbacks.onURIOpenSuccess()}else if(a.callbacks.onURIOpenError)a.callbacks.onURIOpenError()}function f(b){a.ajax.HandleError(b);
g(!1)}function h(d){if(a.ajax.downloading&&(d="string"===typeof d?eval("("+d+")"):d,!d||!d.ignoreResponse))if(d&&d.status==DocuViewareAPI.Status.OK)if(d.isTransfering){if(0<d.progress&&100>=d.progress){100!=d.progress&&a.dom.progressbar.go(d.progress);var e=jQuery(a.dom.mainSpinnerContent);e.children(e.children.length-1).text(a.Localize("label__downloading_document")+" ("+d.progress+"%)")}a.ajax.PostAjaxRequestForDocuViewareAction({url:a.appControllerPath+"/loadfromuri"+(a.useIdInRoot?"/1":""),data:JSON.stringify({transferID:a.ajax.transferID,
sessionID:a.ajax.sessionID,progressRequest:!0,URI:b,fileName:c}),async:!0,success:h,error:f})}else g(!0),a.ajax.SetNewServerCtx(d);else g(!1),a.ajax.HandleError(d)}if(this.hasPendingAction())return DocuViewareAPI.Status.GenericError;this.callbacks.onURIOpenError=e;this.callbacks.onURIOpenSuccess=d;this.ajax.downloading=!0;this.ajax.transferID=Date.now();d=jQuery(this.dom.mainSpinnerContent);d.children(d.children.length-1).text(this.Localize("label__loading_progress"));a.SetLoadFromUriDialogVisibility(!1);
jQuery(this.dom.mainSpinner).show();a.ajax.PostAjaxRequestForDocuViewareAction({url:a.appControllerPath+"/loadfromuri"+(a.useIdInRoot?"/1":""),data:JSON.stringify({transferID:a.ajax.transferID,sessionID:a.ajax.sessionID,progressRequest:!1,URI:b,fileName:c,clientConfiguration:a.getConfig()}),async:!0,success:h,error:f});return DocuViewareAPI.Status.OK},ExitAnnotationDrawingMode:function(){2==this.events.mouseMode&&this.events.isDrawingPath&&(this.ResetScrollConfig(),this.dom.freehandCan.style.display=
"none",this.events.isDrawingPath=!1,this.Internal.Annotations.addAnnotInteractive(),this.dom.drawingModeArea.style.display="none",this.dom.modalOverlayArea.style.display="none",this.dom.viewerArea.style.removeProperty("z-index"));this.Internal.Annotations.stopAnnotInteractiveAdd();return DocuViewareAPI.Status.OK},IsFullScreenMode:function(){return document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement},ToggleFullscreen:function(){if(a.isSafari||
a.isIOS||a.isIE9||a.isIE10||this.hasPendingAction(!1,!1,!1))return DocuViewareAPI.Status.GenericError;if(this.IsFullScreenMode())document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen();else{jQuery(a.dom.fullscreenButton).addClass("button_active");var b=a.dom.mainArea;if(b.requestFullscreen)DocuViewareUtilities.addEvent(document,
"fullscreenchange",function p(b){document.fullscreenElement||(a.ExitFullscreen(),DocuViewareUtilities.removeEvent(document,"fullscreenchange",p,!1))},!1),b.requestFullscreen();else if(b.msRequestFullscreen)DocuViewareUtilities.addEvent(document,"MSFullscreenChange",function p(b){document.msFullscreenElement||(a.ExitFullscreen(),DocuViewareUtilities.removeEvent(document,"MSFullscreenChange",p,!1))},!1),b.msRequestFullscreen();else if(b.mozRequestFullScreen)DocuViewareUtilities.addEvent(document,"mozfullscreenchange",
function p(b){document.mozFullScreenElement||(a.ExitFullscreen(),DocuViewareUtilities.removeEvent(document,"mozfullscreenchange",p,!1))},!1),b.mozRequestFullScreen();else if(b.webkitRequestFullScreen)DocuViewareUtilities.addEvent(document,"webkitfullscreenchange",function p(b){document.webkitFullscreenElement||(a.ExitFullscreen(),DocuViewareUtilities.removeEvent(document,"webkitfullscreenchange",p,!1))},!1),b.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT);else return DocuViewareAPI.Status.GenericError;
a.dom.UIconfig.old_viewer_width=a.width;a.dom.UIconfig.old_viewer_height=a.height;a.dom.leftSideArea&&"none"!=a.dom.leftSideContainerPanelsArea.style.display&&(b=window.screen.width/a.width,a.dom.leftSideArea.style.width=Math.round((a.dom.leftSideArea.style.width.replace("px","")||a.dom.leftSideArea.offsetWidth)*b)+"px");a.events.onNewViewerSize();a.dom.updateButtons()}return DocuViewareAPI.Status.OK},ExitFullscreen:function(){if(this.hasPendingAction(!1,!1,!1))return DocuViewareAPI.Status.GenericError;
jQuery(a.dom.fullscreenButton).removeClass("button_active");var b=a.dom.UIconfig.old_viewer_width/a.width;a.dom.leftSideArea&&("none"!=a.dom.leftSideContainerPanelsArea.style.display?a.dom.leftSideArea.style.width=Math.round((a.dom.leftSideArea.style.width.replace("px","")||a.dom.leftSideArea.offsetWidth)*b)+"px":a.dom.leftSideContainerPanelsArea.style.width=Math.round(parseFloat(a.dom.leftSideContainerPanelsArea.style.width.replace("px",""))*b)+"px");a.events.onNewViewerSize()},SetZoomMode:function(b){return a.ajax.PostBaseRequest({url:a.appControllerPath+
"/zoommode"+(a.useIdInRoot?"/1":""),data:{zoomMode:b},success:function(b){a.ajax.HandleServerContextResponse("string"===typeof b?eval("("+b+")"):b,!1)}},!1)},SetMouseMode:function(b){a.events.mouseMode=b;var c=DocuViewareAPI.Status.OK;a.events.setCursor();a.Internal.Selection.selectionArea.hide();switch(b){case 0:case 1:a.Internal.Selection.selectionArea.setSelectionRectangleStyle(!1);a.events.ownMouseEvents=!1;break;case 3:a.Internal.Selection.selectionArea.setSelectionRectangleStyle(!0);a.Internal.Selection.selectionArea.setLineMode(0);
a.events.ownMouseEvents=!0;a.Internal.Annotations.unselectAll();a.Internal.Text.clearSelection();a.dom.SelectedTextRegions.clear(1);break;case 4:a.Internal.Selection.selectionArea.setSelectionRectangleStyle(!0);a.Internal.Selection.selectionArea.setLineMode(0);a.events.ownMouseEvents=!0;a.Internal.Annotations.unselectAll();a.Internal.Text.clearSelection();a.dom.SelectedTextRegions.clear(1);break;default:c=DocuViewareAPI.Status.GenericError}a.dom.udpateMouseModeButtons(b);a.dom.updateButtons();return c},
GetMouseMode:function(){return a.events.mouseMode},ZoomIN:function(b,c,d){return this.ajax.PostBaseRequest({url:a.appControllerPath+"/zoomin"+(a.useIdInRoot?"/1":""),data:{count:b},success:function(b){a.ajax.HandleServerContextResponse("string"===typeof b?eval("("+b+")"):b,!1);c&&c()},error:function(){d&&d()}},!1)},ZoomOUT:function(b,c,d){return this.ajax.PostBaseRequest({url:a.appControllerPath+"/zoomout"+(a.useIdInRoot?"/1":""),data:{count:b},success:function(b){a.ajax.HandleServerContextResponse("string"===
typeof b?eval("("+b+")"):b,!1);c&&c()},error:function(){d&&d()}},!1)},ZoomRect:function(b,c,d){return b&&b.left&&b.top&&b.width&&b.height?(b={url:a.appControllerPath+"/zoomrect"+(a.useIdInRoot?"/1":""),data:{pageNo:this.GetCurrentPage(),left:b.left,top:b.top,width:b.width,height:b.height},success:function(b){a.ajax.HandleServerContextResponse("string"===typeof b?eval("("+b+")"):b,!1);c&&c()},error:function(){d&&d()}},this.ajax.PostBaseRequest(b,!1)):DocuViewareAPI.Status.GenericError},Rotate:function(b,
c){return this.ajax.PostBaseRequest({url:a.appControllerPath+"/rotate"+(a.useIdInRoot?"/1":""),data:{rotation:b,mode:c},success:function(b){a.ajax.HandleServerContextResponse("string"===typeof b?eval("("+b+")"):b,!1)}})},SelectPage:function(a,b){this.serverCtx.documentLoaded&&0<a&&a<=this.serverCtx.pageCount&&a!=this.GetLastPageNoRequest()?this.SelectPageEx(a,!0,!0,!0,!1,!1,b):b&&b();return DocuViewareAPI.Status.OK},EnsurePageVisibility:function(b){if(!this.serverCtx.singlePageView&&null!=this.cache.canvas)for(var c=
0;c<this.cache.canvas.length;c++)if(this.cache.canvas[c].pageNo==b){var d=this.cache.canvas[c].top,c=this.cache.canvas[c].bottom-d,e=this.dom.viewerArea.offsetHeight,d=e<c?Math.round(d):Math.round(d+(c-e)/2);a.Internal.Coordinates.getViewerScrollTop()!=d&&(this.dom.viewerArea.ignoreScrollAt=d,a.Internal.Coordinates.setViewerScrollTop(d),a.showVisiblePages(b));break}},EnsureCurrentPageVisibility:function(){this.EnsurePageVisibility(this.GetLastPageNoRequest())},SelectPageEx:function(b,c,d,e,f,h,k){a.debug&&
console.log("DocuVieware: Select page: "+b);a.Internal.Thumbnails.reinitThumbnailsSelection();if(b!=a.GetLastPageNoRequest())return e&&this.dom.updateSelectedPageFader(500,b),d&&!a.serverCtx.singlePageView&&a.EnsurePageVisibility(b),f&&a.serverCtx.singlePageView&&(f=!1),d=this.ajax.latestSelectedPage,this.ajax.latestSelectedPage=b,b=this.ajax.PostBaseRequest({url:a.appControllerPath+"/selectpage"+(a.useIdInRoot?"/1":""),data:{page:b},success:function(b){a.ajax.HandleServerContextResponse("string"===
typeof b?eval("("+b+")"):b,f)&&a.dom.updateThumbsStyle(c,!1);k&&k()},error:function(){}},!1,!0),b!=DocuViewareAPI.Status.OK&&(this.ajax.latestSelectedPage=d),b;a.Internal.Thumbnails.toggleThumbnailSelection(b);h&&a.DrawPage(a.cache.getPageObject(b));return DocuViewareAPI.Status.OK},Save:function(b,c,d,e,f){if(this.hasPendingAction(!0))return DocuViewareAPI.Status.GenericError;if(""==b)return a.DisplayError(a.Localize("error__saving_filename")),DocuViewareAPI.Status.GenericError;if(""==c)return a.DisplayError(a.Localize("error__saving_file_format")),
DocuViewareAPI.Status.GenericError;window.location=a.appControllerPath+"/save"+(a.useIdInRoot?"/1":"")+"?sessionID="+this.ajax.sessionID+"&fileName="+encodeURIComponent(b)+"&format="+c+"&pageRange="+(d?d:"*");e&&e();if(a.callbacks.onDocumentSaved)a.callbacks.onDocumentSaved();return DocuViewareAPI.Status.OK},CloseDocument:function(){return this.serverCtx.documentLoaded?(this.cache.Pages=null,this.ajax.PostBaseRequest({url:a.appControllerPath+"/close"+(a.useIdInRoot?"/1":""),data:{},success:function(b){a.ajax.SetNewServerCtx(null)}},
!0)):DocuViewareAPI.Status.GenericError},AddAnnotInteractive:function(b,c,d,e){if(this.hasPendingAction(!0))return DocuViewareAPI.Status.GenericError;c?(annotProperties=this.Internal.Annotations.mergeAnnotationProperties(b,c),d?this.Internal.Annotations.showAnnotationPropertiesUI(annotProperties,null,null,e):this.Internal.Annotations.beginAddAnnotInteractive(annotProperties,a.GetCurrentPage())):this.Internal.Annotations.defaultProperties[b].autoCreate?this.Internal.Annotations.beginAddAnnotInteractive(this.Internal.Annotations.defaultProperties[b],
a.GetCurrentPage()):this.Internal.Annotations.showAnnotationPropertiesUI(this.Internal.Annotations.defaultProperties[b],null);return DocuViewareAPI.Status.OK},EditAnnotInteractive:function(a,b){if(this.hasPendingAction(!0))return DocuViewareAPI.Status.GenericError;var c=jQuery.extend(!0,{},this.Internal.Annotations.defaultProperties[a.annotApp.properties.type]);jQuery.each(c,function(b,d){c[b]=a.annotApp.properties[b]});return this.Internal.Annotations.showAnnotationPropertiesUI(c,!0,a,b)},DeleteAnnotationById:function(b){if(null!=
a.cache.Annots)for(var c=this.GetCurrentPage(),d=0;d<a.cache.Annots.length;d++){var e=a.cache.Annots[d];if(e.annotApp.pageNo==c&&e.annotApp.id==b)return e.updateAnnotation(!0,null)}return DocuViewareAPI.Status.GenericError},EnableAnnotEditionOnDblClick:function(a){if("boolean"==typeof a)this.dom.enableAnnotEditionOnDblClick=a;else return DocuViewareAPI.Status.GenericError;return DocuViewareAPI.Status.OK},ResetAnnotAutoCreate:function(a){if(0<a.length)for(var b=0;b<a.length;b++)this.Internal.Annotations.defaultProperties[a[b]].autoCreate=
!1;else for(b=0;b<Object.keys(this.Internal.Annotations.defaultProperties).length;b++)this.Internal.Annotations.defaultProperties[b].autoCreate=!1;return DocuViewareAPI.Status.OK},ResetAnnotToDefault:function(a){if(0<a.length)for(var b=0;b<a.length;b++)this.Internal.Annotations.defaultProperties[a[b]]=DocuViewareAnnotationsUtilities.getAnnotationDefaultProperties([a[b]]);else for(b=0;b<Object.keys(this.Internal.Annotations.defaultProperties).length;b++)this.Internal.Annotations.defaultProperties[b]=
DocuViewareAnnotationsUtilities.getAnnotationDefaultProperties(b);return DocuViewareAPI.Status.OK},SetAnnotDefaultAuthor:function(a,b){this.Internal.Annotations.setDefaultAuthor(a);this.dom.commentsAuthorInput.disabled=!0===b?!0:!1;return DocuViewareAPI.Status.OK},SetAnnotPropertiesValues:function(a,b){if(b)this.Internal.Annotations.setDefaultPropertiesValues(a,b);else return DocuViewareAPI.Status.GenericError;return DocuViewareAPI.Status.OK},SetAnnotPropertiesToDisplay:function(a,b){if(b)this.Internal.Annotations.setDefaultPropertiesToDisplay(a,
b);else return DocuViewareAPI.Status.GenericError;return DocuViewareAPI.Status.OK},ResetAnnotPropertiesToDisplayDefault:function(a){if(0<a.length)for(var b=0;b<a.length;b++)this.Internal.Annotations.defaultPropertiesDisplay[a[b]]=DocuViewareAnnotationsUtilities.getAnnotationDefaultPropertiesDisplay([a[b]]);else for(b=0;b<Object.keys(this.Internal.Annotations.defaultPropertiesDisplay).length;b++)this.Internal.Annotations.defaultPropertiesDisplay[b]=DocuViewareAnnotationsUtilities.getAnnotationDefaultPropertiesDisplay(b);
return DocuViewareAPI.Status.OK},GetTwainAcquisitionServiceInfo:function(b,c){a.ajax.PostAjaxRequestForCrossDomainApp({url:a.twainServiceUri+"ServiceVersion/",success:function(a){a?b&&b(a):c&&c()},error:function(){c&&c({status:DocuViewareAPI.Status.GenericError,message:a.Localize("_twain_connector_unavailable"),twainStatus:a.Internal.Twain.Status.NOT_RESPONDING})}});return DocuViewareAPI.Status.OK},GetTwainAcquisitionSources:function(b,c){a.ajax.PostAjaxRequestForCrossDomainApp({url:a.twainServiceUri+
"GetTwainSources/",success:function(a){a?b&&b(a):c&&c(a)},error:function(){c&&c({status:DocuViewareAPI.Status.GenericError,message:a.Localize("_twain_connector_unavailable"),twainStatus:a.Internal.Twain.Status.NOT_RESPONDING})}})},GetTwainSourceList:function(){var b=null;a.ajax.PostAjaxRequestForCrossDomainApp({url:a.twainServiceUri+"GetTwainSources/",async:!1,timeout:5E3,success:function(a){a&&a.GetTwainSourcesResult&&(b=a.GetTwainSourcesResult)}});return b},TwainGetLocalServiceStatus:function(){var b=
DocuViewareAPI.LocalServiceStatus.NotFound;a.ajax.PostAjaxRequestForCrossDomainApp({url:a.twainServiceUri+"ServiceVersion/",async:!1,timeout:5E3,success:function(c){b=c&&c.ServiceVersionResult?parseInt(c.ServiceVersionResult)>=a.twainServiceSupportedVersion?DocuViewareAPI.LocalServiceStatus.Ready:DocuViewareAPI.LocalServiceStatus.WrongVersion:DocuViewareAPI.LocalServiceStatus.NotFound}});return b},DownloadTwainServiceSetup:function(){window.location=a.appControllerPath+"/twainservicesetupdownload"+
(a.useIdInRoot?"/1":"")+"?sessionID="+this.ajax.sessionID;return DocuViewareAPI.Status.OK}};a.resetServerCtx();if(a.dom.thumbnailArea){b=document.getElementById(a.FindSnapIn("thumbnails").snapInID);a.isIOS&&(b.style.overflow="auto");var F=null;jQuery(b).bind("scroll",function(b){null!=F&&clearTimeout(F);F=setTimeout(function(){a.showVisibleThumbnails()},a.fastMode?50:400)});a.dom.UIconfig.enableMultipleThumbnailSelection&&(a.dom.thumbnailSelectBox=jQuery("<div/>").appendTo(b).css("position","absolute").css("border",
"1px solid "+a.dom.UIconfig.activeSelectedColorHover).css("background-color",a.dom.UIconfig.activeSelectedBackgroundColor).css("display","none"),b.onmousedown=a.events.onThumbnailAreaMouseDownHandler,b.onmousemove=a.events.onThumbnailAreaMouseMoveHandler,b.onmouseup=a.events.onThumbnailAreaMouseUpHandler);a.dom.UIconfig.enableThumbnailDragDrop&&jQuery(a.dom.thumbnailArea).sortable({placeholder:"highlight",forcePlaceholderSize:!0,tolerance:"pointer",helper:function(b,c){if(!a.serverCtx.enablePageMoving||
a.hasPendingAction())return null;var d=jQuery("<div>"),e=jQuery("<div>");e.css({position:"relative",width:"100%",height:"100%"});var f=c.find("canvas"),g=f.get(0).toDataURL("image/png"),g=jQuery('<img src="'+g+'"/>');g.css({position:"absolute",left:"0px",top:"0px",opacity:"0.5",width:f.width()/2+"px",height:f.height()/2+"px"});e.html(g);d.html(e);d.width(f.width()/2);d.height(f.height()/2);return d},start:function(b,c){if(a.serverCtx.enablePageMoving&&!a.hasPendingAction()){a.dom.resetThumbStyle(c.placeholder,
!0);c.placeholder.width(c.item.width());c.item.attr("data-moving","true");var d=a.Internal.Thumbnails.getThumbnailPage(c.item.get(0));a.Internal.Thumbnails.isThumbnailSelected(d)||(a.Internal.Thumbnails.reinitThumbnailsSelection(),a.Internal.Thumbnails.selectThumbnail(d));d=a.GetSelectedThumbnailItems();if(0!=d.length){for(var e=0;e<d.length;e++){var f=a.Internal.Thumbnails.getThumbnailFromPageNo(d[e]);null!=f&&f.css("opacity","0.5")}d=jQuery("<span>"+d.length+"</span>");d.css({padding:"6px",color:"white",
border:"1px solid white",position:"absolute",opacity:"0.95","background-color":a.dom.UIconfig.activeSelectedColor,right:"10%",bottom:"10%","-webkit-border-radius":"4px","-moz-border-radius":"4px","border-radius":"4px"});jQuery(c.helper).children(0).append(d)}}},update:function(b,c){if(a.serverCtx.enablePageMoving&&!a.hasPendingAction()){var d=c.item.index()+1,e=a.GetSelectedThumbnailItems();1==e.length&&e[0]===d||a.ajax.PostBaseRequest({url:a.appControllerPath+"/movepage"+(a.useIdInRoot?"/1":""),
data:{source:e,dest:d},success:function(b){a.ajax.HandleServerContextResponse("string"===typeof b?eval("("+b+")"):b,!1,!1,!0);if(a.callbacks.onThumbnailsOrderChanged)a.callbacks.onThumbnailsOrderChanged({source:e,destination:d})}},!1)}},stop:function(b,c){c.item.attr("data-moving","false");var d=a.GetSelectedThumbnailItems();if(0!=d.length)for(var e=a.Internal.Thumbnails.getThumbnailPage(c.item.get(0)),f=c.item,g=0;g<d.length;g++){var h=d[g],k=a.Internal.Thumbnails.getThumbnailFromPageNo(h);h!=e&&
(h<e?c.item.before(k):f.after(k));f=k;f.css("opacity","1")}}})}a.events.pageRequestTimeout=null;a.events.onViewScroll=function(){a.events.pageRequestTimeout&&clearTimeout(a.events.pageRequestTimeout);if(0==this.ignoreScrollAt||this.scrollTop!=this.ignoreScrollAt)if(a.events.isPanning||(0==a.serverCtx.hScrollbarMax&&0!=a.Internal.Coordinates.getViewerScrollLeft()&&a.Internal.Coordinates.setViewerScrollLeft(0),0==a.serverCtx.vScrollbarMax&&0!=a.Internal.Coordinates.getViewerScrollTop()&&a.Internal.Coordinates.setViewerScrollTop(0)),
null!=a.serverCtx&&!a.serverCtx.singlePageView&&a.serverCtx.documentLoaded&&!(a.Internal.Files.uploading||a.ajax.downloading||null!=a.selectNextPageActions&&0!=a.selectNextPageActions||null!=a.selectPreviousPageActions&&0!=a.selectPreviousPageActions)){var b=-1;if(null!=a.cache.canvas)for(var c=!1,d=a.Internal.Coordinates.getViewerScrollTop()+a.dom.viewerArea.offsetHeight/2,e=0;e<a.cache.canvas.length;e++){for(var f=0;f<a.cache.canvas[e].canvas.length;f++){var h=parseFloat(a.cache.canvas[e].canvas[f].tile.style.top),
k=h+parseFloat(a.cache.canvas[e].canvas[f].tile.style.height);if(h<d&&k>d){b=a.cache.canvas[e].pageNo;a.dom.updateSelectedPageFader(0,b);c=!0;break}}if(c)break}a.events.pageRequestTimeout=setTimeout(function(){0<b&&b<=a.serverCtx.pageCount&&b!=a.GetLastPageNoRequest()?a.SelectPageEx(b,!0,!1,!0,!0):a.showVisiblePages(b)},a.fastMode?50:500)}};jQuery(a.dom.viewerArea).bind("scroll",a.events.onViewScroll);jQuery(a.dom.viewerArea).dvContextMenu({idMenu:"viewerContextMenu"+a.uniqueID,referer:a.dom.viewerArea,
beforeShow:function(){return null!=a.Internal.Text.getSelectedText()},translateMouse:function(b){var c=a.dom.viewerArea.getBoundingClientRect();b.x=b.x-c.left+a.dom.viewerArea.offsetLeft+5;b.y=b.y-c.top+a.dom.viewerArea.offsetTop+5}});O(a);jQuery("#"+c).on("dragenter",function(a){a.stopPropagation();a.preventDefault()});jQuery("#"+c).on("dragover",function(a){a.stopPropagation();a.preventDefault()});jQuery("#"+c).on("drop",function(b){b.originalEvent&&b.originalEvent.dataTransfer&&b.originalEvent.dataTransfer.files&&
(b.preventDefault(),(b=b.originalEvent.dataTransfer.files)&&1<=b.length&&a.Internal.Files.uploadFile(b[0],0))});jQuery(a.dom.viewerArea).on("keydown",function(b){(b.metaKey||b.ctrlKey)&&"c"===String.fromCharCode(b.which).toLowerCase()&&a.CopySelectedTextToClipboard()});a.dom.pageNavBox&&a.dom.pageNavBox.id&&jQuery(a.dom.pageNavBox).keypress(function(b){13==(b.keyCode||b.which)&&(b.preventDefault(),b=parseInt(a.dom.pageNavBox.value),a.serverCtx.documentLoaded&&b!=a.GetLastPageNoRequest()?0<b&&b<=a.serverCtx.pageCount?
(a.dom.pageNavBox.value=b,a.SelectPage(b)):a.DisplayError(a.Localize("error_invalid_pages_number")+" [1 - "+a.serverCtx.pageCount.toString()+"]"):a.dom.pageNavBox.value=b)});a.dom.pageNavBoxMobile&&a.dom.pageNavBoxMobile.id&&jQuery(a.dom.pageNavBoxMobile).keypress(function(b){13==(b.keyCode||b.which)&&(b.preventDefault(),b=parseInt(a.dom.pageNavBoxMobile.value),a.serverCtx.documentLoaded&&b!=a.GetLastPageNoRequest()?0<b&&b<=a.serverCtx.pageCount?(a.dom.pageNavBoxMobile.value=b,a.SelectPage(b)):a.DisplayError(a.Localize("error_invalid_pages_number")+
" [1 - "+a.serverCtx.pageCount.toString()+"]"):a.dom.pageNavBoxMobile.value=b)});a.dom.searchValueInput&&jQuery(a.dom.searchValueInput).keypress(function(b){if(13==(b.keyCode||b.which)){b.preventDefault();b=a.dom.searchValueInput.value;var c=a.dom.searchWholeWordInput.checked,d=a.dom.searchCaseSensitiveInput.checked,e=a.dom.searchAnyWordInput.checked,f=jQuery(a.dom.searchPageSelect).filter(":checked").val();a.SubmitSearch(b,c,d,e,f)}});a.dom.addressBar&&jQuery(a.dom.addressBar).keypress(function(b){13==
(b.keyCode||b.which)&&(b.preventDefault(),a.LoadFromUri(a.dom.addressBar.value,"",null,null))});"ontouchstart"in document.documentElement?(jQuery(a.dom.mainArea).find(".dv-button").on("touchstart",function(b){jQuery(this).addClass("button_hover");a.dom.updateButtons()}),jQuery(a.dom.mainArea).find(".dv-button").on("touchend",function(b){jQuery(this).removeClass("button_hover");a.dom.updateButtons()})):jQuery(a.dom.mainArea).find(".dv-button").hover(function(){jQuery(this).addClass("button_hover");
a.dom.updateButtons()},function(){jQuery(this).removeClass("button_hover");a.dom.updateButtons()});a.dom.leftSideArea&&(jQuery(a.dom.leftSideArea).resizable({containment:jQuery(a.dom.controlArea),handles:{e:jQuery(a.dom.leftSideResizeBar)},minWidth:null!=a.dom.snapinButtonStrip?a.dom.snapinButtonStrip.offsetWidth:0,start:function(b,c){a.hasPendingAction()?b.preventDefault():a.events.isResizingUI=!0},resize:function(b,c){var d=null!=a.dom.snapinButtonStrip?a.dom.snapinButtonStrip.offsetWidth:0;c.size.width<
d+30&&(c.size.width=d)},stop:function(b,c){a.events.isResizingUI=!1;c.size.width<(null!=a.dom.snapinButtonStrip?a.dom.snapinButtonStrip.offsetWidth:0)+30&&a.SetSnapinsPanelVisibility(!1,c.originalSize.width);a.events.onNewViewerSize()}}),a.dom.searchArea&&jQuery(a.dom.searchArea).find(".dv-jqueryRadio").dvButtonset({setActive:function(){jQuery(a.dom.searchArea).find(".dvUi-button").each(function(b){jQuery(this).css("background-color","transparent");jQuery(this).css("background-image","none");jQuery(this).css("background-repeat",
"repeat-x");jQuery(this).css("border","1px solid transparent");jQuery(this).css("fill",a.dom.UIconfig.strokeColor)});jQuery(a.dom.searchArea).find(".dvUi-state-active").each(function(b){jQuery(this).css("background-color","transparent");jQuery(this).css("background-image","-moz-linear-gradient(top, "+a.dom.UIconfig.panelBackColor+","+a.dom.UIconfig.panelDarkerBackColor+")");jQuery(this).css("background-image","-webkit-linear-gradient(top, "+a.dom.UIconfig.panelBackColor+","+a.dom.UIconfig.panelDarkerBackColor+
")");jQuery(this).css("background-image","-ms-linear-gradient(top, "+a.dom.UIconfig.panelBackColor+" 0%,"+a.dom.UIconfig.panelDarkerBackColor+" 100%)");jQuery(this).css("background-image","-o-linear-gradient(top, "+a.dom.UIconfig.panelBackColor+","+a.dom.UIconfig.panelDarkerBackColor+")");jQuery(this).css("background-image","linear-gradient(to bottom, "+a.dom.UIconfig.panelBackColor+","+a.dom.UIconfig.panelDarkerBackColor+")");jQuery(this).css("background-repeat","repeat-x");jQuery(this).css("border",
"1px solid "+a.dom.UIconfig.miscBorderColor);jQuery(this).css("fill",a.dom.UIconfig.activeSelectedColor)})}}),a.dom.UIconfig.collapsedSnapInPanel&&(jQuery(a.dom.leftSideArea).resizable("disable"),a.dom.leftSideArea.oldWidth=a.dom.UIconfig.snapInPanelDefaultWidth));b=document.getElementsByName("inputSelectedPages"+a.uniqueID);for(var G=0;G<b.length;G++)b[G].onchange=function(b){a.pageRangeSelection(this.value,document.getElementById("savePageRangeInput"+a.uniqueID))};document.getElementById("savePageRangeInput"+
a.uniqueID).onkeyup=function(b){a.inputPageRangeControl(b.target)};b=document.getElementsByName("inputPrintSelectedPages"+a.uniqueID);for(G=0;G<b.length;G++)b[G].onchange=function(b){a.pageRangeSelection(this.value,a.dom.printPageRangeInput)};a.dom.printPageRangeInput.onkeyup=function(b){a.inputPageRangeControl(b.target)};a.dom.progressbar=new DocuViewareProgressbar({bg:"#acf",target:a.dom.controlArea,id:"progressbar"+a.uniqueID});a.dom.viewerArea.cursorMgr=CreateDocuViewareCursorManager(a.dom.viewerArea,
a.isIEorEdge);a.dom.updateSinglePageModeButton();a.events.onLoad(t);DocuViewareUtilities.addEvent(window,"resize",a.events.onResize);return a}};
